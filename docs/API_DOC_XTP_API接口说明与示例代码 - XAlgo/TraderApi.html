<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.41" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://10000l.github.io/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderApi.html"><meta property="og:site_name" content="Docs Demo"><meta property="og:description" content="TraderApi ç›®å½• 1. æ¥å£ 2. ç¤ºä¾‹ä»£ç  3. CreateTraderApi 4. Release 5. GetTradingDay 6. RegisterSpi 7. GetApiLastError 8. GetApiVersion 9. GetClientIDByXTPID 10. GetAccountByXTPID 11. Subs..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-06-03T15:52:56.000Z"><meta property="article:author" content="xtp_master"><meta property="article:modified_time" content="2024-06-03T15:52:56.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"","image":[""],"dateModified":"2024-06-03T15:52:56.000Z","author":[{"@type":"Person","name":"xtp_master","url":"https://xtp.zts.com.cn"}]}</script><title>Docs Demo</title><meta name="description" content="TraderApi ç›®å½• 1. æ¥å£ 2. ç¤ºä¾‹ä»£ç  3. CreateTraderApi 4. Release 5. GetTradingDay 6. RegisterSpi 7. GetApiLastError 8. GetApiVersion 9. GetClientIDByXTPID 10. GetAccountByXTPID 11. Subs...">
    <link rel="preload" href="/assets/style-Dd6O2LES.css" as="style"><link rel="stylesheet" href="/assets/style-Dd6O2LES.css">
    <link rel="modulepreload" href="/assets/app-C9BeCxEA.js"><link rel="modulepreload" href="/assets/TraderApi.html-CRFX3sMP.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-Dai6A3q2.js" as="script"><link rel="prefetch" href="/assets/disable.html-CcyhMzm1.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-BIoWu_03.js" as="script"><link rel="prefetch" href="/assets/layout.html-CwJNat8r.js" as="script"><link rel="prefetch" href="/assets/markdown.html-BEwqq3Yt.js" as="script"><link rel="prefetch" href="/assets/page.html-DWuPxPA8.js" as="script"><link rel="prefetch" href="/assets/XTPäº¤æ˜“Trader-APIä½¿ç”¨æŒ‡å—QuickStart.html-DcUuPDq0.js" as="script"><link rel="prefetch" href="/assets/XTPäº¤æ˜“åˆ†é¡µæŸ¥è¯¢ç¤ºä¾‹ä»£ç .html-iXOJkFR1.js" as="script"><link rel="prefetch" href="/assets/XTPè¡Œæƒ…Quote-APIæ–­çº¿ååº”å¯¹æªæ–½.html-B7-z4Qhc.js" as="script"><link rel="prefetch" href="/assets/QuoteApi.html-CdlO6WKK.js" as="script"><link rel="prefetch" href="/assets/QuoteSpi.html-ZrMQ5YGd.js" as="script"><link rel="prefetch" href="/assets/TraderSpi.html-BHPpE2Hl.js" as="script"><link rel="prefetch" href="/assets/å¤´æ–‡ä»¶.html-BCN5UTKX.js" as="script"><link rel="prefetch" href="/assets/æ”¯æŒå¹³å°.html-Dkq2wS5D.js" as="script"><link rel="prefetch" href="/assets/ç‰ˆæœ¬æ›´æ–°ä»‹ç».html-Dyo3hkY4.js" as="script"><link rel="prefetch" href="/assets/ç±»åº“æ–‡ä»¶.html-aXoXDpIk.js" as="script"><link rel="prefetch" href="/assets/XTPå…³äºL2è¡Œæƒ…æ•°æ®å›è¡¥åŠŸèƒ½çš„ä½¿ç”¨è¯´æ˜.html-DBZiJVPC.js" as="script"><link rel="prefetch" href="/assets/XTPæŠ¥å•æ¥å£ç¤ºä¾‹ä»£ç æ–‡æ¡£.html-CubbDj_z.js" as="script"><link rel="prefetch" href="/assets/XTPè¡Œæƒ…Quote-APIä½¿ç”¨æŒ‡å—QuickStart.html-DZmbazxU.js" as="script"><link rel="prefetch" href="/assets/XTPæ–°å€ºç”³è´­é€»è¾‘ç¤ºä¾‹ä»£ç .html-BWjpGM7U.js" as="script"><link rel="prefetch" href="/assets/XTPæ–°è‚¡ç”³è´­é€»è¾‘ç¤ºä¾‹ä»£ç .html-euQq34gc.js" as="script"><link rel="prefetch" href="/assets/èµ„é‡‘åˆ’æ‹¨æ¥å£çš„ç¤ºä¾‹ä»£ç .html-CgTUYGlS.js" as="script"><link rel="prefetch" href="/assets/XTPé…è‚¡é€»è¾‘ç¤ºä¾‹ä»£ç .html-D0DGy2u3.js" as="script"><link rel="prefetch" href="/assets/XTP QuoteAPIä½¿ç”¨UDPå¸¸è§é—®é¢˜.html-DutQxdXs.js" as="script"><link rel="prefetch" href="/assets/XTPä¸Šäº¤æ‰€æ–°å€ºåˆ¸ Level2 è¡Œæƒ…è¯´æ˜.html-COy5HmvT.js" as="script"><link rel="prefetch" href="/assets/APIå¸¸è§é—®é¢˜.html-BHSHwKy5.js" as="script"><link rel="prefetch" href="/assets/XTPäº¤æ˜“ä¸šåŠ¡æŠ¥å•æ¥å£åŠå‚æ•°è¯´æ˜.html-Dq8W5uIQ.js" as="script"><link rel="prefetch" href="/assets/XTPæ”¯æŒä¸Šæµ·Level2é€ç¬”åˆå¹¶è¯´æ˜.html-UmXq-NGB.js" as="script"><link rel="prefetch" href="/assets/XTPæ’¤å•å»ºè®®.html-DknWur9u.js" as="script"><link rel="prefetch" href="/assets/XTPæ”¯æŒä¸Šæµ·Level2é€ç¬”å§”æ‰˜è¯´æ˜.html-DzUwV4RA.js" as="script"><link rel="prefetch" href="/assets/XTPæ¨¡æ‹Ÿæµ‹è¯•ç¯å¢ƒå¸¸è§é—®é¢˜.html-Bu8iRbF3.js" as="script"><link rel="prefetch" href="/assets/XTPè¡Œæƒ…æœåŠ¡æ¥å…¥å‰æŒ‡å¼•æ–‡æ¡£.html-Bf8UePdV.js" as="script"><link rel="prefetch" href="/assets/XTPé€ç¬”æ•°æ®ç»“æ„ä½“å­—æ®µè¯´æ˜.html-CYQchIkl.js" as="script"><link rel="prefetch" href="/assets/XTPé‡‘èé£æ§æŒ‡æ ‡.html-oJxfBtVT.js" as="script"><link rel="prefetch" href="/assets/XTPé”™è¯¯ä»£ç é€ŸæŸ¥è¡¨.html-Ba3A2UCM.js" as="script"><link rel="prefetch" href="/assets/xtpè®¢å•çš„çŠ¶æ€æœºå›¾.html-BoukpO-y.js" as="script"><link rel="prefetch" href="/assets/äº§å“ç®€ä»‹.html-CJUOaJrX.js" as="script"><link rel="prefetch" href="/assets/å…¬ç½‘æµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿæ’®åˆé”™è¯¯ä»£ç è¡¨.html-CfZzHroP.js" as="script"><link rel="prefetch" href="/assets/æ ¸å¿ƒåŠŸèƒ½.html-yGbOnHiG.js" as="script"><link rel="prefetch" href="/assets/æµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿæ’®åˆè§„åˆ™.html-DID_SPCw.js" as="script"><link rel="prefetch" href="/assets/ç®—æ³•æµæ§åŠæ¯å•å‚æ•°ç±»å‹è¯´æ˜.html-B67k0opP.js" as="script"><link rel="prefetch" href="/assets/404.html-CQXoZoxt.js" as="script"><link rel="prefetch" href="/assets/index.html-BYJcuSo-.js" as="script"><link rel="prefetch" href="/assets/index.html-Dh0ip4uO.js" as="script"><link rel="prefetch" href="/assets/index.html-t4Xmed27.js" as="script"><link rel="prefetch" href="/assets/index.html-DVCq-ZgS.js" as="script"><link rel="prefetch" href="/assets/index.html-B3h0KiAd.js" as="script"><link rel="prefetch" href="/assets/index.html-BVNg8Arf.js" as="script"><link rel="prefetch" href="/assets/index.html-DzFHhHK9.js" as="script"><link rel="prefetch" href="/assets/index.html-Cq2Ax-N9.js" as="script"><link rel="prefetch" href="/assets/index.html-RSI4y10W.js" as="script"><link rel="prefetch" href="/assets/index.html-GInLtDys.js" as="script"><link rel="prefetch" href="/assets/index.html-wF05f9Sz.js" as="script"><link rel="prefetch" href="/assets/index.html-W-tDaFDj.js" as="script"><link rel="prefetch" href="/assets/index.html-D9uF21oY.js" as="script"><link rel="prefetch" href="/assets/index.html-Dw96UlLJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DJYS2g4v.js" as="script"><link rel="prefetch" href="/assets/index.html-CPQpryqe.js" as="script"><link rel="prefetch" href="/assets/index.html-Dj07ZedY.js" as="script"><link rel="prefetch" href="/assets/index.html-0lTYRdJ6.js" as="script"><link rel="prefetch" href="/assets/index.html-CLU_Tyvo.js" as="script"><link rel="prefetch" href="/assets/index.html-BlB2jnqR.js" as="script"><link rel="prefetch" href="/assets/index.html-CqNFCFZB.js" as="script"><link rel="prefetch" href="/assets/index.html-k_q13hb0.js" as="script"><link rel="prefetch" href="/assets/index.html-S1lFBJKJ.js" as="script"><link rel="prefetch" href="/assets/index.html-cZLmCzUa.js" as="script"><link rel="prefetch" href="/assets/index.html-C_km2rpE.js" as="script"><link rel="prefetch" href="/assets/index.html-9uUZqByM.js" as="script"><link rel="prefetch" href="/assets/index.html-aCIw855t.js" as="script"><link rel="prefetch" href="/assets/index.html-BETIocnR.js" as="script"><link rel="prefetch" href="/assets/index.html-DRxJieaJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BEpelw_C.js" as="script"><link rel="prefetch" href="/assets/index.html-BnQcMVOf.js" as="script"><link rel="prefetch" href="/assets/giscus--_FS5kYt.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script"><link rel="prefetch" href="/assets/style-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/docsearch-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/index-zMbLkDvU.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/docs/"><img class="vp-nav-logo" src="https://theme-hope-assets.vuejs.press/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">Docs Demo</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link vp-link" href="/docs/" aria-label="æ–‡æ¡£"><!---->æ–‡æ¡£<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿæ’®åˆè§„åˆ™</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">äº§å“ç®€ä»‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å…¬ç½‘æµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿæ’®åˆé”™è¯¯ä»£ç è¡¨</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ ¸å¿ƒåŠŸèƒ½</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç®—æ³•æµæ§åŠæ¯å•å‚æ•°ç¤ºä¾‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC èµ„é‡‘åˆ’æ‹¨æ¥å£çš„ç¤ºä¾‹ä»£ç </span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">API DOC XTP APIæ¥å£è¯´æ˜ä¸ç¤ºä¾‹ä»£ç  XAlgo</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E7%B1%BB%E5%BA%93%E6%96%87%E4%BB%B6.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E7%B1%BB%E5%BA%93%E6%96%87%E4%BB%B6.html"><!---->/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E7%B1%BB%E5%BA%93%E6%96%87%E4%BB%B6.html<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E5%A4%B4%E6%96%87%E4%BB%B6.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E5%A4%B4%E6%96%87%E4%BB%B6.html"><!---->/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E5%A4%B4%E6%96%87%E4%BB%B6.html<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E6%94%AF%E6%8C%81%E5%B9%B3%E5%8F%B0.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E6%94%AF%E6%8C%81%E5%B9%B3%E5%8F%B0.html"><!---->/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E6%94%AF%E6%8C%81%E5%B9%B3%E5%8F%B0.html<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteApi.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteApi.html"><!---->/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteApi.html<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteSpi.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteSpi.html"><!---->/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteSpi.html<!----></a></li><li><a class="route-link active vp-link vp-sidebar-link vp-sidebar-page active" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderApi.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderApi.html"><!---->/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderApi.html<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderSpi.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderSpi.html"><!---->/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderSpi.html<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E4%BB%8B%E7%BB%8D.html" aria-label="ç‰ˆæœ¬æ›´æ–°ä»‹ç»"><!---->ç‰ˆæœ¬æ›´æ–°ä»‹ç»<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPæŠ¥å•æ¥å£ç¤ºä¾‹ä»£ç æ–‡æ¡£</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPå…³äº L2è¡Œæƒ…æ•°æ®å›è¡¥åŠŸèƒ½çš„ä½¿ç”¨è¯´æ˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPäº¤æ˜“ Trader APIä½¿ç”¨æŒ‡å— Quick Start</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPäº¤æ˜“åˆ†é¡µæŸ¥è¯¢ç¤ºä¾‹ä»£ç </span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPé…è‚¡é€»è¾‘ç¤ºä¾‹ä»£ç </span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPæ–°è‚¡ç”³è´­é€»è¾‘ç¤ºä¾‹ä»£ç </span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPæ–°å€ºç”³è´­é€»è¾‘ç¤ºä¾‹ä»£ç </span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPè¡Œæƒ… Quote APIæ–­çº¿ååº”å¯¹æªæ–½</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API DOC XTPè¡Œæƒ… Quote APIä½¿ç”¨æŒ‡å— Quick Start</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">APIå¸¸è§é—®é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTP Quote APIä½¿ç”¨ UDPå¸¸è§é—®é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPæ’¤å•å»ºè®®</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPé”™è¯¯ä»£ç é€ŸæŸ¥è¡¨</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Xtpè®¢å•çš„çŠ¶æ€æœºå›¾</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPäº¤æ˜“ä¸šåŠ¡æŠ¥å•æ¥å£å‚æ•°è¯´æ˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPé‡‘èé£æ§æŒ‡æ ‡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPæ¨¡æ‹Ÿæµ‹è¯•ç¯å¢ƒå¸¸è§é—®é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPä¸Šäº¤æ‰€æ–°å€ºåˆ¸ Level2 è¡Œæƒ…è¯´æ˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPè¡Œæƒ…æœåŠ¡æ¥å…¥å‰æŒ‡å¼•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPæ”¯æŒä¸Šæµ· Level2é€ç¬”åˆå¹¶è¯´æ˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPæ”¯æŒä¸Šæµ· Level2é€ç¬”å§”æ‰˜è¯´æ˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">XTPé€ç¬”æ•°æ®ç»“æ„ä½“å­—æ®µè¯´æ˜</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!----></h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://xtp.zts.com.cn" target="_blank" rel="noopener noreferrer">xtp_master</a></span><span property="author" content="xtp_master"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-03T15:52:56.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 136 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT136M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#traderapi">TraderApi</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-æ¥å£">1. æ¥å£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-ç¤ºä¾‹ä»£ç ">2. ç¤ºä¾‹ä»£ç </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-createtraderapi">3. CreateTraderApi</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-release">4. Release</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-gettradingday">5. GetTradingDay</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-registerspi">6. RegisterSpi</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-getapilasterror">7. GetApiLastError</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-getapiversion">8. GetApiVersion</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-getclientidbyxtpid">9. GetClientIDByXTPID</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-getaccountbyxtpid">10. GetAccountByXTPID</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-subscribepublictopic">11. SubscribePublicTopic</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-setsoftwareversion">12. SetSoftwareVersion</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_13-setsoftwarekey">13. SetSoftwareKey</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_14-setheartbeatinterval">14. SetHeartBeatInterval</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_15-login">15. Login</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_16-logout">16. Logout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_17-isserverrestart">17. IsServerRestart</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_18-modifyuserterminalinfo">18. ModifyUserTerminalInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_19-queryaccounttrademarket">19. QueryAccountTradeMarket</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_20-getaneworderxtpid">20. GetANewOrderXTPID</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_21-insertorder">21. InsertOrder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_22-insertorderextra">22. InsertOrderExtra</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_23-cancelorder">23. CancelOrder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_24-queryorderbyxtpid">24. QueryOrderByXTPID</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_25-queryorders">25. QueryOrders</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_26-queryunfinishedorders">26. QueryUnfinishedOrders</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_27-queryordersbypage">27. QueryOrdersByPage</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_28-queryorderbyxtpidex">28. QueryOrderByXTPIDEx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_29-queryordersex">29. QueryOrdersEx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_30-queryunfinishedordersex">30. QueryUnfinishedOrdersEx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_31-queryordersbypageex">31. QueryOrdersByPageEx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_32-querytradesbyxtpid">32. QueryTradesByXTPID</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_33-querytrades">33. QueryTrades</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_34-querytradesbypage">34. QueryTradesByPage</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_35-queryposition">35. QueryPosition</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_36-queryasset">36. QueryAsset</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_37-querystructuredfund">37. QueryStructuredFund</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_38-fundtransfer">38. FundTransfer</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_39-queryfundtransfer">39. QueryFundTransfer</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_40-queryotherserverfund">40. QueryOtherServerFund</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_41-queryetf">41. QueryETF</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_42-queryetftickerbasket">42. QueryETFTickerBasket</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_43-queryipoinfolist">43. QueryIPOInfoList</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_44-queryipoquotainfo">44. QueryIPOQuotaInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_45-querybondipoinfolist">45. QueryBondIPOInfoList</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_46-queryoptionauctioninfo">46. QueryOptionAuctionInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_47-creditcashrepay">47. CreditCashRepay</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_48-creditcashrepaydebtinterestfee">48. CreditCashRepayDebtInterestFee</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_49-creditsellstockrepaydebtinterestfee">49. CreditSellStockRepayDebtInterestFee</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_50-querycreditcashrepayinfo">50. QueryCreditCashRepayInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_51-querycreditfundinfo">51. QueryCreditFundInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_52-querycreditdebtinfo">52. QueryCreditDebtInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_53-querycredittickerdebtinfo">53. QueryCreditTickerDebtInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_54-querycreditassetdebtinfo">54. QueryCreditAssetDebtInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_55-querycredittickerassigninfo">55. QueryCreditTickerAssignInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_56-querycreditexcessstock">56. QueryCreditExcessStock</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_57-querymulcreditexcessstock">57. QueryMulCreditExcessStock</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_58-creditextenddebtdate">58. CreditExtendDebtDate</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_59-querycreditextenddebtdateorders">59. QueryCreditExtendDebtDateOrders</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_60-querycreditfundextrainfo">60. QueryCreditFundExtraInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_61-querycreditpositionextrainfo">61. QueryCreditPositionExtraInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_62-insertoptioncombinedorder">62. InsertOptionCombinedOrder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_63-insertoptioncombinedorderextra">63. InsertOptionCombinedOrderExtra</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_64-canceloptioncombinedorder">64. CancelOptionCombinedOrder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_65-queryoptioncombinedunfinishedorders">65. QueryOptionCombinedUnfinishedOrders</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_66-queryoptioncombinedorderbyxtpid">66. QueryOptionCombinedOrderByXTPID</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_67-queryoptioncombinedorders">67. QueryOptionCombinedOrders</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_68-queryoptioncombinedordersbypage">68. QueryOptionCombinedOrdersByPage</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_69-queryoptioncombinedunfinishedordersex">69. QueryOptionCombinedUnfinishedOrdersEx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_70-queryoptioncombinedorderbyxtpidex">70. QueryOptionCombinedOrderByXTPIDEx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_71-queryoptioncombinedordersex">71. QueryOptionCombinedOrdersEx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_72-queryoptioncombinedordersbypageex">72. QueryOptionCombinedOrdersByPageEx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_73-queryoptioncombinedtradesbyxtpid">73. QueryOptionCombinedTradesByXTPID</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_74-queryoptioncombinedtrades">74. QueryOptionCombinedTrades</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_75-queryoptioncombinedtradesbypage">75. QueryOptionCombinedTradesByPage</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_76-queryoptioncombinedposition">76. QueryOptionCombinedPosition</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_77-queryoptioncombinedstrategyinfo">77. QueryOptionCombinedStrategyInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_78-queryoptioncombinedexecposition">78. QueryOptionCombinedExecPosition</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_79-loginalgo">79. LoginALGO</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_80-querystrategy">80. QueryStrategy</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_81-algouserestablishchannel">81. ALGOUserEstablishChannel</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_82-insertalgoorder">82. InsertAlgoOrder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_83-cancelalgoorder">83. CancelAlgoOrder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_84-getalgorithmidbyorder">84. GetAlgorithmIDByOrder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_85-strategyrecommendation">85. StrategyRecommendation</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_86-querybondswapstockinfo">86. QueryBondSwapStockInfo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_87-modifyalgoorder">87. ModifyAlgoOrder</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h2 id="traderapi" tabindex="-1"><a class="header-anchor" href="#traderapi"><span>TraderApi</span></a></h2><p>ç›®å½•</p><!-- TOC --><ul><li><a href="#1-%E6%8E%A5%E5%8F%A3">1. æ¥å£</a></li><li><a href="#2-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81">2. ç¤ºä¾‹ä»£ç </a></li><li><a href="#3-createtraderapi">3. CreateTraderApi</a></li><li><a href="#4-release">4. Release</a></li><li><a href="#5-gettradingday">5. GetTradingDay</a></li><li><a href="#6-registerspi">6. RegisterSpi</a></li><li><a href="#7-getapilasterror">7. GetApiLastError</a></li><li><a href="#8-getapiversion">8. GetApiVersion</a></li><li><a href="#9-getclientidbyxtpid">9. GetClientIDByXTPID</a></li><li><a href="#10-getaccountbyxtpid">10. GetAccountByXTPID</a></li><li><a href="#11-subscribepublictopic">11. SubscribePublicTopic</a></li><li><a href="#12-setsoftwareversion">12. SetSoftwareVersion</a></li><li><a href="#13-setsoftwarekey">13. SetSoftwareKey</a></li><li><a href="#14-setheartbeatinterval">14. SetHeartBeatInterval</a></li><li><a href="#15-login">15. Login</a></li><li><a href="#16-logout">16. Logout</a></li><li><a href="#17-isserverrestart">17. IsServerRestart</a></li><li><a href="#18-modifyuserterminalinfo">18. ModifyUserTerminalInfo</a></li><li><a href="#19-queryaccounttrademarket">19. QueryAccountTradeMarket</a></li><li><a href="#20-getaneworderxtpid">20. GetANewOrderXTPID</a></li><li><a href="#21-insertorder">21. InsertOrder</a></li><li><a href="#22-insertorderextra">22. InsertOrderExtra</a></li><li><a href="#23-cancelorder">23. CancelOrder</a></li><li><a href="#24-queryorderbyxtpid">24. QueryOrderByXTPID</a></li><li><a href="#25-queryorders">25. QueryOrders</a></li><li><a href="#26-queryunfinishedorders">26. QueryUnfinishedOrders</a></li><li><a href="#27-queryordersbypage">27. QueryOrdersByPage</a></li><li><a href="#28-queryorderbyxtpidex">28. QueryOrderByXTPIDEx</a></li><li><a href="#29-queryordersex">29. QueryOrdersEx</a></li><li><a href="#30-queryunfinishedordersex">30. QueryUnfinishedOrdersEx</a></li><li><a href="#31-queryordersbypageex">31. QueryOrdersByPageEx</a></li><li><a href="#32-querytradesbyxtpid">32. QueryTradesByXTPID</a></li><li><a href="#33-querytrades">33. QueryTrades</a></li><li><a href="#34-querytradesbypage">34. QueryTradesByPage</a></li><li><a href="#35-queryposition">35. QueryPosition</a></li><li><a href="#36-queryasset">36. QueryAsset</a></li><li><a href="#37-querystructuredfund">37. QueryStructuredFund</a></li><li><a href="#38-fundtransfer">38. FundTransfer</a></li><li><a href="#39-queryfundtransfer">39. QueryFundTransfer</a></li><li><a href="#40-queryotherserverfund">40. QueryOtherServerFund</a></li><li><a href="#41-queryetf">41. QueryETF</a></li><li><a href="#42-queryetftickerbasket">42. QueryETFTickerBasket</a></li><li><a href="#43-queryipoinfolist">43. QueryIPOInfoList</a></li><li><a href="#44-queryipoquotainfo">44. QueryIPOQuotaInfo</a></li><li><a href="#45-querybondipoinfo">45. QueryBondIPOInfoList</a></li><li><a href="#46-queryoptionauctioninfo">46. QueryOptionAuctionInfo</a></li><li><a href="#47-creditcashrepay">47. CreditCashRepay</a></li><li><a href="#48-creditcashrepaydebtinterestfee">48. CreditCashRepayDebtInterestFee</a></li><li><a href="#49-creditsellstockrepaydebtinterestfee">49. CreditSellStockRepayDebtInterestFee</a></li><li><a href="#50-querycreditcashrepayinfo">50. QueryCreditCashRepayInfo</a></li><li><a href="#51-querycreditfundinfo">51. QueryCreditFundInfo</a></li><li><a href="#52-querycreditdebtinfo">52. QueryCreditDebtInfo</a></li><li><a href="#53-querycredittickerdebtinfo">53. QueryCreditTickerDebtInfo</a></li><li><a href="#54-querycreditassetdebtinfo">54. QueryCreditAssetDebtInfo</a></li><li><a href="#55-querycredittickerassigninfo">55. QueryCreditTickerAssignInfo</a></li><li><a href="#56-querycreditexcessstock">56. QueryCreditExcessStock</a></li><li><a href="#57-querymulcreditexcessstock">57. QueryMulCreditExcessStock</a></li><li><a href="#58-creditextenddebtdate">58. CreditExtendDebtDate</a></li><li><a href="#59-querycreditextenddebtdateorders">59. QueryCreditExtendDebtDateOrders</a></li><li><a href="#60-querycreditfundextrainfo">60. QueryCreditFundExtraInfo</a></li><li><a href="#61-querycreditpositionextrainfo">61. QueryCreditPositionExtraInfo</a></li><li><a href="#62-insertoptioncombinedorder">62. InsertOptionCombinedOrder</a></li><li><a href="#63-insertoptioncombinedorderextra">63. InsertOptionCombinedOrderExtra</a></li><li><a href="#64-canceloptioncombinedorder">64. CancelOptionCombinedOrder</a></li><li><a href="#65-queryoptioncombinedunfinishedorders">65. QueryOptionCombinedUnfinishedOrders</a></li><li><a href="#66-queryoptioncombinedorderbyxtpid">66. QueryOptionCombinedOrderByXTPID</a></li><li><a href="#67-queryoptioncombinedorders">67. QueryOptionCombinedOrders</a></li><li><a href="#68-queryoptioncombinedordersbypage">68. QueryOptionCombinedOrdersByPage</a></li><li><a href="#69-queryoptioncombinedunfinishedordersex">69. QueryOptionCombinedUnfinishedOrdersEx</a></li><li><a href="#70-queryoptioncombinedorderbyxtpidex">70. QueryOptionCombinedOrderByXTPIDEx</a></li><li><a href="#71-queryoptioncombinedordersex">71. QueryOptionCombinedOrdersEx</a></li><li><a href="#72-queryoptioncombinedordersbypageex">72. QueryOptionCombinedOrdersByPageEx</a></li><li><a href="#73-queryoptioncombinedtradesbyxtpid">73. QueryOptionCombinedTradesByXTPID</a></li><li><a href="#74-queryoptioncombinedtrades">74. QueryOptionCombinedTrades</a></li><li><a href="#75-queryoptioncombinedtradesbypage">75. QueryOptionCombinedTradesByPage</a></li><li><a href="#76-queryoptioncombinedposition">76. QueryOptionCombinedPosition</a></li><li><a href="#77-queryoptioncombinedstrategyinfo">77. QueryOptionCombinedStrategyInfo</a></li><li><a href="#78-queryoptioncombinedexecposition">78. QueryOptionCombinedExecPosition</a></li><li><a href="#79-loginalgo">79. LoginALGO</a></li><li><a href="#80-querystrategy">80. QueryStrategy</a></li><li><a href="#81-algouserestablishchannel">81. ALGOUserEstablishChannel</a></li><li><a href="#82-insertalgoorder">82. InsertAlgoOrder</a></li><li><a href="#83-cancelalgoorder">83. CancelAlgoOrder</a></li><li><a href="#84-getalgorithmidbyorder">84. GetAlgorithmIDByOrder</a></li><li><a href="#85-strategyrecommendation">85. StrategyRecommendation</a></li><li><a href="#86-querybondswapstockinfo">86. QueryBondSwapStockInfo</a></li><li><a href="#87-modifyalgoorder">87. ModifyAlgoOrder</a></li></ul><!-- /TOC --><p><br><br></p><p>TraderApiç±»æä¾›äº†äº¤æ˜“apiçš„åˆå§‹åŒ–ã€ç™»å½•ã€æŠ¥å•ç­‰åŠŸèƒ½ã€‚</p><h3 id="_1-æ¥å£" tabindex="-1"><a class="header-anchor" href="#_1-æ¥å£"><span>1. æ¥å£</span></a></h3><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">namespace</span> XTP <span class="token punctuation">{</span>
	<span class="token keyword">namespace</span> API <span class="token punctuation">{</span>
		<span class="token keyword">class</span> <span class="token class-name">TRADER_API_EXPORT</span> TraderApi
		<span class="token punctuation">{</span>
		<span class="token keyword">public</span><span class="token operator">:</span>
			<span class="token comment">///åˆ›å»ºTraderApi</span>
			<span class="token comment">///@param client_id ï¼ˆå¿…é¡»è¾“å…¥ï¼‰å®¢æˆ·ç«¯idï¼Œç”¨äºåŒºåˆ†åŒä¸€ç”¨æˆ·çš„ä¸åŒå®¢æˆ·ç«¯ï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰ï¼Œæ™®é€šç”¨æˆ·å¿…é¡»ä½¿ç”¨1-99ä¹‹é—´çš„æ•°å€¼ï¼Œå¦åˆ™å¯èƒ½æ— æ³•ç™»å½•</span>
			<span class="token comment">///@param save_file_path ï¼ˆå¿…é¡»è¾“å…¥ï¼‰å­˜è´®è®¢é˜…ä¿¡æ¯æ–‡ä»¶çš„ç›®å½•ï¼Œè¯·è®¾å®šä¸€ä¸ªçœŸå®å­˜åœ¨çš„æœ‰å¯å†™æƒé™çš„è·¯å¾„</span>
			<span class="token comment">///@param log_level æ—¥å¿—è¾“å‡ºçº§åˆ«</span>
			<span class="token comment">///@return åˆ›å»ºå‡ºçš„UserApi</span>
			<span class="token comment">///@remark åªèƒ½åˆ›å»ºä¸€æ¬¡ï¼Œå¦‚æœä¸€ä¸ªè´¦æˆ·éœ€è¦åœ¨å¤šä¸ªå®¢æˆ·ç«¯ç™»å½•ï¼Œè¯·ä½¿ç”¨ä¸åŒçš„client_idï¼Œç³»ç»Ÿå…è®¸ä¸€ä¸ªè´¦æˆ·åŒæ—¶ç™»å½•å¤šä¸ªå®¢æˆ·ç«¯ï¼Œä½†æ˜¯å¯¹äºåŒä¸€è´¦æˆ·ï¼Œç›¸åŒçš„client_idåªèƒ½ä¿æŒä¸€ä¸ªsessionè¿æ¥ï¼Œåé¢çš„ç™»å½•åœ¨å‰ä¸€ä¸ªsessionå­˜ç»­æœŸé—´ï¼Œæ— æ³•è¿æ¥ã€‚ç³»ç»Ÿä¸æ”¯æŒè¿‡å¤œï¼Œè¯·ç¡®ä¿æ¯å¤©å¼€ç›˜å‰é‡æ–°å¯åŠ¨</span>
			<span class="token keyword">static</span> TraderApi <span class="token operator">*</span><span class="token function">CreateTraderApi</span><span class="token punctuation">(</span><span class="token keyword">uint8_t</span> client_id<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>save_file_path<span class="token punctuation">,</span> XTP_LOG_LEVEL log_level <span class="token operator">=</span> XTP_LOG_LEVEL_DEBUG<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">///åˆ é™¤æ¥å£å¯¹è±¡æœ¬èº«</span>
			<span class="token comment">///@remark ä¸å†ä½¿ç”¨æœ¬æ¥å£å¯¹è±¡æ—¶,è°ƒç”¨è¯¥å‡½æ•°åˆ é™¤æ¥å£å¯¹è±¡</span>
			<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Release</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è·å–å½“å‰äº¤æ˜“æ—¥</span>
			<span class="token comment">///@return è·å–åˆ°çš„äº¤æ˜“æ—¥</span>
			<span class="token comment">///@remark åªæœ‰ç™»å½•æˆåŠŸå,æ‰èƒ½å¾—åˆ°æ­£ç¡®çš„äº¤æ˜“æ—¥</span>
			<span class="token keyword">virtual</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">GetTradingDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æ³¨å†Œå›è°ƒæ¥å£</span>
			<span class="token comment">///@param spi æ´¾ç”Ÿè‡ªå›è°ƒæ¥å£ç±»çš„å®ä¾‹ï¼Œè¯·åœ¨ç™»å½•ä¹‹å‰è®¾å®š</span>
			<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">RegisterSpi</span><span class="token punctuation">(</span>TraderSpi <span class="token operator">*</span>spi<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è·å–APIçš„ç³»ç»Ÿé”™è¯¯</span>
			<span class="token comment">///@return è¿”å›çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥åœ¨Loginã€InsertOrderã€CancelOrderè¿”å›å€¼ä¸º0æ—¶è°ƒç”¨ï¼Œè·å–å¤±è´¥çš„åŸå› </span>
			<span class="token comment">///@remark å¯ä»¥åœ¨è°ƒç”¨apiæ¥å£å¤±è´¥æ—¶è°ƒç”¨ï¼Œä¾‹å¦‚loginå¤±è´¥æ—¶</span>
			<span class="token keyword">virtual</span> XTPRI <span class="token operator">*</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è·å–APIçš„å‘è¡Œç‰ˆæœ¬å·</span>
			<span class="token comment">///@return è¿”å›apiå‘è¡Œç‰ˆæœ¬å·</span>
			<span class="token keyword">virtual</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">GetApiVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///é€šè¿‡æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDè·å–ä¸‹å•çš„å®¢æˆ·ç«¯id</span>
			<span class="token comment">///@return è¿”å›å®¢æˆ·ç«¯idï¼Œå¯ä»¥ç”¨æ­¤æ–¹æ³•è¿‡æ»¤è‡ªå·±ä¸‹çš„è®¢å•</span>
			<span class="token comment">///@param order_xtp_id æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„ID</span>
			<span class="token comment">///@remark ç”±äºç³»ç»Ÿå…è®¸åŒä¸€ç”¨æˆ·åœ¨ä¸åŒå®¢æˆ·ç«¯ä¸Šç™»å½•æ“ä½œï¼Œæ¯ä¸ªå®¢æˆ·ç«¯é€šè¿‡ä¸åŒçš„client_idè¿›è¡ŒåŒºåˆ†</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint8_t</span> <span class="token function">GetClientIDByXTPID</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///é€šè¿‡æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDè·å–ç›¸å…³èµ„é‡‘è´¦æˆ·å</span>
			<span class="token comment">///@return è¿”å›èµ„é‡‘è´¦æˆ·å</span>
			<span class="token comment">///@param order_xtp_id æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„ID</span>
			<span class="token comment">///@remark åªæœ‰èµ„é‡‘è´¦æˆ·ç™»å½•æˆåŠŸå,æ‰èƒ½å¾—åˆ°æ­£ç¡®çš„ä¿¡æ¯</span>
			<span class="token keyword">virtual</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">GetAccountByXTPID</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è®¢é˜…å…¬å…±æµã€‚</span>
			<span class="token comment">///@param resume_type å…¬å…±æµï¼ˆè®¢å•å“åº”ã€æˆäº¤å›æŠ¥ï¼‰é‡ä¼ æ–¹å¼  </span>
			<span class="token comment">///        XTP_TERT_RESTART:ä»æœ¬äº¤æ˜“æ—¥å¼€å§‹é‡ä¼ </span>
			<span class="token comment">///        XTP_TERT_RESUME:(ä¿ç•™å­—æ®µï¼Œæ­¤æ–¹å¼æš‚æœªæ”¯æŒ)ä»ä¸Šæ¬¡æ”¶åˆ°çš„ç»­ä¼ </span>
			<span class="token comment">///        XTP_TERT_QUICK:åªä¼ é€ç™»å½•åå…¬å…±æµçš„å†…å®¹</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•è¦åœ¨Loginæ–¹æ³•å‰è°ƒç”¨ã€‚è‹¥ä¸è°ƒç”¨åˆ™ä¸ä¼šæ”¶åˆ°å…¬å…±æµçš„æ•°æ®ã€‚æ³¨æ„åœ¨ç”¨æˆ·æ–­çº¿åï¼Œå¦‚æœä¸ç™»å‡ºå°±login()ï¼Œå…¬å…±æµè®¢é˜…æ–¹å¼ä¸ä¼šèµ·ä½œç”¨ã€‚ç”¨æˆ·åªä¼šæ”¶åˆ°æ–­çº¿åçš„æ‰€æœ‰æ¶ˆæ¯ã€‚å¦‚æœå…ˆlogout()å†login()ï¼Œé‚£ä¹ˆå…¬å…±æµè®¢é˜…æ–¹å¼ä¼šèµ·ä½œç”¨ï¼Œç”¨æˆ·æ”¶åˆ°çš„æ•°æ®ä¼šæ ¹æ®ç”¨æˆ·çš„é€‰æ‹©æ–¹å¼è€Œå®šã€‚</span>
			<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SubscribePublicTopic</span><span class="token punctuation">(</span>XTP_TE_RESUME_TYPE resume_type<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è®¾ç½®è½¯ä»¶å¼€å‘ç‰ˆæœ¬å·</span>
			<span class="token comment">///@param version ç”¨æˆ·å¼€å‘è½¯ä»¶ç‰ˆæœ¬å·ï¼Œéapiå‘è¡Œç‰ˆæœ¬å·ï¼Œé•¿åº¦ä¸è¶…è¿‡15ä½ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹å‰è°ƒç”¨ï¼Œæ ‡è¯†çš„æ˜¯å®¢æˆ·ç«¯ç‰ˆæœ¬å·ï¼Œè€Œä¸æ˜¯APIçš„ç‰ˆæœ¬å·ï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetSoftwareVersion</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> version<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è®¾ç½®è½¯ä»¶å¼€å‘Key</span>
			<span class="token comment">///@param key ç”¨æˆ·å¼€å‘è½¯ä»¶Keyï¼Œç”¨æˆ·ç”³è¯·å¼€æˆ·æ—¶ç»™äºˆï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹å‰è°ƒç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetSoftwareKey</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> key<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è®¾ç½®å¿ƒè·³æ£€æµ‹æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’</span>
			<span class="token comment">///@param interval å¿ƒè·³æ£€æµ‹æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹å‰è°ƒç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetHeartBeatInterval</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span> interval<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///ç”¨æˆ·ç™»å½•è¯·æ±‚</span>
			<span class="token comment">///@return session_idè¡¨æ˜æ­¤èµ„é‡‘è´¦å·ç™»å½•æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºç™»å½•å¤±è´¥ï¼Œå¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºç™»å½•æˆåŠŸï¼Œæ­¤æ—¶éœ€è¦è®°å½•ä¸‹è¿™ä¸ªè¿”å›å€¼session_idï¼Œä¸ç™»å½•çš„èµ„é‡‘è´¦æˆ·å¯¹åº”</span>
			<span class="token comment">///@param ip æœåŠ¡å™¨åœ°å€ï¼Œç±»ä¼¼â€œ127.0.0.1â€</span>
			<span class="token comment">///@param port æœåŠ¡å™¨ç«¯å£å·</span>
			<span class="token comment">///@param user ç™»å½•ç”¨æˆ·å</span>
			<span class="token comment">///@param password ç™»å½•å¯†ç </span>
			<span class="token comment">///@param sock_type â€œ1â€ä»£è¡¨TCPï¼Œâ€œ2â€ä»£è¡¨UDPï¼Œç›®å‰æš‚æ—¶åªæ”¯æŒTCP</span>
			<span class="token comment">///@param local_ip æœ¬åœ°ç½‘å¡åœ°å€ï¼Œç±»ä¼¼â€œ127.0.0.1â€</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°ä¸ºåŒæ­¥é˜»å¡å¼ï¼Œä¸éœ€è¦å¼‚æ­¥ç­‰å¾…ç™»å½•æˆåŠŸï¼Œå½“å‡½æ•°è¿”å›å³å¯è¿›è¡Œåç»­æ“ä½œï¼Œæ­¤apiå¯æ”¯æŒå¤šä¸ªè´¦æˆ·è¿æ¥ï¼Œä½†æ˜¯åŒä¸€ä¸ªè´¦æˆ·åŒä¸€ä¸ªclient_idåªèƒ½æœ‰ä¸€ä¸ªsessionè¿æ¥ï¼Œåé¢çš„ç™»å½•åœ¨å‰ä¸€ä¸ªsessionå­˜ç»­æœŸé—´ï¼Œæ— æ³•è¿æ¥</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> ip<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> user<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> password<span class="token punctuation">,</span> XTP_PROTOCOL_TYPE sock_type<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> local_ip <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>


			<span class="token comment">///ç™»å‡ºè¯·æ±‚</span>
			<span class="token comment">///@return ç™»å‡ºæ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºç™»å‡ºæˆåŠŸï¼Œâ€œ-1â€è¡¨ç¤ºç™»å‡ºå¤±è´¥</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">Logout</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æœåŠ¡å™¨æ˜¯å¦é‡å¯è¿‡</span>
			<span class="token comment">///@return â€œtrueâ€è¡¨ç¤ºé‡å¯è¿‡ï¼Œâ€œfalseâ€è¡¨ç¤ºæ²¡æœ‰é‡å¯è¿‡</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹åè°ƒç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">bool</span> <span class="token function">IsServerRestart</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///ä¿®æ”¹å·²ç™»å½•ç”¨æˆ·çš„ç¡¬ä»¶ä¿¡æ¯ï¼Œä»…é™æˆæƒç³»ç»Ÿä½¿ç”¨</span>
			<span class="token comment">///@return å‘é€æ¶ˆæ¯æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param info éœ€è¦ä¿®æ”¹æˆçš„ç”¨æˆ·ç¡¬ä»¶ä¿¡æ¯</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹åè°ƒç”¨ï¼Œä¸”ä»…é™æˆæƒç³»ç»Ÿä½¿ç”¨ï¼Œä¸€èˆ¬å®¢æˆ·æ— éœ€ä½¿ç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">ModifyUserTerminalInfo</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPUserTerminalInfoReq<span class="token operator">*</span> info<span class="token punctuation">,</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æŸ¥è¯¢ç”¨æˆ·åœ¨æœ¬èŠ‚ç‚¹ä¸Šçš„å¯äº¤æ˜“å¸‚åœºç±»å‹</span>
			<span class="token comment">///@return å‘é€æ¶ˆæ¯æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹åè°ƒç”¨ï¼Œå¯¹åº”çš„å“åº”å‡½æ•°æ˜¯OnQueryAccountTradeMarket()</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryAccountTradeMarket</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///ä¸ºç”¨æˆ·è·å–ä¸€ä¸ªæ–°çš„è®¢å•XTPIDï¼Œç”¨äºæŠ¥å•</span>
			<span class="token comment">///@return ç”Ÿæˆçš„è®¢å•XTPIDï¼Œéâ€œ0â€è¡¨ç¤ºè·å–æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºè·å–å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹åè°ƒç”¨ï¼Œé€šè¿‡è¿™ä¸ªå‡½æ•°è·å–çš„order_xtp_idä»…ç”¨äºå¯¹åº”çš„ç”¨æˆ·æŠ¥å•ï¼Œå¦‚æœè®¾ç½®é”™è¯¯ï¼Œå°†ä¼šå¯¼è‡´ä¸‹å•å¤±è´¥</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">GetANewOrderXTPID</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æŠ¥å•å½•å…¥è¯·æ±‚</span>
			<span class="token comment">///@return æŠ¥å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæŠ¥å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæŠ¥å•å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„order_xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param order æŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä»€ä¹ˆéƒ½ä¸å¡«ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚order.order_xtp_idå­—æ®µæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark äº¤æ˜“æ‰€æ¥æ”¶è®¢å•åï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOrderEvent()ä¸­è¿”å›æŠ¥å•æœªæˆäº¤çš„çŠ¶æ€ï¼Œä¹‹åæ‰€æœ‰çš„è®¢å•çŠ¶æ€æ”¹å˜ï¼ˆé™¤äº†éƒ¨æˆçŠ¶æ€ï¼‰éƒ½ä¼šé€šè¿‡æŠ¥å•å“åº”å‡½æ•°è¿”å›</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">InsertOrder</span><span class="token punctuation">(</span>XTPOrderInsertInfo <span class="token operator">*</span>order<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			
			<span class="token comment">///å·²ç»æå‰è®¾ç½®order_xtp_idçš„æŠ¥å•å½•å…¥è¯·æ±‚ï¼Œä¸GetANewOrderXTPID()é…åˆä½¿ç”¨</span>
			<span class="token comment">///@return æŠ¥å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæŠ¥å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæŠ¥å•å‘é€æˆåŠŸï¼Œæ­¤æ—¶ç­‰åŒä¸ä¼ å…¥çš„order_xtp_id</span>
			<span class="token comment">///@param order æŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸å¡«ã€‚order.order_xtp_idå­—æ®µå¿…é¡»æ˜¯é€šè¿‡GetANewOrderXTPID()è·å¾—çš„å€¼ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark ä½¿ç”¨è®¾ç½®å¥½çš„order_xtp_idï¼ˆé€šè¿‡GetANewOrderXTPID()è·å¾—ï¼‰è¿›è¡ŒæŠ¥å•ï¼Œæ³¨æ„æ­¤å¤„å¦‚æœorder_xtp_idè®¾ç½®ä¸å¯¹ï¼Œå°†å¯¼è‡´æŠ¥å•å¤±è´¥ã€‚äº¤æ˜“æ‰€æ¥æ”¶è®¢å•åï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOrderEvent()ä¸­è¿”å›æŠ¥å•æœªæˆäº¤çš„çŠ¶æ€ï¼Œä¹‹åæ‰€æœ‰çš„è®¢å•çŠ¶æ€æ”¹å˜ï¼ˆé™¤äº†éƒ¨æˆçŠ¶æ€ï¼‰éƒ½ä¼šé€šè¿‡æŠ¥å•å“åº”å‡½æ•°è¿”å›</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">InsertOrderExtra</span><span class="token punctuation">(</span>XTPOrderInsertInfo <span class="token operator">*</span>order<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æŠ¥å•æ“ä½œè¯·æ±‚</span>
			<span class="token comment">///@return æ’¤å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ’¤å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæ’¤å•å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„order_cancel_xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param order_xtp_id éœ€è¦æ’¤é”€çš„å§”æ‰˜å•åœ¨XTPç³»ç»Ÿä¸­çš„ID</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark å¦‚æœæ’¤å•æˆåŠŸï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOrderEvent()é‡Œè¿”å›åŸå•éƒ¨æ’¤æˆ–è€…å…¨æ’¤çš„æ¶ˆæ¯ï¼Œå¦‚æœä¸æˆåŠŸï¼Œä¼šåœ¨OnCancelOrderError()å“åº”å‡½æ•°ä¸­è¿”å›é”™è¯¯åŸå› </span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CancelOrder</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param order_xtp_id éœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrderByXTPID</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„è®¢å•ç›¸å…³ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æŠ¥å•ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æŠ¥å•ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrders</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOrderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœªå®Œç»“æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryUnfinishedOrders</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆquery_param.referenceå¡«0</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrdersByPage</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOrderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param order_xtp_id éœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrderByXTPIDEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„è®¢å•ç›¸å…³ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æŠ¥å•ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æŠ¥å•ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrdersEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOrderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœªå®Œç»“æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryUnfinishedOrdersEx</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆquery_param.referenceå¡«0</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrdersByPageEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOrderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æ ¹æ®å§”æ‰˜ç¼–å·è¯·æ±‚æŸ¥è¯¢ç›¸å…³æˆäº¤</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param order_xtp_id éœ€è¦æŸ¥è¯¢çš„å§”æ‰˜ç¼–å·ï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryTradesByXTPID</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢å·²æˆäº¤</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„æˆäº¤å›æŠ¥ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æˆäº¤å›æŠ¥ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryTrades</span><span class="token punctuation">(</span>XTPQueryTraderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æˆäº¤å›æŠ¥</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦åˆ†é¡µæŸ¥è¯¢æˆäº¤å›æŠ¥çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆreferenceå¡«0</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryTradesByPage</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryTraderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æŠ•èµ„è€…æŒä»“</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param ticker éœ€è¦æŸ¥è¯¢æŒä»“çš„åˆçº¦ä»£ç ï¼Œå¯ä»¥ä¸ºNULLï¼Œè¡¨ç¤ºæŸ¥è¯¢å…¨å¸‚åœºï¼Œå¦‚æœä¸ä¸ºNULLï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œæ³¨æ„éœ€ä¸marketåŒ¹é…ï¼Œä¸åŒ¹é…çš„è¯ï¼Œå¯èƒ½ç”±äºè¯åˆ¸ä»£ç æ²ªæ·±2ä¸ªå¸‚åœºæœ‰é‡å¤ï¼Œè€Œå¯¼è‡´æŸ¥è¯¢ä¸åˆ°æ‰€éœ€çš„æŒä»“</span>
			<span class="token comment">///@param market éœ€è¦æŸ¥è¯¢æŒä»“çš„åˆçº¦æ‰€åœ¨å¸‚åœºï¼Œé»˜è®¤ä¸º0ï¼Œä»…åœ¨åˆçº¦ä»£ç ä¸ä¸ºNULLçš„æ—¶å€™ï¼Œæ‰ä¼šä½¿ç”¨ã€‚marketä¸æŒ‡å®šæˆ–è€…ä¸ºé0çš„å…¶ä»–éæœ‰æ•ˆå€¼æƒ…å†µä¸‹ï¼Œå¯èƒ½ç”±äºè¯åˆ¸ä»£ç æ²ªæ·±2ä¸ªå¸‚åœºæœ‰é‡å¤ï¼Œè€Œå¯¼è‡´æŸ¥è¯¢ä¸åˆ°æ‰€éœ€çš„æŒä»“ã€‚å¦‚æœæƒ³æ­£ç¡®æŸ¥è¯¢æŒ‡å®šæŒä»“ï¼Œè¯·æŒ‡å®šmarket</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•å¦‚æœç”¨æˆ·æä¾›äº†åˆçº¦ä»£ç ï¼Œåˆ™ä¼šæŸ¥è¯¢æ­¤åˆçº¦çš„æŒä»“ä¿¡æ¯ï¼ˆæ³¨æ„è¯·æŒ‡å®šmarketï¼Œå¦‚æœmarketä¸º0ï¼Œå¯èƒ½ä¼šæŸ¥è¯¢åˆ°2ä¸ªå¸‚åœºçš„æŒä»“ï¼Œå¦‚æœmarketä¸ºå…¶ä»–éæœ‰æ•ˆå€¼ï¼Œåˆ™æŸ¥è¯¢ç»“æœä¼šè¿”å›æ‰¾ä¸åˆ°æŒä»“ï¼‰ï¼Œå¦‚æœåˆçº¦ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰æŒä»“ä¿¡æ¯ã€‚</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryPosition</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>ticker<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> XTP_MARKET_TYPE market <span class="token operator">=</span> XTP_MKT_INIT<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢èµ„äº§</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryAsset</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢åˆ†çº§åŸºé‡‘</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„åˆ†çº§åŸºé‡‘ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­æ¯åŸºé‡‘ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„æ¯åŸºé‡‘ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­äº¤æ˜“å¸‚åœºä¸èƒ½ä¸ºç©º</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryStructuredFund</span><span class="token punctuation">(</span>XTPQueryStructuredFundInfoReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///èµ„é‡‘åˆ’æ‹¨è¯·æ±‚</span>
			<span class="token comment">///@return èµ„é‡‘åˆ’æ‹¨è®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„serial_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param fund_transfer èµ„é‡‘åˆ’æ‹¨çš„è¯·æ±‚ä¿¡æ¯</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°æ”¯æŒä¸€å·ä¸¤ä¸­å¿ƒèŠ‚ç‚¹ä¹‹é—´çš„èµ„é‡‘åˆ’æ‹¨ï¼Œæ³¨æ„èµ„é‡‘åˆ’æ‹¨çš„æ–¹å‘ã€‚</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">FundTransfer</span><span class="token punctuation">(</span>XTPFundTransferReq <span class="token operator">*</span>fund_transfer<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢èµ„é‡‘åˆ’æ‹¨</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„èµ„é‡‘åˆ’æ‹¨è®¢å•ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­serial_idå¯ä»¥ä¸º0ï¼Œåˆ™é»˜è®¤æ‰€æœ‰èµ„é‡‘åˆ’æ‹¨è®¢å•ï¼Œå¦‚æœä¸ä¸º0ï¼Œåˆ™è¯·æ±‚ç‰¹å®šçš„èµ„é‡‘åˆ’æ‹¨è®¢å•</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryFundTransfer</span><span class="token punctuation">(</span>XTPQueryFundTransferLogReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢å…¶ä»–èŠ‚ç‚¹å¯ç”¨èµ„é‡‘</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param æŸ¥è¯¢æ—¶éœ€è¦æä¾›çš„ä¿¡æ¯</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOtherServerFund</span><span class="token punctuation">(</span>XTPFundQueryReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢ETFæ¸…å•æ–‡ä»¶</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„ETFæ¸…å•æ–‡ä»¶çš„ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„ETFåˆçº¦ä»£ç ï¼Œmarketå­—æ®µä¹Ÿå¯ä»¥ä¸ºåˆå§‹å€¼ï¼Œåˆ™é»˜è®¤æ‰€æœ‰å¸‚åœºçš„ETFåˆçº¦</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryETF</span><span class="token punctuation">(</span>XTPQueryETFBaseReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢ETFè‚¡ç¥¨ç¯®</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢è‚¡ç¥¨ç¯®çš„çš„ETFåˆçº¦ï¼Œå…¶ä¸­åˆçº¦ä»£ç ä¸å¯ä»¥ä¸ºç©ºï¼Œmarketå­—æ®µä¹Ÿå¿…é¡»æŒ‡å®š</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryETFTickerBasket</span><span class="token punctuation">(</span>XTPQueryETFComponentReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢ä»Šæ—¥æ–°è‚¡ç”³è´­ä¿¡æ¯åˆ—è¡¨</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryIPOInfoList</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢ç”¨æˆ·æ–°è‚¡ç”³è´­é¢åº¦ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryIPOQuotaInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢å¯è½¬å€ºè½¬è‚¡çš„åŸºæœ¬ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢æ˜¯å¦å‘é€æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºå‘é€æˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‘é€å‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯çš„ç­›é€‰æ¡ä»¶ï¼Œå¯ä»¥ä¸ºNULLï¼ˆä¸ºNULLè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰çš„å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯ï¼‰ï¼Œæ­¤å‚æ•°ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¦‚æœä¸ºç©ºå­—ç¬¦ä¸²ï¼Œåˆ™æŸ¥è¯¢æ‰€æœ‰å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯ï¼Œå¦‚æœä¸ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œä¸”å¿…é¡»ä¸marketåŒ¹é…</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryBondSwapStockInfo</span><span class="token punctuation">(</span>XTPQueryBondSwapStockReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœŸæƒåˆçº¦</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„æœŸæƒåˆçº¦çš„ç­›é€‰æ¡ä»¶ï¼Œå¯ä»¥ä¸ºNULLï¼ˆä¸ºNULLè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰çš„æœŸæƒåˆçº¦ï¼‰</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionAuctionInfo</span><span class="token punctuation">(</span>XTPQueryOptionAuctionInfoReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///èèµ„èåˆ¸ä¸šåŠ¡ä¸­ç°é‡‘ç›´æ¥è¿˜æ¬¾è¯·æ±‚</span>
			<span class="token comment">///@return ç°é‡‘ç›´æ¥è¿˜æ¬¾è®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param amount ç°é‡‘è¿˜æ¬¾çš„é‡‘é¢</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CreditCashRepay</span><span class="token punctuation">(</span><span class="token keyword">double</span> amount<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///èèµ„èåˆ¸ä¸šåŠ¡ä¸­ç°é‡‘è¿˜æŒ‡å®šè´Ÿå€ºåˆçº¦æ¯è´¹è¯·æ±‚</span>
			<span class="token comment">///@return ç°é‡‘è¿˜æ¯è®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param debt_id æŒ‡å®šçš„è´Ÿå€ºåˆçº¦ç¼–å·</span>
			<span class="token comment">///@param amount ç°é‡‘è¿˜æ¯çš„é‡‘é¢</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CreditCashRepayDebtInterestFee</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> debt_id<span class="token punctuation">,</span> <span class="token keyword">double</span> amount<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///èèµ„èåˆ¸ä¸šåŠ¡ä¸­å–åˆ¸è¿˜æŒ‡å®šè´Ÿå€ºåˆçº¦æ¯è´¹è¯·æ±‚</span>
			<span class="token comment">///@return å–åˆ¸è¿˜æ¯è®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param order å–åˆ¸çš„æŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä»€ä¹ˆéƒ½ä¸å¡«ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚order.order_xtp_idå­—æ®µæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@param debt_id æŒ‡å®šçš„è´Ÿå€ºåˆçº¦ç¼–å·</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CreditSellStockRepayDebtInterestFee</span><span class="token punctuation">(</span>XTPOrderInsertInfo<span class="token operator">*</span> order<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> debt_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­çš„ç°é‡‘ç›´æ¥è¿˜æ¬¾æŠ¥å•</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditCashRepayInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·ç‰¹æœ‰ä¿¡æ¯ï¼Œé™¤èµ„é‡‘è´¦æˆ·ä»¥å¤–çš„ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditFundInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·è´Ÿå€ºåˆçº¦ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditDebtInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æŒ‡å®šè¯åˆ¸è´Ÿå€ºæœªè¿˜ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„æŒ‡å®šè¯åˆ¸ï¼Œç­›é€‰æ¡ä»¶ä¸­tickerå¯ä»¥å…¨å¡«0ï¼Œå¦‚æœä¸ä¸º0ï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditTickerDebtInfo</span><span class="token punctuation">(</span>XTPClientQueryCrdDebtStockReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·å¾…è¿˜èµ„é‡‘ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditAssetDebtInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·å¯èåˆ¸å¤´å¯¸ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„è¯åˆ¸ï¼Œç­›é€‰æ¡ä»¶ä¸­tickerå¯ä»¥å…¨å¡«0ï¼Œå¦‚æœä¸ä¸º0ï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditTickerAssignInfo</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStockReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///èèµ„èåˆ¸ä¸šåŠ¡ä¸­è¯·æ±‚æŸ¥è¯¢æŒ‡å®šè¯åˆ¸çš„ä½™åˆ¸</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„ä½™åˆ¸ä¿¡æ¯ï¼Œä¸å¯ä»¥ä¸ºç©ºï¼Œéœ€è¦æ˜ç¡®æŒ‡å®š</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•ä¸­ç”¨æˆ·å¿…é¡»æä¾›äº†è¯åˆ¸ä»£ç å’Œæ‰€åœ¨å¸‚åœº</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditExcessStock</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkReqInfo <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///èèµ„èåˆ¸ä¸šåŠ¡ä¸­è¯·æ±‚æŸ¥è¯¢ä½™åˆ¸</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„ä½™åˆ¸ä¿¡æ¯ã€‚è‹¥å¡«å…¥å¸‚åœºå’Œè‚¡ç¥¨ä»£ç ï¼Œè¿”å›å•æ”¯è‚¡ç¥¨ä¿¡æ¯ï¼›è‹¥å¸‚åœºä»£ç ä¸ºç©ºï¼Œè‚¡ç¥¨ä»£ç éç©ºï¼Œæ˜¯æ— æ•ˆæŸ¥è¯¢ï¼Œä¼šåœ¨SPIä¸­è¿”å›é”™è¯¯ï¼›è‹¥å¸‚åœºå’Œè‚¡ç¥¨ä»£ç å‡ä¸ºç©ºï¼Œè¿”å›å…¨å¸‚åœºä¿¡æ¯ï¼›è‹¥å¸‚åœºä»£ç éç©ºï¼Œè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œè¿”å›å•å¸‚åœºä¿¡æ¯ã€‚</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryMulCreditExcessStock</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkReqInfo <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   

			<span class="token comment">///èèµ„èåˆ¸ä¸šåŠ¡ä¸­è¯·æ±‚è´Ÿå€ºåˆçº¦å±•æœŸ</span>
			<span class="token comment">///@return è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param debt_extend è´Ÿå€ºåˆçº¦å±•æœŸçš„è¯·æ±‚ä¿¡æ¯</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CreditExtendDebtDate</span><span class="token punctuation">(</span>XTPCreditDebtExtendReq <span class="token operator">*</span>debt_extend<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///èèµ„èåˆ¸ä¸šåŠ¡ä¸­è¯·æ±‚æŸ¥è¯¢è´Ÿå€ºåˆçº¦å±•æœŸ</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param xtp_id éœ€è¦æŸ¥è¯¢çš„è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•ç­›é€‰æ¡ä»¶ï¼Œxtp_idå¯ä»¥ä¸º0ï¼Œåˆ™é»˜è®¤æ‰€æœ‰è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•ï¼Œå¦‚æœä¸ä¸º0ï¼Œåˆ™è¯·æ±‚ç‰¹å®šçš„è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditExtendDebtDateOrders</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­è´¦æˆ¶çš„é™„åŠ ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditFundExtraInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­è´¦æˆ¶æŒ‡å®šè¯åˆ¸çš„é™„åŠ ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŒ‡å®šçš„è¯åˆ¸ï¼Œç­›é€‰æ¡ä»¶ä¸­tickerå¯ä»¥å…¨å¡«0ï¼Œå¦‚æœä¸ä¸º0ï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditPositionExtraInfo</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStockReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æœŸæƒç»„åˆç­–ç•¥æŠ¥å•å½•å…¥è¯·æ±‚</span>
			<span class="token comment">///@return æŠ¥å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæŠ¥å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæŠ¥å•å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„order_xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param order æŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOptionCombinedOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä»€ä¹ˆéƒ½ä¸å¡«ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚order.order_xtp_idå­—æ®µæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark äº¤æ˜“æ‰€æ¥æ”¶è®¢å•åï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOptionCombinedOrderEvent()ä¸­è¿”å›æŠ¥å•æœªæˆäº¤çš„çŠ¶æ€ï¼Œä¹‹åæ‰€æœ‰çš„è®¢å•çŠ¶æ€æ”¹å˜ï¼ˆé™¤äº†éƒ¨æˆçŠ¶æ€ï¼‰éƒ½ä¼šé€šè¿‡æŠ¥å•å“åº”å‡½æ•°è¿”å›</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">InsertOptionCombinedOrder</span><span class="token punctuation">(</span>XTPOptCombOrderInsertInfo <span class="token operator">*</span>order<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///å·²ç»æå‰è®¾ç½®order_xtp_idçš„æœŸæƒç»„åˆç­–ç•¥æŠ¥å•å½•å…¥è¯·æ±‚ï¼Œä¸GetANewOrderXTPID()é…åˆä½¿ç”¨</span>
			<span class="token comment">///@return æŠ¥å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæŠ¥å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæŠ¥å•å‘é€æˆåŠŸï¼Œæ­¤æ—¶ç­‰åŒä¸ä¼ å…¥çš„order_xtp_id</span>
			<span class="token comment">///@param order æŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸å¡«ã€‚order.order_xtp_idå­—æ®µå¿…é¡»æ˜¯é€šè¿‡GetANewOrderXTPID()è·å¾—çš„å€¼ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark ä½¿ç”¨è®¾ç½®å¥½çš„order_xtp_idï¼ˆé€šè¿‡GetANewOrderXTPID()è·å¾—ï¼‰è¿›è¡ŒæŠ¥å•ï¼Œæ³¨æ„æ­¤å¤„å¦‚æœorder_xtp_idè®¾ç½®ä¸å¯¹ï¼Œå°†å¯¼è‡´æŠ¥å•å¤±è´¥ã€‚äº¤æ˜“æ‰€æ¥æ”¶è®¢å•åï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOptionCombinedOrderEvent()ä¸­è¿”å›æŠ¥å•æœªæˆäº¤çš„çŠ¶æ€ï¼Œä¹‹åæ‰€æœ‰çš„è®¢å•çŠ¶æ€æ”¹å˜ï¼ˆé™¤äº†éƒ¨æˆçŠ¶æ€ï¼‰éƒ½ä¼šé€šè¿‡æŠ¥å•å“åº”å‡½æ•°è¿”å›</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">InsertOptionCombinedOrderExtra</span><span class="token punctuation">(</span>XTPOptCombOrderInsertInfo <span class="token operator">*</span>order<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æœŸæƒç»„åˆç­–ç•¥æŠ¥å•æ’¤å•è¯·æ±‚</span>
			<span class="token comment">///@return æ’¤å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ’¤å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæ’¤å•å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„order_cancel_xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§</span>
			<span class="token comment">///@param order_xtp_id éœ€è¦æ’¤é”€çš„æœŸæƒç»„åˆç­–ç•¥å§”æ‰˜å•åœ¨XTPç³»ç»Ÿä¸­çš„ID</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark å¦‚æœæ’¤å•æˆåŠŸï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOptionCombinedOrderEvent()é‡Œè¿”å›åŸå•éƒ¨æ’¤æˆ–è€…å…¨æ’¤çš„æ¶ˆæ¯ï¼Œå¦‚æœä¸æˆåŠŸï¼Œä¼šåœ¨OnCancelOrderError()å“åº”å‡½æ•°ä¸­è¿”å›é”™è¯¯åŸå› </span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CancelOptionCombinedOrder</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æœªå®Œç»“æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedUnfinishedOrders</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param order_xtp_id éœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrderByXTPID</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„è®¢å•ç›¸å…³ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æŠ¥å•ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æŠ¥å•ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrders</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombOrderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆquery_param.referenceå¡«0</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrdersByPage</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombOrderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æœªå®Œç»“æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedUnfinishedOrdersEx</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param order_xtp_id éœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrderByXTPIDEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„è®¢å•ç›¸å…³ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æŠ¥å•ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æŠ¥å•ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrdersEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombOrderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆquery_param.referenceå¡«0</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrdersByPageEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombOrderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///æ ¹æ®æœŸæƒç»„åˆç­–ç•¥å§”æ‰˜ç¼–å·è¯·æ±‚æŸ¥è¯¢ç›¸å…³æˆäº¤</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param order_xtp_id éœ€è¦æŸ¥è¯¢çš„å§”æ‰˜ç¼–å·ï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedTradesByXTPID</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥çš„æˆäº¤å›æŠ¥</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„æˆäº¤å›æŠ¥ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æˆäº¤å›æŠ¥ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedTrades</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombTraderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æˆäº¤å›æŠ¥</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦åˆ†é¡µæŸ¥è¯¢æˆäº¤å›æŠ¥çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆreferenceå¡«0</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedTradesByPage</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombTraderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æŠ•èµ„è€…æœŸæƒç»„åˆç­–ç•¥æŒä»“</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢æŒä»“çš„ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­ç»„åˆç­–ç•¥ä»£ç å¯ä»¥åˆå§‹åŒ–ä¸ºç©ºï¼Œè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œæ³¨æ„éœ€ä¸marketåŒ¹é…ï¼Œä¸åŒ¹é…çš„è¯ï¼Œå¯èƒ½å¯¼è‡´æŸ¥è¯¢ä¸åˆ°æ‰€éœ€çš„æŒä»“</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•å¦‚æœç”¨æˆ·æä¾›äº†åˆçº¦ä»£ç ï¼Œåˆ™ä¼šæŸ¥è¯¢æ­¤åˆçº¦çš„æŒä»“ä¿¡æ¯ï¼ˆæ³¨æ„è¯·æŒ‡å®šmarketï¼Œå¦‚æœmarketä¸º0ï¼Œå¯èƒ½ä¼šæŸ¥è¯¢åˆ°2ä¸ªå¸‚åœºçš„æŒä»“ï¼Œå¦‚æœmarketä¸ºå…¶ä»–éæœ‰æ•ˆå€¼ï¼Œåˆ™æŸ¥è¯¢ç»“æœä¼šè¿”å›æ‰¾ä¸åˆ°æŒä»“ï¼‰ï¼Œå¦‚æœåˆçº¦ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰æŒä»“ä¿¡æ¯ã€‚</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedPosition</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombPositionReq<span class="token operator">*</span> query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥ä¿¡æ¯</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•ä»…æ”¯æŒç²¾ç¡®æŸ¥è¯¢ï¼Œä¸æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedStrategyInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è¯·æ±‚æŸ¥è¯¢æœŸæƒè¡Œæƒåˆå¹¶å¤´å¯¸</span>
			<span class="token comment">///@return æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param query_param éœ€è¦æŸ¥è¯¢çš„è¡Œæƒåˆå¹¶çš„ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­marketä¸º0ä¼šé»˜è®¤æŸ¥è¯¢å…¨å¸‚åœºï¼Œæˆåˆ†åˆçº¦ä»£ç å¯ä»¥åˆå§‹åŒ–ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œæ³¨æ„æ‰€æœ‰å¡«å†™çš„æ¡ä»¶éƒ½ä¼šè¿›è¡ŒåŒ¹é…</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark è¯¥æ–¹æ³•å¯èƒ½å¯¹åº”å¤šæ¡å“åº”æ¶ˆæ¯</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedExecPosition</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombExecPosReq<span class="token operator">*</span> query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			
			<span class="token comment">///ç”¨æˆ·ç™»å½•algoæœåŠ¡å™¨è¯·æ±‚</span>
			<span class="token comment">///@return è¡¨æ˜æ­¤èµ„é‡‘è´¦å·ç™»å½•æ˜¯å¦æˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºç™»å½•å¤±è´¥ï¼Œå¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œâ€œ0â€è¡¨ç¤ºç™»å½•æˆåŠŸ</span>
			<span class="token comment">///@param ip algoæœåŠ¡å™¨åœ°å€ï¼Œç±»ä¼¼â€œ127.0.0.1â€</span>
			<span class="token comment">///@param port algoæœåŠ¡å™¨ç«¯å£å·</span>
			<span class="token comment">///@param user ç™»å½•ç”¨æˆ·å</span>
			<span class="token comment">///@param password ç™»å½•å¯†ç </span>
			<span class="token comment">///@param sock_type â€œ1â€ä»£è¡¨TCPï¼Œâ€œ2â€ä»£è¡¨UDPï¼Œç›®å‰æš‚æ—¶åªæ”¯æŒTCP</span>
			<span class="token comment">///@param local_ip æœ¬åœ°ç½‘å¡åœ°å€ï¼Œç±»ä¼¼â€œ127.0.0.1â€</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°ä¸ºåŒæ­¥é˜»å¡å¼ï¼Œä¸éœ€è¦å¼‚æ­¥ç­‰å¾…ç™»å½•æˆåŠŸï¼Œå½“å‡½æ•°è¿”å›å³å¯è¿›è¡Œåç»­æ“ä½œï¼Œæ­¤apiåªéœ€è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰€æœ‰ç”¨æˆ·å…±ç”¨å³å¯</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">LoginALGO</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> ip<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> user<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> password<span class="token punctuation">,</span> XTP_PROTOCOL_TYPE sock_type<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> local_ip <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///algoä¸šåŠ¡ä¸­æŸ¥è¯¢ç”¨æˆ·ç­–ç•¥è¯·æ±‚</span>
			<span class="token comment">///@return è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param strategy_type éœ€è¦æŸ¥è¯¢çš„ç­–ç•¥ç±»å‹ï¼Œå¯å¡«0</span>
			<span class="token comment">///@param client_strategy_id éœ€è¦æŸ¥è¯¢çš„ç­–ç•¥ç”¨æˆ·è‡ªå®šä¹‰idï¼Œå¯å¡«0</span>
			<span class="token comment">///@param xtp_strategy_id éœ€è¦æŸ¥è¯¢çš„ç­–ç•¥åœ¨xtpç³»ç»Ÿä¸­çš„idï¼Œå¦‚æœæŒ‡å®šï¼Œå°±ä¸€å®šæŒ‰æŒ‡å®šæŸ¥è¯¢ï¼Œå¦‚æœå¡«0ï¼Œåˆ™æŒ‰å…¶ä»–ç­›é€‰æ¡ä»¶æŸ¥è¯¢</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark xtp_strategy_idæ¡ä»¶çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œåªæœ‰å½“xtp_strategy_idä¸º0æ—¶ï¼Œå…¶ä»–æ¡ä»¶æ‰ç”Ÿæ•ˆï¼Œæ­¤æ¡è¯·æ±‚å¯èƒ½å¯¹åº”å¤šæ¡å›åº”æ¶ˆæ¯</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryStrategy</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span> strategy_type<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> client_strategy_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> xtp_strategy_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int32_t</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///ç”¨æˆ·è¯·æ±‚ä½¿ç”¨algoæœåŠ¡å™¨å»ºç«‹ç®—æ³•é€šé“</span>
			<span class="token comment">///@return è¡¨æ˜æ­¤èµ„é‡‘è´¦å·å»ºç«‹ç®—æ³•é€šé“è¯·æ±‚æ¶ˆæ¯å‘é€æ˜¯å¦æˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‘é€å¤±è´¥ï¼Œå¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œâ€œ0â€è¡¨ç¤ºå‘é€æˆåŠŸ</span>
			<span class="token comment">///@param oms_ip omsæœåŠ¡å™¨åœ°å€ï¼Œç±»ä¼¼â€œ127.0.0.1â€ï¼ŒéalgoæœåŠ¡å™¨åœ°å€</span>
			<span class="token comment">///@param oms_port omsæœåŠ¡å™¨ç«¯å£å·ï¼ŒéalgoæœåŠ¡å™¨ç«¯å£å·</span>
			<span class="token comment">///@param user ç™»å½•ç”¨æˆ·å</span>
			<span class="token comment">///@param password ç™»å½•å¯†ç </span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark æ­¤å‡½æ•°ä¸ºå¼‚æ­¥æ–¹å¼ï¼Œä¸€ä¸ªç”¨æˆ·åªèƒ½æ‹¥æœ‰ä¸€ä¸ªç®—æ³•é€šé“ï¼Œå¦‚æœä¹‹å‰å·²ç»å»ºç«‹ï¼Œåˆ™æ— éœ€é‡å¤å»ºç«‹ï¼Œåœ¨ä½¿ç”¨ç®—æ³•å‰ï¼Œè¯·å…ˆå»ºç«‹ç®—æ³•é€šé“</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">ALGOUserEstablishChannel</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> oms_ip<span class="token punctuation">,</span> <span class="token keyword">int</span> oms_port<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> user<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> password<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///algoä¸šåŠ¡ä¸­ç”¨æˆ·æŠ¥ç®—æ³•å•è¯·æ±‚</span>
			<span class="token comment">///@return ç®—æ³•æŠ¥å•è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param strategy_type éœ€è¦åˆ›å»ºçš„ç­–ç•¥ç±»å‹</span>
			<span class="token comment">///@param client_strategy_id ç”¨æˆ·è‡ªå®šä¹‰idï¼Œå¸®åŠ©ç”¨æˆ·å®šä½</span>
			<span class="token comment">///@param strategy_param ç­–ç•¥å‚æ•°</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark ä»…èƒ½åœ¨ç”¨æˆ·å»ºç«‹ç®—æ³•é€šé“åä½¿ç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">InsertAlgoOrder</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span> strategy_type<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> client_strategy_id<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> strategy_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///algoä¸šåŠ¡ä¸­ç”¨æˆ·æ’¤é”€ç®—æ³•å•è¯·æ±‚</span>
			<span class="token comment">///@return è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param cancel_flag æ˜¯å¦éœ€è¦æ’¤é”€çš„ç®—æ³•å•å·²ä¸‹çš„è®¢å•ï¼Œtrue-æ’¤å•ï¼Œfalse-ä¸æ’¤å•</span>
			<span class="token comment">///@param xtp_strategy_id éœ€è¦æ’¤é”€çš„ç®—æ³•å•åœ¨xtp algobusç³»ç»Ÿä¸­çš„id</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark ä»…èƒ½åœ¨ç”¨æˆ·å»ºç«‹ç®—æ³•é€šé“åè°ƒç”¨</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">CancelAlgoOrder</span><span class="token punctuation">(</span><span class="token keyword">bool</span> cancel_flag<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> xtp_strategy_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///è·å–ç®—æ³•å•çš„æ¯å•ID</span>
			<span class="token comment">///@return è¿”å›ç®—æ³•å•çš„æ¯å•IDï¼Œå¦‚æœè¿”å›ä¸º0è¡¨ç¤ºä¸æ˜¯ç®—æ³•å•</span>
			<span class="token comment">///@param order_xtp_id ç®—æ³•å•å¯¹åº”çš„xtp id</span>
			<span class="token comment">///@param order_client_id ç®—æ³•å•å¯¹åº”çš„è‡ªå®šä¹‰IDï¼Œä¸å¯éšæ„å¡«å†™</span>
			<span class="token comment">///@remark è¿”å›ä¸º0è¡¨ç¤ºï¼Œä¸æ˜¯ç®—æ³•å•ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°ä¸å¯¹çš„è¯ï¼Œå¯èƒ½ä¼šå¾—ä¸åˆ°æ­£ç¡®ç»“æœï¼Œæ­¤å‡½æ•°è°ƒç”¨ä¸ä¾èµ–äºæ˜¯å¦ç™»å½•</span>
			<span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">GetAlgorithmIDByOrder</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint32_t</span> order_client_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///algoä¸šåŠ¡ä¸­è¯·æ±‚æ¨èç®—æ³•</span>
			<span class="token comment">///@return è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param basket_flag æ˜¯å¦å°†æ»¡è¶³æ¡ä»¶çš„æ¨èç»“æœæ‰“åŒ…æˆæ¯å•ç¯®çš„æ ‡å¿—ï¼Œtrue-æ‰“åŒ…</span>
			<span class="token comment">///@param basket_param éœ€è¦ç®—æ³•æ¨èçš„è¯åˆ¸åˆ—è¡¨ï¼Œä¸ºjsonå­—ä¸²ï¼Œå…·ä½“æ ¼å¼å‚è€ƒè¯´æ˜æ–‡æ¡£æˆ–å’¨è¯¢è¿è¥äººå‘˜</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@param request_id ç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
			<span class="token comment">///@remark æ­¤æ¡è¯·æ±‚å¯èƒ½å¯¹åº”å¤šæ¡å›åº”æ¶ˆæ¯</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">StrategyRecommendation</span><span class="token punctuation">(</span><span class="token keyword">bool</span> basket_flag<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> basket_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int32_t</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">///algoä¸šåŠ¡ä¸­ä¿®æ”¹å·²æœ‰çš„ç®—æ³•å•</span>
			<span class="token comment">///@return ç®—æ³•å•ä¿®æ”¹è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </span>
			<span class="token comment">///@param xtp_strategy_id xtpç®—æ³•å•ç­–ç•¥ID</span>
			<span class="token comment">///@param strategy_param ä¿®æ”¹åçš„ç­–ç•¥å‚æ•°</span>
			<span class="token comment">///@param session_id èµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</span>
			<span class="token comment">///@remark ä»…èƒ½åœ¨ç”¨æˆ·å»ºç«‹ç®—æ³•é€šé“åä½¿ç”¨ï¼Œæ­¤åŠŸèƒ½ä¸Šçº¿æ—¶é—´è§†æœåŠ¡å™¨åå°æ”¯æŒæƒ…å†µè€Œå®šï¼Œå…·ä½“ä»¥è¿è¥é€šçŸ¥æ—¶é—´ä¸ºå‡†</span>
			<span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">ModifyAlgoOrder</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> xtp_strategy_id<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> strategy_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      

		<span class="token keyword">protected</span><span class="token operator">:</span>
			<span class="token operator">~</span><span class="token function">TraderApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-ç¤ºä¾‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#_2-ç¤ºä¾‹ä»£ç "><span>2. ç¤ºä¾‹ä»£ç </span></a></h3><p>ä»¥ä¸‹æ˜¯MyTraderApi.hæ–‡ä»¶</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;xtp_trader_api.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;MyTraderSpi.h&quot;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> XTP<span class="token double-colon punctuation">::</span>API<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyTraderApi</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">explicit</span> <span class="token function">MyTraderApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token operator">~</span><span class="token function">MyTraderApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// åˆå§‹åŒ–</span>
	<span class="token keyword">bool</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	TraderApi <span class="token operator">*</span>user_trade_api<span class="token punctuation">;</span>
	MyTraderSpi <span class="token operator">*</span>m_trader_spi<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸‹æ˜¯MyTraderApi.cppæ–‡ä»¶</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;MyTraderApi.h&quot;</span></span>

<span class="token class-name">MyTraderApi</span><span class="token double-colon punctuation">::</span><span class="token function">MyTraderApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	user_trade_api_ <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    m_trader_spi <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">MyTraderApi</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">MyTraderApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token class-name">MyTraderApi</span><span class="token double-colon punctuation">::</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// åˆ›å»ºå¹¶åˆå§‹åŒ–äº¤æ˜“API</span>
	user_trade_api_ <span class="token operator">=</span> XTP<span class="token double-colon punctuation">::</span>API<span class="token double-colon punctuation">::</span><span class="token class-name">TraderApi</span><span class="token double-colon punctuation">::</span><span class="token function">CreateTraderApi</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> XTP_LOG_LEVEL_DEBUG<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trader_api_<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// æ³¨å†Œå›è°ƒæ¥å£</span>
		m_trader_spi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MyTraderSpi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user_trade_api_<span class="token operator">-&gt;</span><span class="token function">RegisterSpi</span><span class="token punctuation">(</span>m_trader_spi<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// ç™»å½•å‰å‚æ•°è®¾ç½®ï¼Œç”¨æˆ·è¯·è‡ªè¡Œä¿®æ”¹</span>
		user_trade_api_<span class="token operator">-&gt;</span><span class="token function">SetHeartBeatInterval</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user_trade_api_<span class="token operator">-&gt;</span><span class="token function">SetSoftwareKey</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user_trade_api_<span class="token operator">-&gt;</span><span class="token function">SetSoftwareVersion</span><span class="token punctuation">(</span><span class="token string">&quot;xx.xx.xx.xx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// è®¾ç½®å…¬æœ‰æµï¼ˆè®¢å•å“åº”ã€æˆäº¤å›æŠ¥ï¼‰é‡ä¼ æ–¹å¼</span>
		user_trade_api_<span class="token operator">-&gt;</span><span class="token function">SubscribePublicTopic</span><span class="token punctuation">(</span>XTP_TERT_QUICK<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-createtraderapi" tabindex="-1"><a class="header-anchor" href="#_3-createtraderapi"><span>3. CreateTraderApi</span></a></h3><p>åˆ›å»ºTraderApiçš„å®ä¾‹ã€‚åªèƒ½åˆ›å»ºä¸€æ¬¡ï¼Œå¦‚æœä¸€ä¸ªè´¦æˆ·éœ€è¦åœ¨å¤šä¸ªå®¢æˆ·ç«¯ç™»å½•ï¼Œè¯·ä½¿ç”¨ä¸åŒçš„client_idï¼Œç³»ç»Ÿå…è®¸ä¸€ä¸ªè´¦æˆ·åŒæ—¶ç™»å½•å¤šä¸ªå®¢æˆ·ç«¯ï¼Œä½†æ˜¯å¯¹äºåŒä¸€è´¦æˆ·ï¼Œç›¸åŒçš„client_idåªèƒ½ä¿æŒä¸€ä¸ªsessionè¿æ¥ï¼Œåé¢çš„ç™»å½•åœ¨å‰ä¸€ä¸ªsessionå­˜ç»­æœŸé—´ï¼Œæ— æ³•è¿æ¥ã€‚ç³»ç»Ÿä¸æ”¯æŒè¿‡å¤œï¼Œè¯·ç¡®ä¿æ¯å¤©å¼€ç›˜å‰é‡æ–°å¯åŠ¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">static</span> TraderApi <span class="token operator">*</span><span class="token function">CreateTraderApi</span><span class="token punctuation">(</span><span class="token keyword">uint8_t</span> client_id<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>save_file_path<span class="token punctuation">,</span> XTP_LOG_LEVEL log_level <span class="token operator">=</span> XTP_LOG_LEVEL_DEBUG<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>client_idï¼šï¼ˆå¿…é¡»è¾“å…¥ï¼‰å®¢æˆ·ç«¯idï¼Œç”¨äºåŒºåˆ†åŒä¸€ç”¨æˆ·çš„ä¸åŒå®¢æˆ·ç«¯ï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰ï¼Œæ™®é€šç”¨æˆ·å¿…é¡»ä½¿ç”¨1-99ä¹‹é—´çš„æ•°å€¼</p><p>save_file_pathï¼šï¼ˆå¿…é¡»è¾“å…¥ï¼‰å­˜å‚¨äº¤æ˜“apiæ—¥å¿—æ–‡ä»¶çš„ç›®å½•ï¼Œè¯·è®¾å®šä¸€ä¸ªçœŸå®å­˜åœ¨çš„æœ‰å¯å†™æƒé™çš„è·¯å¾„</p><p>log_levelï¼šæ—¥å¿—è¾“å‡ºçº§åˆ«</p><p>3.è¿”å›</p><p>æ— </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">//åˆå§‹åŒ–apiï¼Œåˆ›å»ºå•ä¾‹</span>
<span class="token keyword">uint8_t</span> client_id_ <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
string <span class="token function">stdstr_log_path</span><span class="token punctuation">(</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¼€å‘è°ƒè¯•æ—¶ç”¨XTP_LOG_LEVEL_DEBUGï¼Œç¨³å®šè¿è¡Œæ—¶ç”¨XTP_LOG_LEVEL_INFO</span>
XTP_LOG_LEVEL log_level <span class="token operator">=</span> XTP_LOG_LEVEL_DEBUG<span class="token punctuation">;</span>

XTP<span class="token double-colon punctuation">::</span>API<span class="token double-colon punctuation">::</span>TraderApi<span class="token operator">*</span> user_trade_api_ <span class="token operator">=</span> XTP<span class="token double-colon punctuation">::</span>API<span class="token double-colon punctuation">::</span><span class="token class-name">TraderApi</span><span class="token double-colon punctuation">::</span><span class="token function">CreateTraderApi</span><span class="token punctuation">(</span>client_id_<span class="token punctuation">,</span> stdstr_log_path<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> log_level<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// æ³¨å†Œå›è°ƒæ¥å£</span>
	MyTraderSpi <span class="token operator">*</span>spi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MyTraderSpi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	user_trade_api_<span class="token operator">-&gt;</span><span class="token function">RegisterSpi</span><span class="token punctuation">(</span>spi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_4-release" tabindex="-1"><a class="header-anchor" href="#_4-release"><span>4. Release</span></a></h3><p>åˆ é™¤æ¥å£å¯¹è±¡æœ¬èº«ã€‚å½“ç¨‹åºé€€å‡ºå‰ï¼Œä¸å†ä½¿ç”¨æœ¬æ¥å£å¯¹è±¡æ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•°åˆ é™¤æ¥å£å¯¹è±¡ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Release</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>æ— </p><p>3.è¿”å›</p><p>æ— </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ç™»å‡ºå¹¶åˆ é™¤æ¥å£å¯¹è±¡</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	user_trade_api_<span class="token operator">-&gt;</span><span class="token function">Logout</span><span class="token punctuation">(</span>session_id_<span class="token punctuation">)</span><span class="token punctuation">;</span>
	user_trade_api_<span class="token operator">-&gt;</span><span class="token function">Release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_5-gettradingday" tabindex="-1"><a class="header-anchor" href="#_5-gettradingday"><span>5. GetTradingDay</span></a></h3><p>è·å–å½“å‰äº¤æ˜“æ—¥ã€‚åªæœ‰ç™»å½•æˆåŠŸå,æ‰èƒ½å¾—åˆ°æ­£ç¡®çš„äº¤æ˜“æ—¥ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">GetTradingDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>æ— </p><p>3.è¿”å›</p><p>è¿”å›ä¸€ä¸ªæŒ‡å‘æ—¥æœŸä¿¡æ¯å­—ç¬¦ä¸²çš„å¸¸é‡æŒ‡é’ˆã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è·å–äº¤æ˜“æ—¥</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;GetTradingDayï¼š&quot;</span> <span class="token operator">&lt;&lt;</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetTradingDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_6-registerspi" tabindex="-1"><a class="header-anchor" href="#_6-registerspi"><span>6. RegisterSpi</span></a></h3><p>æ³¨å†Œå›è°ƒæ¥å£ã€‚æ´¾ç”Ÿè‡ªå›è°ƒæ¥å£ç±»çš„å®ä¾‹ï¼Œè¯·åœ¨ç™»å½•ä¹‹å‰è®¾å®šã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">RegisterSpi</span><span class="token punctuation">(</span>TraderSpi <span class="token operator">*</span>spi<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>TraderSpiï¼šæ¥å£ç±»å®ä¾‹</p><p>3.è¿”å›</p><p>æ— </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ³¨å†Œå›è°ƒæ¥å£</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	MyTraderSpi <span class="token operator">*</span>spi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MyTraderSpi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	user_trade_api_<span class="token operator">-&gt;</span><span class="token function">RegisterSpi</span><span class="token punctuation">(</span>spi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_7-getapilasterror" tabindex="-1"><a class="header-anchor" href="#_7-getapilasterror"><span>7. GetApiLastError</span></a></h3><p>è·å–APIçš„ç³»ç»Ÿé”™è¯¯ã€‚è¿”å›çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥åœ¨Loginã€InsertOrderã€CancelOrderè¿”å›å€¼ä¸º0æ—¶è°ƒç”¨ï¼Œè·å–å¤±è´¥çš„åŸå› ã€‚å¯ä»¥åœ¨è°ƒç”¨apiæ¥å£å¤±è´¥æ—¶è°ƒç”¨ï¼Œä¾‹å¦‚loginå¤±è´¥æ—¶</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> XTPRI <span class="token operator">*</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>æ— </p><p>3.è¿”å›</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///é”™è¯¯ä¿¡æ¯çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_ERR_MSG_LEN</span>  <span class="token expression"><span class="token number">124</span></span></span>
<span class="token comment">///å“åº”ä¿¡æ¯</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPRspInfoStruct</span>
<span class="token punctuation">{</span>
	<span class="token comment">///é”™è¯¯ä»£ç </span>
	<span class="token keyword">int32_t</span>	error_id<span class="token punctuation">;</span>
	<span class="token comment">///é”™è¯¯ä¿¡æ¯</span>
	<span class="token keyword">char</span>	error_msg<span class="token punctuation">[</span>XTP_ERR_MSG_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> XTPRI<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è·å–APIçš„ç³»ç»Ÿé”™è¯¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPRI<span class="token operator">*</span> error_info <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_id <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_msg <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_8-getapiversion" tabindex="-1"><a class="header-anchor" href="#_8-getapiversion"><span>8. GetApiVersion</span></a></h3><p>è·å–APIçš„å‘è¡Œç‰ˆæœ¬å·ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">GetApiVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>æ— </p><p>3.è¿”å›</p><p>è¿”å›apiå‘è¡Œç‰ˆæœ¬å·ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è·å–APIçš„å‘è¡Œç‰ˆæœ¬å·</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;GetApiVersion ï¼š&quot;</span> <span class="token operator">&lt;&lt;</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetApiVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_9-getclientidbyxtpid" tabindex="-1"><a class="header-anchor" href="#_9-getclientidbyxtpid"><span>9. GetClientIDByXTPID</span></a></h3><p>é€šè¿‡æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDè·å–ä¸‹å•çš„å®¢æˆ·ç«¯idã€‚</p><p>ç”±äºç³»ç»Ÿå…è®¸åŒä¸€ç”¨æˆ·åœ¨ä¸åŒå®¢æˆ·ç«¯ä¸Šç™»å½•æ“ä½œï¼Œæ¯ä¸ªå®¢æˆ·ç«¯é€šè¿‡ä¸åŒçš„client_idè¿›è¡ŒåŒºåˆ†ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint8_t</span> <span class="token function">GetClientIDByXTPID</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šæŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„ID</p><p>3.è¿”å›</p><p>è¿”å›å®¢æˆ·ç«¯idï¼Œå¯ä»¥ç”¨æ­¤æ–¹æ³•è¿‡æ»¤è‡ªå·±ä¸‹çš„è®¢å•</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// é€šè¿‡æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDè·å–ä¸‹å•çš„å®¢æˆ·ç«¯id</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint8_t</span> clientId <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetClientIDByXTPID</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_10-getaccountbyxtpid" tabindex="-1"><a class="header-anchor" href="#_10-getaccountbyxtpid"><span>10. GetAccountByXTPID</span></a></h3><p>é€šè¿‡æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDè·å–ç›¸å…³èµ„é‡‘è´¦æˆ·åã€‚åªæœ‰èµ„é‡‘è´¦æˆ·ç™»å½•æˆåŠŸå,æ‰èƒ½å¾—åˆ°æ­£ç¡®çš„ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">GetAccountByXTPID</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šæŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„ID</p><p>3.è¿”å›</p><p>è¿”å›èµ„é‡‘è´¦æˆ·åã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// é€šè¿‡æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDè·å–ç›¸å…³èµ„é‡‘è´¦æˆ·å</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>clientAccount <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetAccountByXTPID</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_11-subscribepublictopic" tabindex="-1"><a class="header-anchor" href="#_11-subscribepublictopic"><span>11. SubscribePublicTopic</span></a></h3><p>è®¢é˜…å…¬å…±æµã€‚è¯¥æ–¹æ³•è¦åœ¨Loginæ–¹æ³•å‰è°ƒç”¨ã€‚è‹¥ä¸è°ƒç”¨åˆ™é»˜è®¤æ˜¯ç”¨quickæ–¹å¼ã€‚æ³¨æ„åœ¨ç”¨æˆ·æ–­çº¿åï¼Œå¦‚æœä¸ç™»å‡ºå°±login()ï¼Œå…¬å…±æµè®¢é˜…æ–¹å¼å°†ä¼šé»˜è®¤ä½¿ç”¨resumeæ–¹å¼ã€‚ç”¨æˆ·æ”¶åˆ°çš„æ•°æ®ä¼šæ ¹æ®ç”¨æˆ·çš„é€‰æ‹©æ–¹å¼è€Œå®šã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SubscribePublicTopic</span><span class="token punctuation">(</span>XTP_TE_RESUME_TYPE resume_type<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_TE_RESUME_TYPEæ˜¯å…¬æœ‰æµï¼ˆè®¢å•å“åº”ã€æˆäº¤å›æŠ¥ï¼‰é‡ä¼ æ–¹å¼</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_TE_RESUME_TYPE</span>
<span class="token punctuation">{</span>
	XTP_TERT_RESTART <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>	<span class="token comment">///&lt;ä»æœ¬äº¤æ˜“æ—¥å¼€å§‹é‡ä¼ </span>
	XTP_TERT_RESUME<span class="token punctuation">,</span>		<span class="token comment">///&lt;ä»ä»ä¸Šæ¬¡æ”¶åˆ°çš„ç»­ä¼ ï¼ˆæš‚æœªæ”¯æŒï¼‰</span>
	XTP_TERT_QUICK			<span class="token comment">///&lt;åªä¼ é€ç™»å½•åå…¬æœ‰æµï¼ˆè®¢å•å“åº”ã€æˆäº¤å›æŠ¥ï¼‰çš„å†…å®¹</span>
<span class="token punctuation">}</span>XTP_TE_RESUME_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æ— </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è®¢é˜…å…¬æœ‰æµï¼Œåªä¼ é€ç™»å½•åçš„è®¢å•å“åº”å’Œæˆäº¤å›æŠ¥</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	user_trade_api_<span class="token operator">-&gt;</span><span class="token function">SubscribePublicTopic</span><span class="token punctuation">(</span>XTP_TERT_QUICK<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_12-setsoftwareversion" tabindex="-1"><a class="header-anchor" href="#_12-setsoftwareversion"><span>12. SetSoftwareVersion</span></a></h3><p>è®¾ç½®è½¯ä»¶å¼€å‘ç‰ˆæœ¬å·ã€‚æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹å‰è°ƒç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetSoftwareVersion</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> version<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>version ç”¨æˆ·å¼€å‘è½¯ä»¶ç‰ˆæœ¬å·ï¼Œéapiå‘è¡Œç‰ˆæœ¬å·ï¼Œé•¿åº¦ä¸è¶…è¿‡15ä½ï¼Œä»¥&#39;\0&#39;ç»“å°¾</p><p>3.è¿”å›</p><p>æ— </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è®¾ç½®è½¯ä»¶å¼€å‘ç‰ˆæœ¬å·1.1.0ï¼Œæ ‡è¯†çš„æ˜¯å®¢æˆ·ç«¯ç‰ˆæœ¬å·ï¼Œè€Œä¸æ˜¯APIçš„ç‰ˆæœ¬å·ï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	user_trade_api_<span class="token operator">-&gt;</span><span class="token function">SetSoftwareVersion</span><span class="token punctuation">(</span><span class="token string">&quot;1.1.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_13-setsoftwarekey" tabindex="-1"><a class="header-anchor" href="#_13-setsoftwarekey"><span>13. SetSoftwareKey</span></a></h3><p>è®¾ç½®è½¯ä»¶å¼€å‘Keyã€‚æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹å‰è°ƒç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetSoftwareKey</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> key<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>Key:ç”¨æˆ·å¼€å‘è½¯ä»¶Keyï¼Œç”¨æˆ·ç”³è¯·å¼€æˆ·æ—¶ç»™äºˆï¼Œä»¥&#39;\0&#39;ç»“å°¾</p><p>3.è¿”å›</p><p>æ— </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è®¾ç½®è½¯ä»¶å¼€å‘Key</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	user_trade_api_<span class="token operator">-&gt;</span><span class="token function">SetSoftwareKey</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_14-setheartbeatinterval" tabindex="-1"><a class="header-anchor" href="#_14-setheartbeatinterval"><span>14. SetHeartBeatInterval</span></a></h3><p>è®¾ç½®å¿ƒè·³æ£€æµ‹æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤æ˜¯15sã€‚æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹å‰è°ƒç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetHeartBeatInterval</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span> interval<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>Intervalï¼šå¿ƒè·³æ£€æµ‹æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’</p><p>3.è¿”å›</p><p>æ— </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è®¾å®šäº¤æ˜“æœåŠ¡å™¨è¶…æ—¶æ—¶é—´ä¸º15ç§’ï¼Œç”¨æˆ·å¯è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	user_trade_api_<span class="token operator">-&gt;</span><span class="token function">SetHeartBeatInterval</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_15-login" tabindex="-1"><a class="header-anchor" href="#_15-login"><span>15. Login</span></a></h3><p>ç”¨æˆ·ç™»å½•è¯·æ±‚ã€‚æ­¤å‡½æ•°ä¸ºåŒæ­¥é˜»å¡å¼ï¼Œä¸éœ€è¦å¼‚æ­¥ç­‰å¾…ç™»å½•æˆåŠŸï¼Œå½“å‡½æ•°è¿”å›å³å¯è¿›è¡Œåç»­æ“ä½œï¼Œæ­¤apiå¯æ”¯æŒå¤šä¸ªè´¦æˆ·è¿æ¥ï¼Œä½†æ˜¯åŒä¸€ä¸ªè´¦æˆ·åŒä¸€ä¸ªclient_idåªèƒ½æœ‰ä¸€ä¸ªsessionè¿æ¥ï¼Œåé¢çš„ç™»å½•åœ¨å‰ä¸€ä¸ªsessionå­˜ç»­æœŸé—´ï¼Œæ— æ³•è¿æ¥ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> ip<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> user<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> password<span class="token punctuation">,</span> XTP_PROTOCOL_TYPE sock_type<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> local_ip <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>Ipï¼šæœåŠ¡å™¨åœ°å€ï¼Œç±»ä¼¼&quot;127.0.0.1&quot;</p><p>Portï¼šæœåŠ¡å™¨ç«¯å£å·</p><p>Userï¼šç™»å½•ç”¨æˆ·å</p><p>Passwordï¼šç™»å½•å¯†ç </p><p>sock_typeï¼š&quot;1&quot;ä»£è¡¨TCPï¼Œ&quot;2&quot;ä»£è¡¨UDPï¼Œç›®å‰æš‚æ—¶åªæ”¯æŒTCP</p><p>local_ipï¼šæœ¬åœ°ç½‘å¡åœ°å€ï¼Œç±»ä¼¼&quot;127.0.0.1&quot;</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// XTP_PROTOCOL_TYPEæ˜¯é€šè®¯ä¼ è¾“åè®®æ–¹å¼</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_PROTOCOL_TYPE</span>
<span class="token punctuation">{</span>
	XTP_PROTOCOL_TCP <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>	<span class="token comment">///&lt;é‡‡ç”¨TCPæ–¹å¼ä¼ è¾“</span>
	XTP_PROTOCOL_UDP		<span class="token comment">///&lt;é‡‡ç”¨UDPæ–¹å¼ä¼ è¾“(ä»…è¡Œæƒ…æ¥å£æ”¯æŒ)</span>
<span class="token punctuation">}</span>XTP_PROTOCOL_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>session_idè¡¨æ˜æ­¤èµ„é‡‘è´¦å·ç™»å½•æ˜¯å¦æˆåŠŸã€‚</p><p>&quot;0&quot;è¡¨ç¤ºç™»å½•å¤±è´¥ï¼Œå¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>é&quot;0&quot;è¡¨ç¤ºç™»å½•æˆåŠŸï¼Œæ­¤æ—¶éœ€è¦è®°å½•ä¸‹è¿™ä¸ªè¿”å›å€¼session_idï¼Œä¸ç™»å½•çš„èµ„é‡‘è´¦æˆ·å¯¹åº”ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ç™»å½•è¯·æ±‚ï¼Œå‚æ•°ç½‘å€ç«¯å£è´¦æˆ·å¯†ç æ¨¡å¼ç­‰å’Œé»˜è®¤å‚æ•°æœ¬æœºåœ°å€éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	std<span class="token double-colon punctuation">::</span>string trade_server_ip <span class="token operator">=</span> <span class="token string">&quot;xxx.xxx.xxx.xxx&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> trade_server_port <span class="token operator">=</span> xxxx<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string account_name <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxx&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string account_pw <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string local_ip <span class="token operator">=</span> <span class="token string">&quot;xxx.xxx.xxx.xxx&quot;</span><span class="token punctuation">;</span><span class="token comment">//æ ¹æ®æœ¬åœ°ç½‘å¡å¯¹åº”çš„ipè®¾å®š</span>
	
	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">Login</span><span class="token punctuation">(</span>trade_server_ip<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> trade_server_port<span class="token punctuation">,</span> account_name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> account_pw<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_PROTOCOL_TCP<span class="token punctuation">,</span> local_ip<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_16-logout" tabindex="-1"><a class="header-anchor" href="#_16-logout"><span>16. Logout</span></a></h3><p>ç™»å‡ºè¯·æ±‚ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">Logout</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>ç™»å‡ºæ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºç™»å‡ºæˆåŠŸï¼Œ&quot;-1&quot;è¡¨ç¤ºç™»å‡ºå¤±è´¥</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ç™»å‡ºè¯·æ±‚</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">Logout</span><span class="token punctuation">(</span>session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_17-isserverrestart" tabindex="-1"><a class="header-anchor" href="#_17-isserverrestart"><span>17. IsServerRestart</span></a></h3><p>æœåŠ¡å™¨æ˜¯å¦é‡å¯è¿‡ã€‚æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹åè°ƒç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">bool</span> <span class="token function">IsServerRestart</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>&quot;true&quot;è¡¨ç¤ºé‡å¯è¿‡ï¼Œ&quot;false&quot;è¡¨ç¤ºæ²¡æœ‰é‡å¯è¿‡ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æœåŠ¡å™¨æ˜¯å¦é‡å¯è¿‡</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">bool</span> bisr <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">IsServerRestart</span><span class="token punctuation">(</span>session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_18-modifyuserterminalinfo" tabindex="-1"><a class="header-anchor" href="#_18-modifyuserterminalinfo"><span>18. ModifyUserTerminalInfo</span></a></h3><p>ä¿®æ”¹å·²ç™»å½•ç”¨æˆ·çš„ç¡¬ä»¶ä¿¡æ¯ï¼Œä»…é™æˆæƒç³»ç»Ÿä½¿ç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">ModifyUserTerminalInfo</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPUserTerminalInfoReq<span class="token operator">*</span> info<span class="token punctuation">,</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>infoï¼šéœ€è¦ä¿®æ”¹æˆçš„ç”¨æˆ·ç¡¬ä»¶ä¿¡æ¯</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///ç”³æŠ¥ç”¨æˆ·çš„ipå’Œmacç­‰ä¿¡æ¯ï¼Œä»…é™æˆæƒç”¨æˆ·ä½¿ç”¨</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPUserTerminalInfoReq</span> <span class="token punctuation">{</span>
	<span class="token keyword">char</span>  local_ip<span class="token punctuation">[</span>XTP_INET_ADDRESS_STR_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">///&lt;æœ¬åœ°IPåœ°å€</span>
	<span class="token keyword">char</span>  mac_addr<span class="token punctuation">[</span>XTP_MAC_ADDRESS_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>				<span class="token comment">///&lt;MACåœ°å€</span>
	<span class="token keyword">char</span>  hd<span class="token punctuation">[</span>XTP_HARDDISK_SN_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>						<span class="token comment">///&lt;ç¡¬ç›˜åºåˆ—å·</span>
	XTPTerminalType term_type<span class="token punctuation">;</span>							<span class="token comment">///&lt;ç»ˆç«¯ç±»å‹</span>
	<span class="token keyword">char</span>  internet_ip<span class="token punctuation">[</span>XTP_INET_ADDRESS_STR_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>		<span class="token comment">///&lt;å…¬ç½‘IPåœ°å€</span>
	<span class="token keyword">int32_t</span> internet_port<span class="token punctuation">;</span>								<span class="token comment">///&lt;å…¬ç½‘ç«¯å£å·</span>
	XTPVersionType  client_version<span class="token punctuation">;</span>						<span class="token comment">///&lt;å®¢æˆ·ç«¯ç‰ˆæœ¬å·</span>
	<span class="token keyword">char</span>  macos_sno<span class="token punctuation">[</span>XTP_MACOS_SNO_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>					<span class="token comment">///&lt;MacOSç³»ç»Ÿçš„åºåˆ—å·ï¼Œä»…ä¸ºMacOSç³»ç»Ÿéœ€è¦å¡«å†™</span>
	<span class="token keyword">char</span>  unused<span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span><span class="token punctuation">;</span>									<span class="token comment">///&lt;é¢„ç•™</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTPTerminalTypeæ˜¯ä¸€ç§ç»ˆç«¯ç±»å‹æšä¸¾ï¼Œä»…ä¾›æˆæƒç³»ç»Ÿä½¿ç”¨</span>
<span class="token keyword">enum</span> <span class="token class-name">XTPTerminalType</span>
<span class="token punctuation">{</span>
	XTP_TERMINAL_PC <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>            <span class="token comment">///&lt;&quot;PC&quot;,PC-windowsåŠMacOS</span>
	XTP_TERMINAL_ANDROID<span class="token punctuation">,</span>           <span class="token comment">///&lt;&quot;MA&quot;,Mobile-Android</span>
	XTP_TERMINAL_IOS<span class="token punctuation">,</span>               <span class="token comment">///&lt;&quot;MI&quot;,Mobile-Ios</span>
	XTP_TERMINAL_WP<span class="token punctuation">,</span>                <span class="token comment">///&lt;&quot;MW&quot;,Mobile-Windows Phone</span>
	XTP_TERMINAL_STATION<span class="token punctuation">,</span>           <span class="token comment">///&lt;&quot;WP&quot;,æ— ç›˜ç«™</span>
	XTP_TERMINAL_TEL<span class="token punctuation">,</span>               <span class="token comment">///&lt;&quot;TO&quot;,ç”µè¯å§”æ‰˜</span>
	XTP_TERMINAL_PC_LINUX           <span class="token comment">///&lt;&quot;OH&quot;,PC-linuxåŠå…¶ä»–ç»ˆç«¯</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// ç‰ˆæœ¬å·ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">char</span> XTPVersionType<span class="token punctuation">[</span>XTP_VERSION_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/// å­˜æ”¾ç‰ˆæœ¬å·çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_VERSION_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
<span class="token comment">/// IPåœ°å€çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_INET_ADDRESS_STR_LEN</span> <span class="token expression"><span class="token number">64</span></span></span>
<span class="token comment">/// MACåœ°å€çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_MAC_ADDRESS_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
<span class="token comment">/// ç¡¬ç›˜åºåˆ—å·çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_HARDDISK_SN_LEN</span> <span class="token expression"><span class="token number">24</span></span></span>
<span class="token comment">/// MacOSç³»ç»Ÿåºåˆ—å·çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_MACOS_SNO_LEN</span> <span class="token expression"><span class="token number">21</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>å‘é€æ¶ˆæ¯æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ä¿®æ”¹å·²ç™»å½•ç”¨æˆ·çš„ç¡¬ä»¶ä¿¡æ¯ï¼Œæ‰€æœ‰å‚æ•°éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    XTPUserTerminalInfoReq info<span class="token punctuation">;</span>
    <span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>info<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPUserTerminalInfoReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>string s_local_ip<span class="token punctuation">{</span><span class="token string">&quot;xxx.xxx.xxx.xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string s_mac_addr<span class="token punctuation">{</span><span class="token string">&quot;xx.xx.xx.xx.xx.xx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string s_hd<span class="token punctuation">{</span><span class="token string">&quot;xxxxxxxxxxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string s_internet_ip<span class="token punctuation">{</span><span class="token string">&quot;xxx.xxx.xxx.xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string s_client_version<span class="token punctuation">{</span><span class="token string">&quot;x.x.xx.xx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">strncpy</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>local_ip<span class="token punctuation">,</span> s_local_ip<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_INET_ADDRESS_STR_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">strncpy</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>mac_addr<span class="token punctuation">,</span> s_mac_addr<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_MAC_ADDRESS_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">strncpy</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>hd<span class="token punctuation">,</span> s_hd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_HARDDISK_SN_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span>term_type <span class="token operator">=</span> XTP_TERMINAL_PC<span class="token punctuation">;</span>
    <span class="token function">strncpy</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>internet_ip<span class="token punctuation">,</span> s_internet_ip<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_INET_ADDRESS_STR_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span>internet_port <span class="token operator">=</span> <span class="token number">8000</span><span class="token punctuation">;</span>
    <span class="token function">strncpy</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>client_version<span class="token punctuation">,</span> s_client_version<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_VERSION_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">ModifyUserTerminalInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>info<span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_19-queryaccounttrademarket" tabindex="-1"><a class="header-anchor" href="#_19-queryaccounttrademarket"><span>19. QueryAccountTradeMarket</span></a></h3><p>æŸ¥è¯¢ç”¨æˆ·åœ¨æœ¬èŠ‚ç‚¹ä¸Šçš„å¯äº¤æ˜“å¸‚åœºç±»å‹ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryAccountTradeMarket</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>å‘é€æ¶ˆæ¯æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryAccountTradeMarket</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryAccountTradeMarket</span><span class="token punctuation">(</span><span class="token keyword">int</span> trade_location<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_20-getaneworderxtpid" tabindex="-1"><a class="header-anchor" href="#_20-getaneworderxtpid"><span>20. GetANewOrderXTPID</span></a></h3><p>ä¸ºç”¨æˆ·è·å–ä¸€ä¸ªæ–°çš„è®¢å•XTPIDï¼Œç”¨äºæŠ¥å•ã€‚</p><p>æ­¤å‡½æ•°å¿…é¡»åœ¨Loginä¹‹åè°ƒç”¨ï¼Œé€šè¿‡è¿™ä¸ªå‡½æ•°è·å–çš„order_xtp_idä»…ç”¨äºå¯¹åº”çš„ç”¨æˆ·æŠ¥å•ï¼Œå¦‚æœè®¾ç½®é”™è¯¯ï¼Œå°†ä¼šå¯¼è‡´ä¸‹å•å¤±è´¥ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">GetANewOrderXTPID</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>ç”Ÿæˆçš„è®¢å•XTPIDï¼Œéâ€œ0â€è¡¨ç¤ºè·å–æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºè·å–å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span> xtp_id <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetANewOrderXTPID</span><span class="token punctuation">(</span>session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_21-insertorder" tabindex="-1"><a class="header-anchor" href="#_21-insertorder"><span>21. InsertOrder</span></a></h3><p>æŠ¥å•å½•å…¥è¯·æ±‚ã€‚</p><p>äº¤æ˜“æ‰€æ¥æ”¶è®¢å•åï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOrderEvent()ä¸­è¿”å›æŠ¥å•æœªæˆäº¤çš„çŠ¶æ€ï¼Œä¹‹åæ‰€æœ‰çš„è®¢å•çŠ¶æ€æ”¹å˜ï¼ˆé™¤äº†éƒ¨æˆçŠ¶æ€ï¼‰éƒ½ä¼šé€šè¿‡æŠ¥å•å“åº”å‡½æ•°è¿”å›ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">InsertOrder</span><span class="token punctuation">(</span>XTPOrderInsertInfo <span class="token operator">*</span>order<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>orderï¼šæŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä»€ä¹ˆéƒ½ä¸å¡«ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚order.order_xtp_idå­—æ®µæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æ–°è®¢å•è¯·æ±‚</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPOrderInsertInfo</span>
<span class="token punctuation">{</span>
    <span class="token comment">///XTPç³»ç»Ÿè®¢å•IDï¼Œæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œåœ¨XTPç³»ç»Ÿä¸­å”¯ä¸€</span>
    <span class="token keyword">uint64_t</span>                order_xtp_id<span class="token punctuation">;</span>
    <span class="token comment">///æŠ¥å•å¼•ç”¨ï¼Œç”±å®¢æˆ·è‡ªå®šä¹‰</span>
    <span class="token keyword">uint32_t</span>	            order_client_id<span class="token punctuation">;</span>
    <span class="token comment">///åˆçº¦ä»£ç  å®¢æˆ·ç«¯è¯·æ±‚ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
    <span class="token keyword">char</span>                    ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE         market<span class="token punctuation">;</span>
    <span class="token comment">///ä»·æ ¼</span>
    <span class="token keyword">double</span>                  price<span class="token punctuation">;</span>
    <span class="token comment">///æ­¢æŸä»·ï¼ˆä¿ç•™å­—æ®µï¼‰</span>
    <span class="token keyword">double</span>                  stop_price<span class="token punctuation">;</span>
    <span class="token comment">///æ•°é‡(è‚¡ç¥¨å•ä½ä¸ºè‚¡ï¼Œé€†å›è´­å•ä½ä¸ºå¼ )</span>
    <span class="token keyword">int64_t</span>                 quantity<span class="token punctuation">;</span>
    <span class="token comment">///æŠ¥å•ä»·æ ¼</span>
    XTP_PRICE_TYPE          price_type<span class="token punctuation">;</span>
    <span class="token keyword">union</span><span class="token punctuation">{</span>
		<span class="token comment">///32ä½å­—æ®µï¼Œç”¨æ¥å…¼å®¹è€ç‰ˆæœ¬apiï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒ</span>
        <span class="token keyword">uint32_t</span>            u32<span class="token punctuation">;</span>
        <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            <span class="token comment">///ä¹°å–æ–¹å‘</span>
            XTP_SIDE_TYPE               side<span class="token punctuation">;</span>
            <span class="token comment">///å¼€å¹³æ ‡å¿—</span>
            XTP_POSITION_EFFECT_TYPE    position_effect<span class="token punctuation">;</span>
			<span class="token comment">///é¢„ç•™å­—æ®µ1</span>
            <span class="token keyword">uint8_t</span>                     reserved1<span class="token punctuation">;</span>
			<span class="token comment">///é¢„ç•™å­—æ®µ2</span>
			<span class="token keyword">uint8_t</span>                     reserved2<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">///ä¸šåŠ¡ç±»å‹</span>
	XTP_BUSINESS_TYPE       business_type<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_MARKET_TYPEå¸‚åœºç±»å‹ï¼Œäº¤æ˜“é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_MARKET_TYPE</span>
<span class="token punctuation">{</span>
    XTP_MKT_INIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">///&lt;åˆå§‹åŒ–å€¼æˆ–è€…æœªçŸ¥</span>
    XTP_MKT_SZ_A <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">///&lt;æ·±åœ³Aè‚¡</span>
    XTP_MKT_SH_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;ä¸Šæµ·Aè‚¡</span>
    XTP_MKT_BJ_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;åŒ—äº¬Aè‚¡</span>
    XTP_MKT_HK<span class="token punctuation">,</span>      <span class="token comment">///&lt;æ¸¯è‚¡</span>
    XTP_MKT_UNKNOWN   <span class="token comment">///&lt;æœªçŸ¥äº¤æ˜“å¸‚åœºç±»å‹</span>
<span class="token punctuation">}</span>XTP_MARKET_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_PRICE_TYPEæ˜¯ä»·æ ¼ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_PRICE_TYPE</span>
<span class="token punctuation">{</span>
	XTP_PRICE_LIMIT <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>           <span class="token comment">///&lt;é™ä»·å•-æ²ª / æ·± / æ²ªæœŸæƒ / æ·±æœŸæƒ ï¼ˆé™¤æ™®é€šè‚¡ç¥¨ä¸šåŠ¡å¤–ï¼Œå…¶ä½™æœªç‰¹æŒ‡çš„ä¸šåŠ¡å‡ä½¿ç”¨æ­¤ç§ç±»å‹ï¼‰</span>
	XTP_PRICE_BEST_OR_CANCEL<span class="token punctuation">,</span>      <span class="token comment">///&lt;å³æ—¶æˆäº¤å‰©ä½™è½¬æ’¤é”€ï¼Œå¸‚ä»·å•-æ·± / æ²ªæœŸæƒ / æ·±æœŸæƒ</span>
	XTP_PRICE_BEST5_OR_LIMIT<span class="token punctuation">,</span>      <span class="token comment">///&lt;æœ€ä¼˜äº”æ¡£å³æ—¶æˆäº¤å‰©ä½™è½¬é™ä»·ï¼Œå¸‚ä»·å•-æ²ª</span>
	XTP_PRICE_BEST5_OR_CANCEL<span class="token punctuation">,</span>     <span class="token comment">///&lt;æœ€ä¼˜5æ¡£å³æ—¶æˆäº¤å‰©ä½™è½¬æ’¤é”€ï¼Œå¸‚ä»·å•-æ²ªæ·± / æ·±æœŸæƒ</span>
	XTP_PRICE_ALL_OR_CANCEL<span class="token punctuation">,</span>       <span class="token comment">///&lt;å…¨éƒ¨æˆäº¤æˆ–æ’¤é”€,å¸‚ä»·å•-æ·± / æ²ªæœŸæƒ / æ·±æœŸæƒ</span>
	XTP_PRICE_FORWARD_BEST<span class="token punctuation">,</span>        <span class="token comment">///&lt;æœ¬æ–¹æœ€ä¼˜ï¼Œå¸‚ä»·å•-æ·± / æ·±æœŸæƒ / æ²ªç§‘åˆ›æ¿</span>
	XTP_PRICE_REVERSE_BEST_LIMIT<span class="token punctuation">,</span>  <span class="token comment">///&lt;å¯¹æ–¹æœ€ä¼˜å‰©ä½™è½¬é™ä»·ï¼Œå¸‚ä»·å•-æ·± / æ²ªæœŸæƒ / æ·±æœŸæƒ / æ²ªç§‘åˆ›æ¿</span>
	XTP_PRICE_LIMIT_OR_CANCEL<span class="token punctuation">,</span>	   <span class="token comment">///&lt;æœŸæƒé™ä»·ç”³æŠ¥FOK</span>
	XTP_PRICE_TYPE_UNKNOWN<span class="token punctuation">,</span>		   <span class="token comment">///&lt;æœªçŸ¥æˆ–è€…æ— æ•ˆä»·æ ¼ç±»å‹</span>
<span class="token punctuation">}</span>XTP_PRICE_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_SIDE_TYPEæ˜¯ä¹°å–æ–¹å‘ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">uint8_t</span> XTP_SIDE_TYPE<span class="token punctuation">;</span>

<span class="token comment">///ä¹°ï¼ˆæ–°è‚¡ç”³è´­ï¼ŒETFä¹°ï¼Œé…è‚¡ï¼Œä¿¡ç”¨äº¤æ˜“ä¸­æ‹…ä¿å“ä¹°ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_BUY</span>            <span class="token expression"><span class="token number">1</span></span></span>
<span class="token comment">///å–ï¼ˆé€†å›è´­ï¼ŒETFå–ï¼Œä¿¡ç”¨äº¤æ˜“ä¸­æ‹…ä¿å“å–ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SELL</span>           <span class="token expression"><span class="token number">2</span></span></span>
<span class="token comment">///ç”³è´­</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_PURCHASE</span>       <span class="token expression"><span class="token number">7</span></span></span>
<span class="token comment">///èµå›</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REDEMPTION</span>     <span class="token expression"><span class="token number">8</span></span></span>
<span class="token comment">///æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SPLIT</span>          <span class="token expression"><span class="token number">9</span></span></span>
<span class="token comment">///åˆå¹¶</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_MERGE</span>          <span class="token expression"><span class="token number">10</span></span></span>
<span class="token comment">///æ”¹ç‰ˆä¹‹åçš„sideçš„å¤‡å…‘ï¼Œæš‚ä¸æ”¯æŒ</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_COVER</span>          <span class="token expression"><span class="token number">11</span></span></span>
<span class="token comment">///æ”¹ç‰ˆä¹‹åçš„sideé”å®šï¼ˆå¯¹åº”å¼€å¹³æ ‡è¯†ä¸ºå¼€ï¼‰/è§£é”ï¼ˆå¯¹åº”å¼€å¹³æ ‡è¯†ä¸ºå¹³ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_FREEZE</span>         <span class="token expression"><span class="token number">12</span></span></span>
<span class="token comment">/// èèµ„ä¹°å…¥</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_MARGIN_TRADE</span>	<span class="token expression"><span class="token number">21</span></span></span>
<span class="token comment">/// èåˆ¸å–å‡º</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SHORT_SELL</span>		<span class="token expression"><span class="token number">22</span></span></span>
<span class="token comment">/// å–åˆ¸è¿˜æ¬¾</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REPAY_MARGIN</span>	<span class="token expression"><span class="token number">23</span></span></span>
<span class="token comment">/// ä¹°åˆ¸è¿˜åˆ¸</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REPAY_STOCK</span>	<span class="token expression"><span class="token number">24</span></span></span>
<span class="token comment">/// ç°é‡‘è¿˜æ¬¾ï¼ˆä¸æ”¾åœ¨æ™®é€šè®¢å•åè®®ï¼Œå¦åŠ è¯·æ±‚å’ŒæŸ¥è¯¢åè®®ï¼‰</span>
<span class="token comment">//#define XTP_SIDE_CASH_REPAY_MARGIN	25</span>
<span class="token comment">/// ç°åˆ¸è¿˜åˆ¸</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_STOCK_REPAY_STOCK</span>	<span class="token expression"><span class="token number">26</span></span></span>
<span class="token comment">/// ä½™åˆ¸åˆ’è½¬</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SURSTK_TRANS</span>       <span class="token expression"><span class="token number">27</span></span></span>
<span class="token comment">/// æ‹…ä¿å“è½¬å…¥</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_GRTSTK_TRANSIN</span>     <span class="token expression"><span class="token number">28</span></span></span>
<span class="token comment">/// æ‹…ä¿å“è½¬å‡º</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_GRTSTK_TRANSOUT</span>    <span class="token expression"><span class="token number">29</span></span></span>

<span class="token comment">///ç»„åˆç­–ç•¥çš„ç»„åˆ</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_COMBINE</span>        <span class="token expression"><span class="token number">31</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT</span>          <span class="token expression"><span class="token number">32</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„ç®¡ç†å‘˜å¼ºåˆ¶æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT_FORCE</span>    <span class="token expression"><span class="token number">33</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„äº¤æ˜“æ‰€å¼ºåˆ¶æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT_FORCE_EXCH</span>    <span class="token expression"><span class="token number">34</span></span></span>

<span class="token comment">///æœªçŸ¥æˆ–è€…æ— æ•ˆä¹°å–æ–¹å‘</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_UNKNOWN</span>        <span class="token expression"><span class="token number">50</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_POSITION_EFFECT_TYPEæ˜¯å¼€å¹³æ ‡è¯†ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">uint8_t</span> XTP_POSITION_EFFECT_TYPE<span class="token punctuation">;</span>

<span class="token comment">/// åˆå§‹å€¼æˆ–æœªçŸ¥å€¼å¼€å¹³æ ‡è¯†ï¼Œé™¤æœŸæƒå¤–ï¼Œå‡ä½¿ç”¨æ­¤å€¼</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_INIT</span>                <span class="token expression"><span class="token number">0</span></span></span>
<span class="token comment">/// å¼€</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_OPEN</span>                <span class="token expression"><span class="token number">1</span></span></span>
<span class="token comment">/// å¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CLOSE</span>               <span class="token expression"><span class="token number">2</span></span></span>
<span class="token comment">/// å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_FORCECLOSE</span>          <span class="token expression"><span class="token number">3</span></span></span>
<span class="token comment">/// å¹³ä»Š</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CLOSETODAY</span>          <span class="token expression"><span class="token number">4</span></span></span>
<span class="token comment">/// å¹³æ˜¨</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CLOSEYESTERDAY</span>      <span class="token expression"><span class="token number">5</span></span></span>
<span class="token comment">/// å¼ºå‡</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_FORCEOFF</span>            <span class="token expression"><span class="token number">6</span></span></span>
<span class="token comment">/// æœ¬åœ°å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_LOCALFORCECLOSE</span>     <span class="token expression"><span class="token number">7</span></span></span>
<span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡è¿½ä¿å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CREDIT_FORCE_COVER</span>  <span class="token expression"><span class="token number">8</span></span></span>
<span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡æ¸…å¿å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CREDIT_FORCE_CLEAR</span>  <span class="token expression"><span class="token number">9</span></span></span>
<span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡åˆçº¦åˆ°æœŸå¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CREDIT_FORCE_DEBT</span>   <span class="token expression"><span class="token number">10</span></span></span>
<span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡æ— æ¡ä»¶å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CREDIT_FORCE_UNCOND</span> <span class="token expression"><span class="token number">11</span></span></span>
<span class="token comment">/// æœªçŸ¥çš„å¼€å¹³æ ‡è¯†ç±»å‹</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_UNKNOWN</span>             <span class="token expression"><span class="token number">12</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_BUSINESS_TYPEè¯åˆ¸ä¸šåŠ¡ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_BUSINESS_TYPE</span>
<span class="token punctuation">{</span>
	XTP_BUSINESS_TYPE_CASH <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token comment">///&lt;æ™®é€šè‚¡ç¥¨ä¸šåŠ¡ï¼ˆè‚¡ç¥¨ä¹°å–ï¼ŒETFä¹°å–ï¼Œæ²ªå¸‚äº¤æ˜“å‹è´§å¸åŸºé‡‘ç­‰ï¼‰</span>
	XTP_BUSINESS_TYPE_IPOS<span class="token punctuation">,</span>                <span class="token comment">///&lt;æ–°è‚¡ç”³è´­ä¸šåŠ¡ï¼ˆå¯¹åº”çš„price typeéœ€é€‰æ‹©é™ä»·ç±»å‹ï¼‰</span>
	XTP_BUSINESS_TYPE_REPO<span class="token punctuation">,</span>                <span class="token comment">///&lt;å›è´­ä¸šåŠ¡ï¼ˆå›½å€ºé€†å›è´­ä¸šåŠ¡å¯¹åº”çš„price typeå¡«ä¸ºé™ä»·ï¼Œsideå¡«ä¸ºå–ï¼‰</span>
	XTP_BUSINESS_TYPE_ETF<span class="token punctuation">,</span>                 <span class="token comment">///&lt;ETFç”³èµä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_MARGIN<span class="token punctuation">,</span>              <span class="token comment">///&lt;èèµ„èåˆ¸ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_DESIGNATION<span class="token punctuation">,</span>         <span class="token comment">///&lt;è½¬æ‰˜ç®¡ï¼ˆæœªæ”¯æŒï¼‰</span>
	XTP_BUSINESS_TYPE_ALLOTMENT<span class="token punctuation">,</span>		   <span class="token comment">///&lt;é…è‚¡ä¸šåŠ¡ï¼ˆå¯¹åº”çš„price typeéœ€é€‰æ‹©é™ä»·ç±»å‹,sideå¡«ä¸ºä¹°ï¼‰</span>
	XTP_BUSINESS_TYPE_STRUCTURED_FUND_PURCHASE_REDEMPTION<span class="token punctuation">,</span>	   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘ç”³èµä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_STRUCTURED_FUND_SPLIT_MERGE<span class="token punctuation">,</span>	   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘æ‹†åˆ†åˆå¹¶ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_MONEY_FUND<span class="token punctuation">,</span>		   <span class="token comment">///&lt;è´§å¸åŸºé‡‘ç”³èµä¸šåŠ¡ï¼ˆæš‚æœªæ”¯æŒï¼Œæ²ªå¸‚äº¤æ˜“å‹è´§å¸åŸºé‡‘çš„ä¹°å–è¯·ä½¿ç”¨æ™®é€šè‚¡ç¥¨ä¸šåŠ¡ï¼‰</span>
    XTP_BUSINESS_TYPE_OPTION<span class="token punctuation">,</span>              <span class="token comment">///&lt;æœŸæƒä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_EXECUTE<span class="token punctuation">,</span>             <span class="token comment">///&lt;è¡Œæƒ</span>
    XTP_BUSINESS_TYPE_FREEZE<span class="token punctuation">,</span>              <span class="token comment">///&lt;é”å®šè§£é”ï¼Œæš‚ä¸æ”¯æŒ</span>
    XTP_BUSINESS_TYPE_OPTION_COMBINE<span class="token punctuation">,</span>      <span class="token comment">///&lt;æœŸæƒç»„åˆç­–ç•¥ ç»„åˆå’Œæ‹†åˆ†ä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_EXECUTE_COMBINE<span class="token punctuation">,</span>     <span class="token comment">///&lt;æœŸæƒè¡Œæƒåˆå¹¶ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_BOND_SWAP_STOCK<span class="token punctuation">,</span>     <span class="token comment">///&lt;å€ºè½¬è‚¡ä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_UNKNOWN<span class="token punctuation">,</span>             <span class="token comment">///&lt;æœªçŸ¥ç±»å‹</span>
<span class="token punctuation">}</span> XTP_BUSINESS_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŠ¥å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæŠ¥å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæŠ¥å•å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„order_xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŠ¥å…¥ä¸€ç¬”é™ä»·å•ï¼Œä»¥9.01çš„ä»·æ ¼ä¹°å…¥æ²ªå¸‚&quot;600000&quot;çš„æ™®é€šäº¤æ˜“ï¼Œæ•°é‡1000ã€‚</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPOrderInsertInfo order<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPOrderInsertInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	order<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;600000&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>business_type <span class="token operator">=</span> XTP_BUSINESS_TYPE_CASH<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>side <span class="token operator">=</span> XTP_SIDE_BUY<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>position_effect <span class="token operator">=</span> XTP_POSITION_EFFECT_INIT<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>price_type <span class="token operator">=</span> XTP_PRICE_LIMIT<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">9.01</span><span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>quantity <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

	<span class="token keyword">uint64_t</span> order_xtp_id <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">InsertOrder</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span> session_id_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŠ¥å•å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOrderEvent</span><span class="token punctuation">(</span>XTPOrderInfo <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// æŠ¥å•æˆäº¤å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnTradeEvent</span><span class="token punctuation">(</span>XTPTradeReport <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_22-insertorderextra" tabindex="-1"><a class="header-anchor" href="#_22-insertorderextra"><span>22. InsertOrderExtra</span></a></h3><p>å·²ç»æå‰è®¾ç½®order_xtp_idçš„æŠ¥å•å½•å…¥è¯·æ±‚ï¼Œä¸GetANewOrderXTPID()é…åˆä½¿ç”¨ã€‚</p><p>ä½¿ç”¨è®¾ç½®å¥½çš„order_xtp_idï¼ˆé€šè¿‡GetANewOrderXTPID()è·å¾—ï¼‰è¿›è¡ŒæŠ¥å•ï¼Œæ³¨æ„æ­¤å¤„å¦‚æœorder_xtp_idè®¾ç½®ä¸å¯¹ï¼Œå°†å¯¼è‡´æŠ¥å•å¤±è´¥ã€‚</p><p>äº¤æ˜“æ‰€æ¥æ”¶è®¢å•åï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOrderEvent()ä¸­è¿”å›æŠ¥å•æœªæˆäº¤çš„çŠ¶æ€ï¼Œä¹‹åæ‰€æœ‰çš„è®¢å•çŠ¶æ€æ”¹å˜ï¼ˆé™¤äº†éƒ¨æˆçŠ¶æ€ï¼‰éƒ½ä¼šé€šè¿‡æŠ¥å•å“åº”å‡½æ•°è¿”å›ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">InsertOrderExtra</span><span class="token punctuation">(</span>XTPOrderInsertInfo <span class="token operator">*</span>order<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>orderï¼šæŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸å¡«ã€‚order.order_xtp_idå­—æ®µå¿…é¡»æ˜¯é€šè¿‡GetANewOrderXTPID()è·å¾—çš„å€¼ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æ–°è®¢å•è¯·æ±‚</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPOrderInsertInfo</span>
<span class="token punctuation">{</span>
    <span class="token comment">///XTPç³»ç»Ÿè®¢å•IDï¼Œæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œåœ¨XTPç³»ç»Ÿä¸­å”¯ä¸€</span>
    <span class="token keyword">uint64_t</span>                order_xtp_id<span class="token punctuation">;</span>
    <span class="token comment">///æŠ¥å•å¼•ç”¨ï¼Œç”±å®¢æˆ·è‡ªå®šä¹‰</span>
    <span class="token keyword">uint32_t</span>	            order_client_id<span class="token punctuation">;</span>
    <span class="token comment">///åˆçº¦ä»£ç  å®¢æˆ·ç«¯è¯·æ±‚ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
    <span class="token keyword">char</span>                    ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE         market<span class="token punctuation">;</span>
    <span class="token comment">///ä»·æ ¼</span>
    <span class="token keyword">double</span>                  price<span class="token punctuation">;</span>
    <span class="token comment">///æ­¢æŸä»·ï¼ˆä¿ç•™å­—æ®µï¼‰</span>
    <span class="token keyword">double</span>                  stop_price<span class="token punctuation">;</span>
    <span class="token comment">///æ•°é‡(è‚¡ç¥¨å•ä½ä¸ºè‚¡ï¼Œé€†å›è´­å•ä½ä¸ºå¼ )</span>
    <span class="token keyword">int64_t</span>                 quantity<span class="token punctuation">;</span>
    <span class="token comment">///æŠ¥å•ä»·æ ¼</span>
    XTP_PRICE_TYPE          price_type<span class="token punctuation">;</span>
    <span class="token keyword">union</span><span class="token punctuation">{</span>
		<span class="token comment">///32ä½å­—æ®µï¼Œç”¨æ¥å…¼å®¹è€ç‰ˆæœ¬apiï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒ</span>
        <span class="token keyword">uint32_t</span>            u32<span class="token punctuation">;</span>
        <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            <span class="token comment">///ä¹°å–æ–¹å‘</span>
            XTP_SIDE_TYPE               side<span class="token punctuation">;</span>
            <span class="token comment">///å¼€å¹³æ ‡å¿—</span>
            XTP_POSITION_EFFECT_TYPE    position_effect<span class="token punctuation">;</span>
			<span class="token comment">///é¢„ç•™å­—æ®µ1</span>
            <span class="token keyword">uint8_t</span>                     reserved1<span class="token punctuation">;</span>
			<span class="token comment">///é¢„ç•™å­—æ®µ2</span>
			<span class="token keyword">uint8_t</span>                     reserved2<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">///ä¸šåŠ¡ç±»å‹</span>
	XTP_BUSINESS_TYPE       business_type<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_MARKET_TYPEå¸‚åœºç±»å‹ï¼Œäº¤æ˜“é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_MARKET_TYPE</span>
<span class="token punctuation">{</span>
    XTP_MKT_INIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">///&lt;åˆå§‹åŒ–å€¼æˆ–è€…æœªçŸ¥</span>
    XTP_MKT_SZ_A <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">///&lt;æ·±åœ³Aè‚¡</span>
    XTP_MKT_SH_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;ä¸Šæµ·Aè‚¡</span>
    XTP_MKT_BJ_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;åŒ—äº¬Aè‚¡</span>
    XTP_MKT_HK<span class="token punctuation">,</span>      <span class="token comment">///&lt;æ¸¯è‚¡</span>
    XTP_MKT_UNKNOWN   <span class="token comment">///&lt;æœªçŸ¥äº¤æ˜“å¸‚åœºç±»å‹</span>
<span class="token punctuation">}</span>XTP_MARKET_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_PRICE_TYPEæ˜¯ä»·æ ¼ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_PRICE_TYPE</span>
<span class="token punctuation">{</span>
	XTP_PRICE_LIMIT <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>           <span class="token comment">///&lt;é™ä»·å•-æ²ª / æ·± / æ²ªæœŸæƒ / æ·±æœŸæƒ ï¼ˆé™¤æ™®é€šè‚¡ç¥¨ä¸šåŠ¡å¤–ï¼Œå…¶ä½™æœªç‰¹æŒ‡çš„ä¸šåŠ¡å‡ä½¿ç”¨æ­¤ç§ç±»å‹ï¼‰</span>
	XTP_PRICE_BEST_OR_CANCEL<span class="token punctuation">,</span>      <span class="token comment">///&lt;å³æ—¶æˆäº¤å‰©ä½™è½¬æ’¤é”€ï¼Œå¸‚ä»·å•-æ·± / æ²ªæœŸæƒ / æ·±æœŸæƒ</span>
	XTP_PRICE_BEST5_OR_LIMIT<span class="token punctuation">,</span>      <span class="token comment">///&lt;æœ€ä¼˜äº”æ¡£å³æ—¶æˆäº¤å‰©ä½™è½¬é™ä»·ï¼Œå¸‚ä»·å•-æ²ª</span>
	XTP_PRICE_BEST5_OR_CANCEL<span class="token punctuation">,</span>     <span class="token comment">///&lt;æœ€ä¼˜5æ¡£å³æ—¶æˆäº¤å‰©ä½™è½¬æ’¤é”€ï¼Œå¸‚ä»·å•-æ²ªæ·± / æ·±æœŸæƒ</span>
	XTP_PRICE_ALL_OR_CANCEL<span class="token punctuation">,</span>       <span class="token comment">///&lt;å…¨éƒ¨æˆäº¤æˆ–æ’¤é”€,å¸‚ä»·å•-æ·± / æ²ªæœŸæƒ / æ·±æœŸæƒ</span>
	XTP_PRICE_FORWARD_BEST<span class="token punctuation">,</span>        <span class="token comment">///&lt;æœ¬æ–¹æœ€ä¼˜ï¼Œå¸‚ä»·å•-æ·± / æ·±æœŸæƒ / æ²ªç§‘åˆ›æ¿</span>
	XTP_PRICE_REVERSE_BEST_LIMIT<span class="token punctuation">,</span>  <span class="token comment">///&lt;å¯¹æ–¹æœ€ä¼˜å‰©ä½™è½¬é™ä»·ï¼Œå¸‚ä»·å•-æ·± / æ²ªæœŸæƒ / æ·±æœŸæƒ / æ²ªç§‘åˆ›æ¿</span>
	XTP_PRICE_LIMIT_OR_CANCEL<span class="token punctuation">,</span>	   <span class="token comment">///&lt;æœŸæƒé™ä»·ç”³æŠ¥FOK</span>
	XTP_PRICE_TYPE_UNKNOWN<span class="token punctuation">,</span>		   <span class="token comment">///&lt;æœªçŸ¥æˆ–è€…æ— æ•ˆä»·æ ¼ç±»å‹</span>
<span class="token punctuation">}</span>XTP_PRICE_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_SIDE_TYPEæ˜¯ä¹°å–æ–¹å‘ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">uint8_t</span> XTP_SIDE_TYPE<span class="token punctuation">;</span>

<span class="token comment">///ä¹°ï¼ˆæ–°è‚¡ç”³è´­ï¼ŒETFä¹°ï¼Œé…è‚¡ï¼Œä¿¡ç”¨äº¤æ˜“ä¸­æ‹…ä¿å“ä¹°ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_BUY</span>            <span class="token expression"><span class="token number">1</span></span></span>
<span class="token comment">///å–ï¼ˆé€†å›è´­ï¼ŒETFå–ï¼Œä¿¡ç”¨äº¤æ˜“ä¸­æ‹…ä¿å“å–ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SELL</span>           <span class="token expression"><span class="token number">2</span></span></span>
<span class="token comment">///ç”³è´­</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_PURCHASE</span>       <span class="token expression"><span class="token number">7</span></span></span>
<span class="token comment">///èµå›</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REDEMPTION</span>     <span class="token expression"><span class="token number">8</span></span></span>
<span class="token comment">///æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SPLIT</span>          <span class="token expression"><span class="token number">9</span></span></span>
<span class="token comment">///åˆå¹¶</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_MERGE</span>          <span class="token expression"><span class="token number">10</span></span></span>
<span class="token comment">///æ”¹ç‰ˆä¹‹åçš„sideçš„å¤‡å…‘ï¼Œæš‚ä¸æ”¯æŒ</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_COVER</span>          <span class="token expression"><span class="token number">11</span></span></span>
<span class="token comment">///æ”¹ç‰ˆä¹‹åçš„sideé”å®šï¼ˆå¯¹åº”å¼€å¹³æ ‡è¯†ä¸ºå¼€ï¼‰/è§£é”ï¼ˆå¯¹åº”å¼€å¹³æ ‡è¯†ä¸ºå¹³ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_FREEZE</span>         <span class="token expression"><span class="token number">12</span></span></span>
<span class="token comment">/// èèµ„ä¹°å…¥</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_MARGIN_TRADE</span>	<span class="token expression"><span class="token number">21</span></span></span>
<span class="token comment">/// èåˆ¸å–å‡º</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SHORT_SELL</span>		<span class="token expression"><span class="token number">22</span></span></span>
<span class="token comment">/// å–åˆ¸è¿˜æ¬¾</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REPAY_MARGIN</span>	<span class="token expression"><span class="token number">23</span></span></span>
<span class="token comment">/// ä¹°åˆ¸è¿˜åˆ¸</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REPAY_STOCK</span>	<span class="token expression"><span class="token number">24</span></span></span>
<span class="token comment">/// ç°é‡‘è¿˜æ¬¾ï¼ˆä¸æ”¾åœ¨æ™®é€šè®¢å•åè®®ï¼Œå¦åŠ è¯·æ±‚å’ŒæŸ¥è¯¢åè®®ï¼‰</span>
<span class="token comment">//#define XTP_SIDE_CASH_REPAY_MARGIN	25</span>
<span class="token comment">/// ç°åˆ¸è¿˜åˆ¸</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_STOCK_REPAY_STOCK</span>	<span class="token expression"><span class="token number">26</span></span></span>
<span class="token comment">/// ä½™åˆ¸åˆ’è½¬</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SURSTK_TRANS</span>       <span class="token expression"><span class="token number">27</span></span></span>
<span class="token comment">/// æ‹…ä¿å“è½¬å…¥</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_GRTSTK_TRANSIN</span>     <span class="token expression"><span class="token number">28</span></span></span>
<span class="token comment">/// æ‹…ä¿å“è½¬å‡º</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_GRTSTK_TRANSOUT</span>    <span class="token expression"><span class="token number">29</span></span></span>

<span class="token comment">///ç»„åˆç­–ç•¥çš„ç»„åˆ</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_COMBINE</span>        <span class="token expression"><span class="token number">31</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT</span>          <span class="token expression"><span class="token number">32</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„ç®¡ç†å‘˜å¼ºåˆ¶æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT_FORCE</span>    <span class="token expression"><span class="token number">33</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„äº¤æ˜“æ‰€å¼ºåˆ¶æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT_FORCE_EXCH</span>    <span class="token expression"><span class="token number">34</span></span></span>

<span class="token comment">///æœªçŸ¥æˆ–è€…æ— æ•ˆä¹°å–æ–¹å‘</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_UNKNOWN</span>        <span class="token expression"><span class="token number">50</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_POSITION_EFFECT_TYPEæ˜¯å¼€å¹³æ ‡è¯†ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">uint8_t</span> XTP_POSITION_EFFECT_TYPE<span class="token punctuation">;</span>

<span class="token comment">/// åˆå§‹å€¼æˆ–æœªçŸ¥å€¼å¼€å¹³æ ‡è¯†ï¼Œé™¤æœŸæƒå¤–ï¼Œå‡ä½¿ç”¨æ­¤å€¼</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_INIT</span>                <span class="token expression"><span class="token number">0</span></span></span>
<span class="token comment">/// å¼€</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_OPEN</span>                <span class="token expression"><span class="token number">1</span></span></span>
<span class="token comment">/// å¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CLOSE</span>               <span class="token expression"><span class="token number">2</span></span></span>
<span class="token comment">/// å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_FORCECLOSE</span>          <span class="token expression"><span class="token number">3</span></span></span>
<span class="token comment">/// å¹³ä»Š</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CLOSETODAY</span>          <span class="token expression"><span class="token number">4</span></span></span>
<span class="token comment">/// å¹³æ˜¨</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CLOSEYESTERDAY</span>      <span class="token expression"><span class="token number">5</span></span></span>
<span class="token comment">/// å¼ºå‡</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_FORCEOFF</span>            <span class="token expression"><span class="token number">6</span></span></span>
<span class="token comment">/// æœ¬åœ°å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_LOCALFORCECLOSE</span>     <span class="token expression"><span class="token number">7</span></span></span>
<span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡è¿½ä¿å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CREDIT_FORCE_COVER</span>  <span class="token expression"><span class="token number">8</span></span></span>
<span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡æ¸…å¿å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CREDIT_FORCE_CLEAR</span>  <span class="token expression"><span class="token number">9</span></span></span>
<span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡åˆçº¦åˆ°æœŸå¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CREDIT_FORCE_DEBT</span>   <span class="token expression"><span class="token number">10</span></span></span>
<span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡æ— æ¡ä»¶å¼ºå¹³</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_CREDIT_FORCE_UNCOND</span> <span class="token expression"><span class="token number">11</span></span></span>
<span class="token comment">/// æœªçŸ¥çš„å¼€å¹³æ ‡è¯†ç±»å‹</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_POSITION_EFFECT_UNKNOWN</span>             <span class="token expression"><span class="token number">12</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_BUSINESS_TYPEè¯åˆ¸ä¸šåŠ¡ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_BUSINESS_TYPE</span>
<span class="token punctuation">{</span>
	XTP_BUSINESS_TYPE_CASH <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token comment">///&lt;æ™®é€šè‚¡ç¥¨ä¸šåŠ¡ï¼ˆè‚¡ç¥¨ä¹°å–ï¼ŒETFä¹°å–ï¼Œæ²ªå¸‚äº¤æ˜“å‹è´§å¸åŸºé‡‘ç­‰ï¼‰</span>
	XTP_BUSINESS_TYPE_IPOS<span class="token punctuation">,</span>                <span class="token comment">///&lt;æ–°è‚¡ç”³è´­ä¸šåŠ¡ï¼ˆå¯¹åº”çš„price typeéœ€é€‰æ‹©é™ä»·ç±»å‹ï¼‰</span>
	XTP_BUSINESS_TYPE_REPO<span class="token punctuation">,</span>                <span class="token comment">///&lt;å›è´­ä¸šåŠ¡ï¼ˆå›½å€ºé€†å›è´­ä¸šåŠ¡å¯¹åº”çš„price typeå¡«ä¸ºé™ä»·ï¼Œsideå¡«ä¸ºå–ï¼‰</span>
	XTP_BUSINESS_TYPE_ETF<span class="token punctuation">,</span>                 <span class="token comment">///&lt;ETFç”³èµä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_MARGIN<span class="token punctuation">,</span>              <span class="token comment">///&lt;èèµ„èåˆ¸ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_DESIGNATION<span class="token punctuation">,</span>         <span class="token comment">///&lt;è½¬æ‰˜ç®¡ï¼ˆæœªæ”¯æŒï¼‰</span>
	XTP_BUSINESS_TYPE_ALLOTMENT<span class="token punctuation">,</span>		   <span class="token comment">///&lt;é…è‚¡ä¸šåŠ¡ï¼ˆå¯¹åº”çš„price typeéœ€é€‰æ‹©é™ä»·ç±»å‹,sideå¡«ä¸ºä¹°ï¼‰</span>
	XTP_BUSINESS_TYPE_STRUCTURED_FUND_PURCHASE_REDEMPTION<span class="token punctuation">,</span>	   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘ç”³èµä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_STRUCTURED_FUND_SPLIT_MERGE<span class="token punctuation">,</span>	   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘æ‹†åˆ†åˆå¹¶ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_MONEY_FUND<span class="token punctuation">,</span>		   <span class="token comment">///&lt;è´§å¸åŸºé‡‘ç”³èµä¸šåŠ¡ï¼ˆæš‚æœªæ”¯æŒï¼Œæ²ªå¸‚äº¤æ˜“å‹è´§å¸åŸºé‡‘çš„ä¹°å–è¯·ä½¿ç”¨æ™®é€šè‚¡ç¥¨ä¸šåŠ¡ï¼‰</span>
    XTP_BUSINESS_TYPE_OPTION<span class="token punctuation">,</span>              <span class="token comment">///&lt;æœŸæƒä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_EXECUTE<span class="token punctuation">,</span>             <span class="token comment">///&lt;è¡Œæƒ</span>
    XTP_BUSINESS_TYPE_FREEZE<span class="token punctuation">,</span>              <span class="token comment">///&lt;é”å®šè§£é”ï¼Œæš‚ä¸æ”¯æŒ</span>
    XTP_BUSINESS_TYPE_OPTION_COMBINE<span class="token punctuation">,</span>      <span class="token comment">///&lt;æœŸæƒç»„åˆç­–ç•¥ ç»„åˆå’Œæ‹†åˆ†ä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_EXECUTE_COMBINE<span class="token punctuation">,</span>     <span class="token comment">///&lt;æœŸæƒè¡Œæƒåˆå¹¶ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_BOND_SWAP_STOCK<span class="token punctuation">,</span>     <span class="token comment">///&lt;å€ºè½¬è‚¡ä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_UNKNOWN<span class="token punctuation">,</span>             <span class="token comment">///&lt;æœªçŸ¥ç±»å‹</span>
<span class="token punctuation">}</span> XTP_BUSINESS_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŠ¥å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæŠ¥å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œéâ€œ0â€è¡¨ç¤ºæŠ¥å•å‘é€æˆåŠŸï¼Œæ­¤æ—¶ç­‰åŒä¸ä¼ å…¥çš„order_xtp_idã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŠ¥å…¥ä¸€ç¬”é™ä»·å•ï¼Œä»¥9.01çš„ä»·æ ¼ä¹°å…¥æ²ªå¸‚&quot;600000&quot;çš„æ™®é€šäº¤æ˜“ï¼Œæ•°é‡1000ã€‚</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span> new_xtp_id <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetANewOrderXTPID</span><span class="token punctuation">(</span>session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	XTPOrderInsertInfo order<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPOrderInsertInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	order<span class="token punctuation">.</span>order_xtp_id <span class="token operator">=</span> new_xtp_id<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;600000&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>business_type <span class="token operator">=</span> XTP_BUSINESS_TYPE_CASH<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>side <span class="token operator">=</span> XTP_SIDE_BUY<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>position_effect <span class="token operator">=</span> XTP_POSITION_EFFECT_INIT<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>price_type <span class="token operator">=</span> XTP_PRICE_LIMIT<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">9.01</span><span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>quantity <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

	<span class="token keyword">uint64_t</span> order_xtp_id <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">InsertOrderExtra</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span> session_id_<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>order_xtp_id <span class="token operator">==</span> new_xtp_id<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// æŠ¥å•å‘é€æˆåŠŸ</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŠ¥å•å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOrderEvent</span><span class="token punctuation">(</span>XTPOrderInfo <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// æŠ¥å•æˆäº¤å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnTradeEvent</span><span class="token punctuation">(</span>XTPTradeReport <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_23-cancelorder" tabindex="-1"><a class="header-anchor" href="#_23-cancelorder"><span>23. CancelOrder</span></a></h3><p>æ’¤å•è¯·æ±‚ã€‚</p><p>å¦‚æœæ’¤å•æˆåŠŸï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOrderEvent()é‡Œè¿”å›åŸå•éƒ¨æ’¤æˆ–è€…å…¨æ’¤çš„æ¶ˆæ¯ï¼Œå¦‚æœä¸æˆåŠŸï¼Œä¼šåœ¨OnCancelOrderError()å“åº”å‡½æ•°ä¸­è¿”å›é”™è¯¯åŸå› ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CancelOrder</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æ’¤é”€çš„å§”æ‰˜å•åœ¨XTPç³»ç»Ÿä¸­çš„ID</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>æ’¤å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ’¤å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæ’¤å•å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„order_cancel_xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ’¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">CancelOrder</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ’¤å•å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOrderEvent</span><span class="token punctuation">(</span>XTPOrderInfo <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// æ’¤å•å‡ºé”™å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnCancelOrderError</span><span class="token punctuation">(</span>XTPOrderCancelInfo <span class="token operator">*</span>cancel_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_24-queryorderbyxtpid" tabindex="-1"><a class="header-anchor" href="#_24-queryorderbyxtpid"><span>24. QueryOrderByXTPID</span></a></h3><p>æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrderByXTPID</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrderByXTPID</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOrder</span><span class="token punctuation">(</span>XTPQueryOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_25-queryorders" tabindex="-1"><a class="header-anchor" href="#_25-queryorders"><span>25. QueryOrders</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æŠ¥å•ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æŠ¥å•ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrders</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOrderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„è®¢å•ç›¸å…³ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŠ¥å•æŸ¥è¯¢è¯·æ±‚-æ¡ä»¶æŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOrderReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///è¯åˆ¸ä»£ç ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥</span>
    <span class="token keyword">char</span>      ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹</span>
    <span class="token keyword">int64_t</span>   begin_time<span class="token punctuation">;</span>
    <span class="token comment">///æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
    <span class="token keyword">int64_t</span>   end_time<span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„æ‰€æœ‰æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrders</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢600000è¿™æ”¯è‚¡ç¥¨åœ¨å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„å…¨éƒ¨æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;600000&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrders</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢600000è¿™æ”¯è‚¡ç¥¨åœ¨22å¹´8æœˆ1æ—¥0æ—¶è‡³15æ—¶çš„å…¨éƒ¨æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;600000&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>begin_time <span class="token operator">=</span> <span class="token number">20220801000000000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>end_time <span class="token operator">=</span> <span class="token number">20220801150000000</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrders</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOrder</span><span class="token punctuation">(</span>XTPQueryOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_26-queryunfinishedorders" tabindex="-1"><a class="header-anchor" href="#_26-queryunfinishedorders"><span>26. QueryUnfinishedOrders</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœªå®Œç»“æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryUnfinishedOrders</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è¯·æ±‚æŸ¥è¯¢æœªå®Œç»“æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryUnfinishedOrders</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOrder</span><span class="token punctuation">(</span>XTPQueryOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_27-queryordersbypage" tabindex="-1"><a class="header-anchor" href="#_27-queryordersbypage"><span>27. QueryOrdersByPage</span></a></h3><p>åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrdersByPage</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOrderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆquery_param.referenceå¡«0</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢è®¢å•è¯·æ±‚-åˆ†é¡µæŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOrderByPageReq</span>
<span class="token punctuation">{</span>
	<span class="token comment">///éœ€è¦æŸ¥è¯¢çš„è®¢å•æ¡æ•°</span>
    <span class="token keyword">int64_t</span>         req_count<span class="token punctuation">;</span>
	<span class="token comment">///ä¸Šä¸€æ¬¡æ”¶åˆ°çš„æŸ¥è¯¢è®¢å•ç»“æœä¸­å¸¦å›æ¥çš„ç´¢å¼•ï¼Œå¦‚æœæ˜¯ä»å¤´æŸ¥è¯¢ï¼Œè¯·ç½®0</span>
    <span class="token keyword">int64_t</span>         reference<span class="token punctuation">;</span>
	<span class="token comment">///ä¿ç•™å­—æ®µ</span>
    <span class="token keyword">int64_t</span>         reserved<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ä»ç´¢å¼•åˆå§‹å¼€å§‹åˆ†é¡µæŸ¥è¯¢1000æ¡æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderByPageReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderByPageReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	query_param<span class="token punctuation">.</span>req_count <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>reference <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrdersByPage</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOrderByPage</span><span class="token punctuation">(</span>XTPQueryOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> req_count<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> order_sequence<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> query_reference<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_28-queryorderbyxtpidex" tabindex="-1"><a class="header-anchor" href="#_28-queryorderbyxtpidex"><span>28. QueryOrderByXTPIDEx</span></a></h3><p>æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrderByXTPIDEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrderByXTPIDEx</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOrderEx</span><span class="token punctuation">(</span>XTPOrderInfoEx <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_29-queryordersex" tabindex="-1"><a class="header-anchor" href="#_29-queryordersex"><span>29. QueryOrdersEx</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æŠ¥å•ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æŠ¥å•ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrdersEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOrderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„è®¢å•ç›¸å…³ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŠ¥å•æŸ¥è¯¢è¯·æ±‚-æ¡ä»¶æŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOrderReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///è¯åˆ¸ä»£ç ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥</span>
    <span class="token keyword">char</span>      ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹</span>
    <span class="token keyword">int64_t</span>   begin_time<span class="token punctuation">;</span>
    <span class="token comment">///æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
    <span class="token keyword">int64_t</span>   end_time<span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„æ‰€æœ‰æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrdersEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢600000è¿™æ”¯è‚¡ç¥¨åœ¨å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„å…¨éƒ¨æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;600000&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrdersEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢600000è¿™æ”¯è‚¡ç¥¨åœ¨21å¹´8æœˆ1æ—¥0æ—¶è‡³15æ—¶çš„å…¨éƒ¨æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;600000&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>begin_time <span class="token operator">=</span> <span class="token number">20210801000000000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>end_time <span class="token operator">=</span> <span class="token number">20210801150000000</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrdersEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOrderEx</span><span class="token punctuation">(</span>XTPOrderInfoEx <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_30-queryunfinishedordersex" tabindex="-1"><a class="header-anchor" href="#_30-queryunfinishedordersex"><span>30. QueryUnfinishedOrdersEx</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœªå®Œç»“æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryUnfinishedOrdersEx</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è¯·æ±‚æŸ¥è¯¢æœªå®Œç»“æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryUnfinishedOrdersEx</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOrderEx</span><span class="token punctuation">(</span>XTPOrderInfoEx <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_31-queryordersbypageex" tabindex="-1"><a class="header-anchor" href="#_31-queryordersbypageex"><span>31. QueryOrdersByPageEx</span></a></h3><p>åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOrdersByPageEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOrderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆquery_param.referenceå¡«0</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢è®¢å•è¯·æ±‚-åˆ†é¡µæŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOrderByPageReq</span>
<span class="token punctuation">{</span>
	<span class="token comment">///éœ€è¦æŸ¥è¯¢çš„è®¢å•æ¡æ•°</span>
    <span class="token keyword">int64_t</span>         req_count<span class="token punctuation">;</span>
	<span class="token comment">///ä¸Šä¸€æ¬¡æ”¶åˆ°çš„æŸ¥è¯¢è®¢å•ç»“æœä¸­å¸¦å›æ¥çš„ç´¢å¼•ï¼Œå¦‚æœæ˜¯ä»å¤´æŸ¥è¯¢ï¼Œè¯·ç½®0</span>
    <span class="token keyword">int64_t</span>         reference<span class="token punctuation">;</span>
	<span class="token comment">///ä¿ç•™å­—æ®µ</span>
    <span class="token keyword">int64_t</span>         reserved<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ä»ç´¢å¼•åˆå§‹å¼€å§‹åˆ†é¡µæŸ¥è¯¢1000æ¡æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderByPageReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderByPageReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	query_param<span class="token punctuation">.</span>req_count <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>reference <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOrdersByPageEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOrderByPageEx</span><span class="token punctuation">(</span>XTPOrderInfoEx <span class="token operator">*</span>order_info<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> req_count<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> order_sequence<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> query_reference<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_32-querytradesbyxtpid" tabindex="-1"><a class="header-anchor" href="#_32-querytradesbyxtpid"><span>32. QueryTradesByXTPID</span></a></h3><p>æ ¹æ®å§”æ‰˜ç¼–å·è¯·æ±‚æŸ¥è¯¢ç›¸å…³æˆäº¤ã€‚</p><p>æ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryTradesByXTPID</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„å§”æ‰˜ç¼–å·ï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ ¹æ®å§”æ‰˜ç¼–å·è¯·æ±‚æŸ¥è¯¢ç›¸å…³æˆäº¤</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryTradesByXTPID</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryTrade</span><span class="token punctuation">(</span>XTPQueryTradeRsp <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_33-querytrades" tabindex="-1"><a class="header-anchor" href="#_33-querytrades"><span>33. QueryTrades</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢å·²æˆäº¤ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æˆäº¤å›æŠ¥ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryTrades</span><span class="token punctuation">(</span>XTPQueryTraderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„æˆäº¤å›æŠ¥ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æˆäº¤å›æŠ¥è¯·æ±‚-æŸ¥è¯¢æ¡ä»¶</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryTraderReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///è¯åˆ¸ä»£ç ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥</span>
    <span class="token keyword">char</span>      ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///å¼€å§‹æ—¶é—´ï¼Œæ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹</span>
    <span class="token keyword">int64_t</span>   begin_time<span class="token punctuation">;</span> 
    <span class="token comment">///ç»“æŸæ—¶é—´ï¼Œæ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
    <span class="token keyword">int64_t</span>   end_time<span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„æ‰€æœ‰æˆäº¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryTraderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryTraderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryTrades</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢600000è¿™æ”¯è‚¡ç¥¨åœ¨å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„å…¨éƒ¨æˆäº¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryTraderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryTraderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;600000&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryTrades</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢600000è¿™æ”¯è‚¡ç¥¨åœ¨21å¹´8æœˆ1æ—¥0æ—¶è‡³15æ—¶çš„å…¨éƒ¨æˆäº¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryTraderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryTraderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;600000&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>begin_time <span class="token operator">=</span> <span class="token number">20210801000000000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>end_time <span class="token operator">=</span> <span class="token number">20210801150000000</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryTrades</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryTrade</span><span class="token punctuation">(</span>XTPQueryTradeRsp <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_34-querytradesbypage" tabindex="-1"><a class="header-anchor" href="#_34-querytradesbypage"><span>34. QueryTradesByPage</span></a></h3><p>åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æˆäº¤å›æŠ¥ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryTradesByPage</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryTraderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦åˆ†é¡µæŸ¥è¯¢æˆäº¤å›æŠ¥çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆreferenceå¡«0</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_idï¼Œç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æˆäº¤å›æŠ¥è¯·æ±‚-åˆ†é¡µæŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryTraderByPageReq</span>
<span class="token punctuation">{</span>
	<span class="token comment">///éœ€è¦æŸ¥è¯¢çš„æˆäº¤å›æŠ¥æ¡æ•°</span>
	<span class="token keyword">int64_t</span>         req_count<span class="token punctuation">;</span>
	<span class="token comment">///ä¸Šä¸€æ¬¡æ”¶åˆ°çš„æŸ¥è¯¢æˆäº¤å›æŠ¥ç»“æœä¸­å¸¦å›æ¥çš„ç´¢å¼•ï¼Œå¦‚æœæ˜¯ä»å¤´æŸ¥è¯¢ï¼Œè¯·ç½®0</span>
	<span class="token keyword">int64_t</span>         reference<span class="token punctuation">;</span>
	<span class="token comment">///ä¿ç•™å­—æ®µ</span>
	<span class="token keyword">int64_t</span>         reserved<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æ— </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ä»ç´¢å¼•åˆå§‹å¼€å§‹åˆ†é¡µæŸ¥è¯¢1000æ¡æˆäº¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryTraderByPageReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryTraderByPageReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	query_param<span class="token punctuation">.</span>req_count <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>reference <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryTradesByPage</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryTradeByPage</span><span class="token punctuation">(</span>XTPQueryTradeRsp <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> req_count<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> trade_sequence<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> query_reference<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_35-queryposition" tabindex="-1"><a class="header-anchor" href="#_35-queryposition"><span>35. QueryPosition</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æŠ•èµ„è€…æŒä»“ã€‚</p><p>è¯¥æ–¹æ³•å¦‚æœç”¨æˆ·æä¾›äº†åˆçº¦ä»£ç ï¼Œåˆ™ä¼šæŸ¥è¯¢æ­¤åˆçº¦çš„æŒä»“ä¿¡æ¯ï¼Œå¦‚æœåˆçº¦ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰æŒä»“ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryPosition</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>ticker<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> XTP_MARKET_TYPE market <span class="token operator">=</span> XTP_MKT_INIT<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>Tickerï¼šéœ€è¦æŸ¥è¯¢çš„æŒä»“åˆçº¦ä»£ç ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>marketï¼šéœ€è¦æŸ¥è¯¢æŒä»“çš„åˆçº¦æ‰€åœ¨å¸‚åœºï¼Œé»˜è®¤ä¸º0ï¼Œä»…åœ¨åˆçº¦ä»£ç ä¸ä¸ºNULLçš„æ—¶å€™ï¼Œæ‰ä¼šä½¿ç”¨ã€‚marketä¸æŒ‡å®šæˆ–è€…ä¸ºé0çš„å…¶ä»–éæœ‰æ•ˆå€¼æƒ…å†µä¸‹ï¼Œå¯èƒ½ç”±äºè¯åˆ¸ä»£ç æ²ªæ·±2ä¸ªå¸‚åœºæœ‰é‡å¤ï¼Œè€Œå¯¼è‡´æŸ¥è¯¢ä¸åˆ°æ‰€éœ€çš„æŒä»“ã€‚å¦‚æœæƒ³æ­£ç¡®æŸ¥è¯¢æŒ‡å®šæŒä»“ï¼Œè¯·æŒ‡å®šmarket</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_MARKET_TYPEå¸‚åœºç±»å‹ï¼Œäº¤æ˜“é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_MARKET_TYPE</span>
<span class="token punctuation">{</span>
    XTP_MKT_INIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">///&lt;åˆå§‹åŒ–å€¼æˆ–è€…æœªçŸ¥</span>
    XTP_MKT_SZ_A <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">///&lt;æ·±åœ³Aè‚¡</span>
    XTP_MKT_SH_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;ä¸Šæµ·Aè‚¡</span>
    XTP_MKT_BJ_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;åŒ—äº¬Aè‚¡</span>
    XTP_MKT_HK<span class="token punctuation">,</span>      <span class="token comment">///&lt;æ¸¯è‚¡</span>
    XTP_MKT_UNKNOWN   <span class="token comment">///&lt;æœªçŸ¥äº¤æ˜“å¸‚åœºç±»å‹</span>
<span class="token punctuation">}</span>XTP_MARKET_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ²ªå¸‚600000è¿™æ”¯è‚¡ç¥¨çš„æŒä»“</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryPosition</span><span class="token punctuation">(</span><span class="token string">&quot;600000&quot;</span><span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_idï¼Œ XTP_MKT_SH_A<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å…¨å¸‚åœºæŒä»“</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryPosition</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">,</span> XTP_MKT_INIT<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryPosition</span><span class="token punctuation">(</span>XTPQueryStkPositionRsp <span class="token operator">*</span>position<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_36-queryasset" tabindex="-1"><a class="header-anchor" href="#_36-queryasset"><span>36. QueryAsset</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢èµ„äº§ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryAsset</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢èµ„é‡‘</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryAsset</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryAsset</span><span class="token punctuation">(</span>XTPQueryAssetRsp <span class="token operator">*</span>asset<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_37-querystructuredfund" tabindex="-1"><a class="header-anchor" href="#_37-querystructuredfund"><span>37. QueryStructuredFund</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢åˆ†çº§åŸºé‡‘ã€‚æ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryStructuredFund</span><span class="token punctuation">(</span>XTPQueryStructuredFundInfoReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„åˆ†çº§åŸºé‡‘ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­æ¯åŸºé‡‘ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„æ¯åŸºé‡‘ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­äº¤æ˜“å¸‚åœºä¸èƒ½ä¸ºç©º</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢åˆ†çº§åŸºé‡‘ä¿¡æ¯ç»“æ„ä½“</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryStructuredFundInfoReq</span>
<span class="token punctuation">{</span>
	XTP_EXCHANGE_TYPE   exchange_id<span class="token punctuation">;</span>  <span class="token comment">///&lt;äº¤æ˜“æ‰€ä»£ç ï¼Œä¸å¯ä¸ºç©º</span>
	<span class="token keyword">char</span>                sf_ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘æ¯åŸºé‡‘ä»£ç ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰çš„åˆ†çº§åŸºé‡‘</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_EXCHANGE_TYPEæ˜¯äº¤æ˜“æ‰€ç±»å‹ï¼Œè¡Œæƒ…é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_EXCHANGE_TYPE</span>
<span class="token punctuation">{</span>
	XTP_EXCHANGE_SH <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>	<span class="token comment">///&lt;ä¸Šè¯</span>
	XTP_EXCHANGE_SZ<span class="token punctuation">,</span>		<span class="token comment">///&lt;æ·±è¯</span>
	XTP_EXCHANGE_NQ<span class="token punctuation">,</span>		<span class="token comment">///&lt;æ–°ä¸‰æ¿ å…¨å›½ä¸­å°ä¼ä¸šè‚¡ä»½è½¬è®©ç³»ç»Ÿ</span>
    XTP_EXCHANGE_UNKNOWN	<span class="token comment">///&lt;ä¸å­˜åœ¨çš„äº¤æ˜“æ‰€ç±»å‹</span>
<span class="token punctuation">}</span>XTP_EXCHANGE_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ·±è¯äº¤æ˜“æ‰€164809è¿™æ”¯æ¯åŸºé‡‘çš„åˆ†çº§åŸºé‡‘</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryStructuredFundInfoReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryStructuredFundInfoReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>exchange_id <span class="token operator">=</span> XTP_EXCHANGE_SZ<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_sfticker <span class="token operator">=</span> <span class="token string">&quot;164809&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>sf_ticker<span class="token punctuation">,</span> stdstr_sfticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryStructuredFund</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ¯åŸºé‡‘ä»£ç å¯ä¸ºç©ºï¼ŒæŸ¥è¯¢æ·±è¯äº¤æ˜“æ‰€æ‰€æœ‰æ¯åŸºé‡‘çš„åˆ†çº§åŸºé‡‘</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryStructuredFundInfoReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryStructuredFundInfoReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>exchange_id <span class="token operator">=</span> XTP_EXCHANGE_SZ<span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryStructuredFund</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryStructuredFund</span><span class="token punctuation">(</span>XTPStructuredFundInfo <span class="token operator">*</span>fund_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_38-fundtransfer" tabindex="-1"><a class="header-anchor" href="#_38-fundtransfer"><span>38. FundTransfer</span></a></h3><p>èµ„é‡‘åˆ’æ‹¨è¯·æ±‚ã€‚æ­¤å‡½æ•°æ”¯æŒä¸€å·ä¸¤ä¸­å¿ƒèŠ‚ç‚¹ä¹‹é—´çš„èµ„é‡‘åˆ’æ‹¨ï¼Œæ³¨æ„èµ„é‡‘åˆ’æ‹¨çš„æ–¹å‘ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">FundTransfer</span><span class="token punctuation">(</span>XTPFundTransferReq <span class="token operator">*</span>fund_transfer<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>fund_transferï¼šèµ„é‡‘åˆ’æ‹¨çš„è¯·æ±‚ä¿¡æ¯</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///ç”¨æˆ·èµ„é‡‘è¯·æ±‚</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPFundTransferReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///èµ„é‡‘å†…è½¬ç¼–å·ï¼Œæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œç±»ä¼¼äºxtp_id</span>
    <span class="token keyword">uint64_t</span>	serial_id<span class="token punctuation">;</span>
	<span class="token comment">///èµ„é‡‘è´¦æˆ·ä»£ç </span>
	<span class="token keyword">char</span>        fund_account<span class="token punctuation">[</span>XTP_ACCOUNT_NAME_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token comment">///èµ„é‡‘è´¦æˆ·å¯†ç </span>
	<span class="token keyword">char</span>	    password<span class="token punctuation">[</span>XTP_ACCOUNT_PASSWORD_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token comment">///é‡‘é¢</span>
	<span class="token keyword">double</span>	    amount<span class="token punctuation">;</span>
	<span class="token comment">///å†…è½¬ç±»å‹</span>
	XTP_FUND_TRANSFER_TYPE	transfer_type<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_FUND_TRANSFER_TYPEæ˜¯èµ„é‡‘æµè½¬æ–¹å‘ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_FUND_TRANSFER_TYPE</span>
<span class="token punctuation">{</span>
    XTP_FUND_TRANSFER_OUT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>		<span class="token comment">///&lt;è½¬å‡º ä»XTPè½¬å‡ºåˆ°æŸœå°</span>
    XTP_FUND_TRANSFER_IN<span class="token punctuation">,</span>	        <span class="token comment">///&lt;è½¬å…¥ ä»æŸœå°è½¬å…¥XTP</span>
    XTP_FUND_INTER_TRANSFER_OUT<span class="token punctuation">,</span>    <span class="token comment">///&lt;è·¨èŠ‚ç‚¹è½¬å‡º ä»æœ¬XTPèŠ‚ç‚¹1ï¼Œè½¬å‡ºåˆ°å¯¹ç«¯XTPèŠ‚ç‚¹2ï¼ŒXTPæœåŠ¡å™¨ä¹‹é—´åˆ’æ‹¨ï¼Œåªèƒ½è·¨è´¦æˆ·ç”¨æˆ·ä½¿ç”¨</span>
    XTP_FUND_INTER_TRANSFER_IN<span class="token punctuation">,</span>     <span class="token comment">///&lt;è·¨èŠ‚ç‚¹è½¬å…¥ ä»å¯¹ç«¯XTPèŠ‚ç‚¹2ï¼Œè½¬å…¥åˆ°æœ¬XTPèŠ‚ç‚¹1ï¼ŒXTPæœåŠ¡å™¨ä¹‹é—´åˆ’æ‹¨ï¼Œåªèƒ½è·¨è´¦æˆ·ç”¨æˆ·ä½¿ç”¨</span>
    XTP_FUND_INTER_TRANSFER_REPAY_OUT<span class="token punctuation">,</span> <span class="token comment">///&lt;è·¨èŠ‚ç‚¹è½¬å‡º èåˆ¸å–å‡ºèµ„é‡‘ ä»æœ¬XTPèŠ‚ç‚¹1ï¼Œè½¬å‡ºåˆ°å¯¹ç«¯XTPèŠ‚ç‚¹2ï¼ŒXTPæœåŠ¡å™¨ä¹‹é—´åˆ’æ‹¨</span>
    XTP_FUND_INTER_TRANSFER_REPAY_IN<span class="token punctuation">,</span> <span class="token comment">///&lt;è·¨èŠ‚ç‚¹è½¬å…¥ èåˆ¸å–å‡ºèµ„é‡‘ ä»å¯¹ç«¯XTPèŠ‚ç‚¹2ï¼Œè½¬å…¥åˆ°æœ¬XTPèŠ‚ç‚¹1ï¼ŒXTPæœåŠ¡å™¨ä¹‹é—´åˆ’æ‹¨</span>
    XTP_FUND_INTER_TRANSFER_CONTRACT_OUT<span class="token punctuation">,</span> <span class="token comment">///&lt;è·¨èŠ‚ç‚¹è½¬å‡º æˆä¿¡é¢åº¦ ä»æœ¬XTPèŠ‚ç‚¹1ï¼Œè½¬å‡ºåˆ°å¯¹ç«¯XTPèŠ‚ç‚¹2ï¼ŒXTPæœåŠ¡å™¨ä¹‹é—´åˆ’æ‹¨</span>
    XTP_FUND_INTER_TRANSFER_CONTRACT_IN<span class="token punctuation">,</span> <span class="token comment">///&lt;è·¨èŠ‚ç‚¹è½¬å…¥ æˆä¿¡é¢åº¦ ä»å¯¹ç«¯XTPèŠ‚ç‚¹2ï¼Œè½¬å…¥åˆ°æœ¬XTPèŠ‚ç‚¹1ï¼ŒXTPæœåŠ¡å™¨ä¹‹é—´åˆ’æ‹¨</span>
    XTP_FUND_TRANSFER_UNKNOWN		<span class="token comment">///&lt;æœªçŸ¥ç±»å‹</span>
<span class="token punctuation">}</span>XTP_FUND_TRANSFER_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>èµ„é‡‘åˆ’æ‹¨è®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„serial_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// å‘é€æŸè´¦æˆ·ä»æŸœå°è½¬å…¥XTPçš„10000.01èµ„é‡‘åˆ’æ‹¨è¯·æ±‚ï¼Œå…·ä½“å‚æ•°éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPFundTransferReq fund_transfer<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>fund_transfer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPFundTransferReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string stdstr_fund_account <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxx&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_password <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>fund_transfer<span class="token punctuation">.</span>fund_account<span class="token punctuation">,</span> stdstr_fund_account<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_ACCOUNT_NAME_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>fund_transfer<span class="token punctuation">.</span>password<span class="token punctuation">,</span> stdstr_password<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_ACCOUNT_PASSWORD_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	fund_transfer<span class="token punctuation">.</span>amount <span class="token operator">=</span> <span class="token number">10000.01</span><span class="token punctuation">;</span>
	fund_transfer<span class="token punctuation">.</span>transfer_type <span class="token operator">=</span> XTP_FUND_TRANSFER_IN<span class="token punctuation">;</span>

	<span class="token keyword">uint64_t</span> serial_id <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">FundTransfer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>fund_transfer<span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>serial_id <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// å‘é€å¤±è´¥ï¼Œè·å–å¤±è´¥åŸå› </span>
		XTPRI<span class="token operator">*</span> error_info <span class="token operator">=</span> m_pTraderApi<span class="token operator">-&gt;</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Fund transfer send error, &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_id <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_msg <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// å‘é€æˆåŠŸè¿”å›çš„serial_idï¼Œä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€</span>
		<span class="token comment">//TODO:å…¶ä»–é€»è¾‘</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnFundTransfer</span><span class="token punctuation">(</span>XTPFundTransferNotice <span class="token operator">*</span>fund_transfer_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_39-queryfundtransfer" tabindex="-1"><a class="header-anchor" href="#_39-queryfundtransfer"><span>39. QueryFundTransfer</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢èµ„é‡‘åˆ’æ‹¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryFundTransfer</span><span class="token punctuation">(</span>XTPQueryFundTransferLogReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šæŸ¥è¯¢æ—¶éœ€è¦æä¾›çš„ä¿¡æ¯</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///èµ„é‡‘å†…è½¬æµæ°´æŸ¥è¯¢è¯·æ±‚ä¸å“åº”</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryFundTransferLogReq</span> <span class="token punctuation">{</span>
    <span class="token comment">///èµ„é‡‘å†…è½¬ç¼–å·</span>
    <span class="token keyword">uint64_t</span>	serial_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ç¼–å·ä¸º1234567890123456çš„èµ„é‡‘å†…è½¬è®°å½•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryFundTransferLogReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryFundTransferLogReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// èµ„é‡‘å†…è½¬ç¼–å·éœ€æ›¿æ¢æˆç”¨æˆ·è‡ªå·±çš„id</span>
	query_param<span class="token punctuation">.</span>serial_id <span class="token operator">=</span> <span class="token number">1234567890123456</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryFundTransfer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryFundTransfer</span><span class="token punctuation">(</span>XTPFundTransferNotice <span class="token operator">*</span>fund_transfer_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_40-queryotherserverfund" tabindex="-1"><a class="header-anchor" href="#_40-queryotherserverfund"><span>40. QueryOtherServerFund</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢å…¶ä»–èŠ‚ç‚¹å¯ç”¨èµ„é‡‘ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOtherServerFund</span><span class="token punctuation">(</span>XTPFundQueryReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šæŸ¥è¯¢æ—¶éœ€è¦æä¾›çš„ä¿¡æ¯</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///ç”¨æˆ·èµ„é‡‘æŸ¥è¯¢è¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPFundQueryReq</span>
<span class="token punctuation">{</span>
	<span class="token comment">///èµ„é‡‘è´¦æˆ·ä»£ç </span>
	<span class="token keyword">char</span>        fund_account<span class="token punctuation">[</span>XTP_ACCOUNT_NAME_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token comment">///èµ„é‡‘è´¦æˆ·å¯†ç </span>
	<span class="token keyword">char</span>	    password<span class="token punctuation">[</span>XTP_ACCOUNT_PASSWORD_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token comment">///æŸ¥è¯¢ç±»å‹</span>
	XTP_FUND_QUERY_TYPE	query_type<span class="token punctuation">;</span>
	<span class="token comment">///é¢„ç•™å­—æ®µï¼Œç”¨æˆ·æ— éœ€å¡«å†™</span>
	<span class="token keyword">uint64_t</span>	unknown<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_FUND_QUERY_TYPEæ˜¯æŸœå°èµ„é‡‘æŸ¥è¯¢ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_FUND_QUERY_TYPE</span>
<span class="token punctuation">{</span>
	XTP_FUND_QUERY_JZ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>		<span class="token comment">///&lt;æŸ¥è¯¢é‡‘è¯ä¸»æŸœå°å¯è½¬èµ„é‡‘</span>
	XTP_FUND_QUERY_INTERNAL<span class="token punctuation">,</span>	<span class="token comment">///&lt;æŸ¥è¯¢ä¸€è´¦å·ä¸¤ä¸­å¿ƒè®¾ç½®æ—¶ï¼Œå¯¹æ–¹èŠ‚ç‚¹çš„èµ„é‡‘</span>
	XTP_FUND_QUERY_INTERNAL_REPAY<span class="token punctuation">,</span>	<span class="token comment">///&lt;æŸ¥è¯¢ä¸€è´¦å·ä¸¤ä¸­å¿ƒè®¾ç½®æ—¶ï¼Œå¯¹æ–¹èŠ‚ç‚¹çš„èåˆ¸å–ä½™é¢èµ„é‡‘ </span>
	XTP_FUND_QUERY_INTERNAL_CONTRACT<span class="token punctuation">,</span> <span class="token comment">///&lt;æŸ¥è¯¢ä¸€è´¦å·ä¸¤ä¸­å¿ƒè®¾ç½®æ—¶ï¼Œå¯¹æ–¹èŠ‚ç‚¹çš„æˆä¿¡é¢åº¦</span>
	XTP_FUND_QUERY_UNKNOWN		<span class="token comment">///&lt;æœªçŸ¥ç±»å‹</span>
<span class="token punctuation">}</span>XTP_FUND_QUERY_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// ç”¨æˆ·èµ„é‡‘è´¦æˆ·çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_ACCOUNT_NAME_LEN</span>        <span class="token expression"><span class="token number">16</span></span></span>
<span class="token comment">/// ç”¨æˆ·èµ„é‡‘è´¦æˆ·çš„å¯†ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_ACCOUNT_PASSWORD_LEN</span>	<span class="token expression"><span class="token number">64</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æŸè´¦æˆ·åœ¨é‡‘è¯ä¸»æŸœå°çš„å¯è½¬èµ„é‡‘ï¼Œå…·ä½“å‚æ•°éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPFundQueryReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPFundQueryReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>query_type <span class="token operator">=</span> XTP_FUND_QUERY_JZ<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_fund_account <span class="token operator">=</span> <span class="token string">&quot;xxxxxxx&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_password <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>fund_account<span class="token punctuation">,</span> stdstr_fund_account<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_ACCOUNT_NAME_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>password<span class="token punctuation">,</span> stdstr_password<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_ACCOUNT_PASSWORD_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOtherServerFund</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOtherServerFund</span><span class="token punctuation">(</span>XTPFundQueryRsp <span class="token operator">*</span>fund_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_41-queryetf" tabindex="-1"><a class="header-anchor" href="#_41-queryetf"><span>41. QueryETF</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ETFæ¸…å•æ–‡ä»¶ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryETF</span><span class="token punctuation">(</span>XTPQueryETFBaseReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„ETFæ¸…å•æ–‡ä»¶çš„ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„ETFåˆçº¦ä»£ç ï¼Œmarketå­—æ®µä¹Ÿå¯ä»¥ä¸ºåˆå§‹å€¼ï¼Œåˆ™é»˜è®¤æ‰€æœ‰å¸‚åœºçš„ETFåˆçº¦</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢è‚¡ç¥¨ETFåˆçº¦åŸºæœ¬æƒ…å†µ--è¯·æ±‚ç»“æ„ä½“,</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryETFBaseReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE    market<span class="token punctuation">;</span>
    <span class="token comment">///ETFä¹°å–ä»£ç </span>
    <span class="token keyword">char</span>               ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_MARKET_TYPEå¸‚åœºç±»å‹ï¼Œäº¤æ˜“é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_MARKET_TYPE</span>
<span class="token punctuation">{</span>
    XTP_MKT_INIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">///&lt;åˆå§‹åŒ–å€¼æˆ–è€…æœªçŸ¥</span>
    XTP_MKT_SZ_A <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">///&lt;æ·±åœ³Aè‚¡</span>
    XTP_MKT_SH_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;ä¸Šæµ·Aè‚¡</span>
    XTP_MKT_BJ_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;åŒ—äº¬Aè‚¡</span>
    XTP_MKT_HK<span class="token punctuation">,</span>      <span class="token comment">///&lt;æ¸¯è‚¡</span>
    XTP_MKT_UNKNOWN   <span class="token comment">///&lt;æœªçŸ¥äº¤æ˜“å¸‚åœºç±»å‹</span>
<span class="token punctuation">}</span>XTP_MARKET_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// å¯ä»¥æŒ‡å®štickerï¼ŒæŸ¥è¯¢å•ä¸ªETF</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryETFBaseReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryETFBaseReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryETF</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// å¯ä»¥tickerä¸º0,æŸ¥è¯¢å…¨å¸‚åœº</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryETFBaseReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryETFBaseReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryETF</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryETF</span><span class="token punctuation">(</span>XTPQueryETFBaseRsp <span class="token operator">*</span>etf_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_42-queryetftickerbasket" tabindex="-1"><a class="header-anchor" href="#_42-queryetftickerbasket"><span>42. QueryETFTickerBasket</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ETFè‚¡ç¥¨ç¯®ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryETFTickerBasket</span><span class="token punctuation">(</span>XTPQueryETFComponentReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢è‚¡ç¥¨ç¯®çš„çš„ETFåˆçº¦ï¼Œå…¶ä¸­åˆçº¦ä»£ç ä¸å¯ä»¥ä¸ºç©ºï¼Œmarketå­—æ®µä¹Ÿå¿…é¡»æŒ‡å®š</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢è‚¡ç¥¨ETFåˆçº¦æˆåˆ†è‚¡ä¿¡æ¯--è¯·æ±‚ç»“æ„ä½“,è¯·æ±‚å‚æ•°ä¸º:äº¤æ˜“å¸‚åœº+ETFä¹°å–ä»£ç </span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPQueryETFComponentReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE     market<span class="token punctuation">;</span>
    <span class="token comment">///ETFä¹°å–ä»£ç </span>
    <span class="token keyword">char</span>                ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>XTPQueryETFComponentReq<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ²ªå¸‚æŸæ”¯ETFçš„æˆåˆ†è‚¡ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryETFComponentReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryETFComponentReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryETFTickerBasket</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryETFBasket</span><span class="token punctuation">(</span>XTPQueryETFComponentRsp <span class="token operator">*</span>etf_component_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_43-queryipoinfolist" tabindex="-1"><a class="header-anchor" href="#_43-queryipoinfolist"><span>43. QueryIPOInfoList</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ä»Šæ—¥æ–°è‚¡ç”³è´­ä¿¡æ¯åˆ—è¡¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryIPOInfoList</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ä»Šæ—¥æ–°è‚¡ç”³è´­ä¿¡æ¯åˆ—è¡¨</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryIPOInfoList</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryIPOInfoList</span><span class="token punctuation">(</span>XTPQueryIPOTickerRsp <span class="token operator">*</span>ipo_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_44-queryipoquotainfo" tabindex="-1"><a class="header-anchor" href="#_44-queryipoquotainfo"><span>44. QueryIPOQuotaInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ç”¨æˆ·æ–°è‚¡ç”³è´­é¢åº¦ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryIPOQuotaInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ç”¨æˆ·æ–°è‚¡ç”³è´­é¢åº¦ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryIPOQuotaInfo</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryIPOQuotaInfo</span><span class="token punctuation">(</span>XTPQueryIPOQuotaRsp <span class="token operator">*</span>quota_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_45-querybondipoinfolist" tabindex="-1"><a class="header-anchor" href="#_45-querybondipoinfolist"><span>45. QueryBondIPOInfoList</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ä»Šæ—¥å¯è½¬å€ºç”³è´­ä¿¡æ¯åˆ—è¡¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryBondIPOInfoList</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ç”¨æˆ·ä»Šæ—¥å¯è½¬å€ºç”³è´­ä¿¡æ¯åˆ—è¡¨</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryBondIPOInfoList</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span>  <span class="token function">OnQueryBondIPOInfoList</span><span class="token punctuation">(</span>XTPQueryIPOTickerRsp <span class="token operator">*</span>ipo_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_46-queryoptionauctioninfo" tabindex="-1"><a class="header-anchor" href="#_46-queryoptionauctioninfo"><span>46. QueryOptionAuctionInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœŸæƒåˆçº¦ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionAuctionInfo</span><span class="token punctuation">(</span>XTPQueryOptionAuctionInfoReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span>
<span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„æœŸæƒåˆçº¦çš„ç­›é€‰æ¡ä»¶ï¼Œå¯ä»¥ä¸ºNULLï¼ˆä¸ºNULLè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰çš„æœŸæƒåˆçº¦ï¼‰</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æœŸæƒç«ä»·äº¤æ˜“ä¸šåŠ¡å‚è€ƒä¿¡æ¯--è¯·æ±‚ç»“æ„ä½“,è¯·æ±‚å‚æ•°ä¸º:äº¤æ˜“å¸‚åœº+8ä½æœŸæƒä»£ç </span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptionAuctionInfoReq</span> <span class="token punctuation">{</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE     market<span class="token punctuation">;</span>
    <span class="token comment">///8ä½æœŸæƒåˆçº¦ä»£ç </span>
    <span class="token keyword">char</span>                ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ·±å¸‚90000900è¿™ä»½æœŸæƒåˆçº¦è¯¦æƒ…</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptionAuctionInfoReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptionAuctionInfoReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SZ_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;90000900&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionAuctionInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ·±å¸‚æ‰€æœ‰æœŸæƒåˆçº¦è¯¦æƒ…</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptionAuctionInfoReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptionAuctionInfoReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SZ_A<span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionAuctionInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ‰€æœ‰æœŸæƒåˆçº¦è¯¦æƒ…</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptionAuctionInfoReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptionAuctionInfoReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionAuctionInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionAuctionInfo</span><span class="token punctuation">(</span>XTPQueryOptionAuctionInfoRsp <span class="token operator">*</span>option_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_47-creditcashrepay" tabindex="-1"><a class="header-anchor" href="#_47-creditcashrepay"><span>47. CreditCashRepay</span></a></h3><p>èèµ„èåˆ¸ä¸šåŠ¡ä¸­ç°é‡‘ç›´æ¥è¿˜æ¬¾è¯·æ±‚ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CreditCashRepay</span><span class="token punctuation">(</span><span class="token keyword">double</span> amount<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>Amountï¼šç°é‡‘è¿˜æ¬¾çš„é‡‘é¢</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>ç°é‡‘ç›´æ¥è¿˜æ¬¾è®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸä¿¡ç”¨è´¦æˆ·å‘å‡º10000å…ƒç°é‡‘è¿˜æ¬¾çš„è¯·æ±‚ï¼Œå…·ä½“å‚æ•°éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">CreditCashRepay</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnCreditCashRepay</span><span class="token punctuation">(</span>XTPCrdCashRepayRsp <span class="token operator">*</span>cash_repay_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_48-creditcashrepaydebtinterestfee" tabindex="-1"><a class="header-anchor" href="#_48-creditcashrepaydebtinterestfee"><span>48. CreditCashRepayDebtInterestFee</span></a></h3><p>èèµ„èåˆ¸ä¸šåŠ¡ä¸­ç°é‡‘è¿˜æŒ‡å®šè´Ÿå€ºåˆçº¦æ¯è´¹è¯·æ±‚ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CreditCashRepayDebtInterestFee</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> debt_id<span class="token punctuation">,</span> <span class="token keyword">double</span> amount<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>debt_idï¼šæŒ‡å®šçš„è´Ÿå€ºåˆçº¦ç¼–å·</p><p>Amountï¼šç°é‡‘è¿˜æ¯çš„é‡‘é¢</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>ç°é‡‘è¿˜æ¯è®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸä¿¡ç”¨è´¦æˆ·å¿è¿˜ç¼–å·ä¸º202111111111110000001è¿™ä»½è´Ÿå€ºåˆçº¦æ¯è´¹10000å…ƒï¼Œå…·ä½“å‚æ•°éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">CreditCashRepayDebtInterestFee</span><span class="token punctuation">(</span><span class="token string">&quot;202111111111110000001&quot;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnCreditCashRepayDebtInterestFee</span><span class="token punctuation">(</span>XTPCrdCashRepayDebtInterestFeeRsp <span class="token operator">*</span>cash_repay_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_49-creditsellstockrepaydebtinterestfee" tabindex="-1"><a class="header-anchor" href="#_49-creditsellstockrepaydebtinterestfee"><span>49. CreditSellStockRepayDebtInterestFee</span></a></h3><p>èèµ„èåˆ¸ä¸šåŠ¡ä¸­å–åˆ¸è¿˜æŒ‡å®šè´Ÿå€ºåˆçº¦æ¯è´¹è¯·æ±‚ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CreditSellStockRepayDebtInterestFee</span><span class="token punctuation">(</span>XTPOrderInsertInfo<span class="token operator">*</span> order<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> debt_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>Orderï¼šå–åˆ¸çš„æŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä»€ä¹ˆéƒ½ä¸å¡«ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚order.order_xtp_idå­—æ®µæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</p><p>debt_idï¼šæŒ‡å®šçš„è´Ÿå€ºåˆçº¦ç¼–å·</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æ–°è®¢å•è¯·æ±‚</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPOrderInsertInfo</span>
<span class="token punctuation">{</span>
    <span class="token comment">///XTPç³»ç»Ÿè®¢å•IDï¼Œæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œåœ¨XTPç³»ç»Ÿä¸­å”¯ä¸€</span>
    <span class="token keyword">uint64_t</span>                order_xtp_id<span class="token punctuation">;</span>
    <span class="token comment">///æŠ¥å•å¼•ç”¨ï¼Œç”±å®¢æˆ·è‡ªå®šä¹‰</span>
    <span class="token keyword">uint32_t</span>	            order_client_id<span class="token punctuation">;</span>
    <span class="token comment">///åˆçº¦ä»£ç  å®¢æˆ·ç«¯è¯·æ±‚ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</span>
    <span class="token keyword">char</span>                    ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE         market<span class="token punctuation">;</span>
    <span class="token comment">///ä»·æ ¼</span>
    <span class="token keyword">double</span>                  price<span class="token punctuation">;</span>
    <span class="token comment">///æ­¢æŸä»·ï¼ˆä¿ç•™å­—æ®µï¼‰</span>
    <span class="token keyword">double</span>                  stop_price<span class="token punctuation">;</span>
    <span class="token comment">///æ•°é‡(è‚¡ç¥¨å•ä½ä¸ºè‚¡ï¼Œé€†å›è´­å•ä½ä¸ºå¼ )</span>
    <span class="token keyword">int64_t</span>                 quantity<span class="token punctuation">;</span>
    <span class="token comment">///æŠ¥å•ä»·æ ¼</span>
    XTP_PRICE_TYPE          price_type<span class="token punctuation">;</span>
    <span class="token keyword">union</span><span class="token punctuation">{</span>
		<span class="token comment">///32ä½å­—æ®µï¼Œç”¨æ¥å…¼å®¹è€ç‰ˆæœ¬apiï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒ</span>
        <span class="token keyword">uint32_t</span>            u32<span class="token punctuation">;</span>
        <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            <span class="token comment">///ä¹°å–æ–¹å‘</span>
            XTP_SIDE_TYPE               side<span class="token punctuation">;</span>
            <span class="token comment">///å¼€å¹³æ ‡å¿—</span>
            XTP_POSITION_EFFECT_TYPE    position_effect<span class="token punctuation">;</span>
			<span class="token comment">///é¢„ç•™å­—æ®µ1</span>
            <span class="token keyword">uint8_t</span>                     reserved1<span class="token punctuation">;</span>
			<span class="token comment">///é¢„ç•™å­—æ®µ2</span>
			<span class="token keyword">uint8_t</span>                     reserved2<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">///ä¸šåŠ¡ç±»å‹</span>
	XTP_BUSINESS_TYPE       business_type<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>å–åˆ¸è¿˜æ¯è®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸä¿¡ç”¨è´¦æˆ·æŠ¥å•ä»¥123.4å…ƒå–å‡ºæ·±å¸‚æŸè‚¡ç¥¨100ä»½ï¼Œå¿è¿˜ç¼–å·ä¸º202111111111110000001çš„è´Ÿå€ºåˆçº¦çš„æ¯è´¹</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPOrderInsertInfo order<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPOrderInsertInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	order<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SZ_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>business_type <span class="token operator">=</span> XTP_BUSINESS_TYPE_MARGIN<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>side <span class="token operator">=</span> XTP_SIDE_REPAY_MARGIN<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>position_effect <span class="token operator">=</span> XTP_POSITION_EFFECT_INIT<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>price_type <span class="token operator">=</span> XTP_PRICE_LIMIT<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">123.40</span><span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>quantity <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string str_debt_id <span class="token operator">=</span> <span class="token string">&quot;202111111111110000001&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">uint64_t</span> order_xtp_id <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">CreditSellStockRepayDebtInterestFee</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span> str_debt_id<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŠ¥å•å®Œæˆå“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOrderEvent</span><span class="token punctuation">(</span>XTPOrderInfo <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// æŠ¥å•æˆäº¤å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnTradeEvent</span><span class="token punctuation">(</span>XTPTradeReport <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_50-querycreditcashrepayinfo" tabindex="-1"><a class="header-anchor" href="#_50-querycreditcashrepayinfo"><span>50. QueryCreditCashRepayInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­çš„ç°é‡‘ç›´æ¥è¿˜æ¬¾æŠ¥å•ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditCashRepayInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­çš„ç°é‡‘ç›´æ¥è¿˜æ¬¾æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditCashRepayInfo</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditCashRepayInfo</span><span class="token punctuation">(</span>XTPCrdCashRepayInfo <span class="token operator">*</span>cash_repay_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_51-querycreditfundinfo" tabindex="-1"><a class="header-anchor" href="#_51-querycreditfundinfo"><span>51. QueryCreditFundInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·ç‰¹æœ‰ä¿¡æ¯ï¼Œé™¤èµ„é‡‘è´¦æˆ·ä»¥å¤–çš„ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditFundInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·ç‰¹æœ‰ä¿¡æ¯ï¼Œé™¤èµ„é‡‘è´¦æˆ·ä»¥å¤–çš„ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditFundInfo</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditFundInfo</span><span class="token punctuation">(</span>XTPCrdFundInfo <span class="token operator">*</span>fund_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_52-querycreditdebtinfo" tabindex="-1"><a class="header-anchor" href="#_52-querycreditdebtinfo"><span>52. QueryCreditDebtInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·è´Ÿå€ºåˆçº¦ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditDebtInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·è´Ÿå€ºåˆçº¦ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditDebtInfo</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditDebtInfo</span><span class="token punctuation">(</span>XTPCrdDebtInfo <span class="token operator">*</span>debt_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_53-querycredittickerdebtinfo" tabindex="-1"><a class="header-anchor" href="#_53-querycredittickerdebtinfo"><span>53. QueryCreditTickerDebtInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æŒ‡å®šè¯åˆ¸è´Ÿå€ºæœªè¿˜ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditTickerDebtInfo</span><span class="token punctuation">(</span>XTPClientQueryCrdDebtStockReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„æŒ‡å®šè¯åˆ¸ï¼Œç­›é€‰æ¡ä»¶ä¸­tickerå¯ä»¥å…¨å¡«0ï¼Œå¦‚æœä¸ä¸º0ï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///èèµ„èåˆ¸æŒ‡å®šè¯åˆ¸ä¸Šçš„è´Ÿå€ºæœªè¿˜æ•°é‡è¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPClientQueryCrdDebtStockReq</span>
<span class="token punctuation">{</span>
    XTP_MARKET_TYPE market<span class="token punctuation">;</span>                 <span class="token comment">///&lt; å¸‚åœº</span>
    <span class="token keyword">char</span>            ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">///&lt; è¯åˆ¸ä»£ç </span>
<span class="token punctuation">}</span>XTPClientQueryCrdDebtStockReq<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_MARKET_TYPEå¸‚åœºç±»å‹ï¼Œäº¤æ˜“é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_MARKET_TYPE</span>
<span class="token punctuation">{</span>
    XTP_MKT_INIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">///&lt;åˆå§‹åŒ–å€¼æˆ–è€…æœªçŸ¥</span>
    XTP_MKT_SZ_A <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">///&lt;æ·±åœ³Aè‚¡</span>
    XTP_MKT_SH_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;ä¸Šæµ·Aè‚¡</span>
    XTP_MKT_BJ_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;åŒ—äº¬Aè‚¡</span>
    XTP_MKT_HK<span class="token punctuation">,</span>      <span class="token comment">///&lt;æ¸¯è‚¡</span>
    XTP_MKT_UNKNOWN   <span class="token comment">///&lt;æœªçŸ¥äº¤æ˜“å¸‚åœºç±»å‹</span>
<span class="token punctuation">}</span>XTP_MARKET_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ‰€æœ‰è´Ÿå€ºæœªè¿˜çš„è¯åˆ¸ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdDebtStockReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdDebtStockReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditTickerDebtInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢510500çš„è´Ÿå€ºæœªè¿˜ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdDebtStockReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdDebtStockReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;510500&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditTickerDebtInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditTickerDebtInfo</span><span class="token punctuation">(</span>XTPCrdDebtStockInfo <span class="token operator">*</span>debt_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_54-querycreditassetdebtinfo" tabindex="-1"><a class="header-anchor" href="#_54-querycreditassetdebtinfo"><span>54. QueryCreditAssetDebtInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·å¾…è¿˜èµ„é‡‘ä¿¡æ¯</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditAssetDebtInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·å¾…è¿˜èµ„é‡‘ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditAssetDebtInfo</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditAssetDebtInfo</span><span class="token punctuation">(</span><span class="token keyword">double</span> remain_amount<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_55-querycredittickerassigninfo" tabindex="-1"><a class="header-anchor" href="#_55-querycredittickerassigninfo"><span>55. QueryCreditTickerAssignInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·å¯èåˆ¸å¤´å¯¸ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditTickerAssignInfo</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStockReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„æŒ‡å®šè¯åˆ¸ï¼Œç­›é€‰æ¡ä»¶ä¸­tickerå¯ä»¥å…¨å¡«0ï¼Œå¦‚æœä¸ä¸º0ï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///èåˆ¸å¤´å¯¸è¯åˆ¸æŸ¥è¯¢è¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPClientQueryCrdPositionStockReq</span>
<span class="token punctuation">{</span>
    XTP_MARKET_TYPE market<span class="token punctuation">;</span>                 <span class="token comment">///&lt; è¯åˆ¸å¸‚åœº</span>
    <span class="token keyword">char</span>            ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">///&lt; è¯åˆ¸ä»£ç </span>
<span class="token punctuation">}</span>XTPClientQueryCrdPositionStockReq<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ä¿¡ç”¨è´¦æˆ·ä¸­æ‰€æœ‰å¯èåˆ¸å¤´å¯¸ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdPositionStockReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStockReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditTickerAssignInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ä»£ç ä¸º510500çš„è¯åˆ¸çš„å¯èåˆ¸å¤´å¯¸ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdPositionStockReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStockReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;510500&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditTickerAssignInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditTickerAssignInfo</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStkInfo <span class="token operator">*</span>assign_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_56-querycreditexcessstock" tabindex="-1"><a class="header-anchor" href="#_56-querycreditexcessstock"><span>56. QueryCreditExcessStock</span></a></h3><p>èèµ„èåˆ¸ä¸šåŠ¡ä¸­è¯·æ±‚æŸ¥è¯¢æŒ‡å®šè¯åˆ¸çš„ä½™åˆ¸ã€‚è¯¥æ–¹æ³•ä¸­ç”¨æˆ·å¿…é¡»æä¾›äº†è¯åˆ¸ä»£ç å’Œæ‰€åœ¨å¸‚åœºã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditExcessStock</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkReqInfo <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„ä½™åˆ¸ä¿¡æ¯ï¼Œä¸å¯ä»¥ä¸ºç©ºï¼Œéœ€è¦æ˜ç¡®æŒ‡å®š</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡ä½™åˆ¸æŸ¥è¯¢è¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPClientQueryCrdSurplusStkReqInfo</span>
<span class="token punctuation">{</span>
    XTP_MARKET_TYPE market<span class="token punctuation">;</span>                 <span class="token comment">///&lt; è¯åˆ¸å¸‚åœº</span>
    <span class="token keyword">char</span>            ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">///&lt; è¯åˆ¸ä»£ç </span>
<span class="token punctuation">}</span>XTPClientQueryCrdSurplusStkReqInfo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ²ªå¸‚510500çš„ä½™åˆ¸ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdSurplusStkReqInfo query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkReqInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;510500&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditExcessStock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditExcessStock</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkRspInfo<span class="token operator">*</span> stock_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_57-querymulcreditexcessstock" tabindex="-1"><a class="header-anchor" href="#_57-querymulcreditexcessstock"><span>57. QueryMulCreditExcessStock</span></a></h3><p>èèµ„èåˆ¸ä¸šåŠ¡ä¸­è¯·æ±‚æŸ¥è¯¢ä½™åˆ¸ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryMulCreditExcessStock</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkReqInfo <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„ä½™åˆ¸ä¿¡æ¯ã€‚è‹¥å¡«å…¥å¸‚åœºå’Œè‚¡ç¥¨ä»£ç ï¼Œè¿”å›å•æ”¯è‚¡ç¥¨ä¿¡æ¯ï¼›è‹¥å¸‚åœºä»£ç ä¸ºç©ºï¼Œè‚¡ç¥¨ä»£ç éç©ºï¼Œæ˜¯æ— æ•ˆæŸ¥è¯¢ï¼Œä¼šåœ¨SPIä¸­è¿”å›é”™è¯¯ï¼›è‹¥å¸‚åœºå’Œè‚¡ç¥¨ä»£ç å‡ä¸ºç©ºï¼Œè¿”å›å…¨å¸‚åœºä¿¡æ¯ï¼›è‹¥å¸‚åœºä»£ç éç©ºï¼Œè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œè¿”å›å•å¸‚åœºä¿¡æ¯</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡ä½™åˆ¸æŸ¥è¯¢è¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPClientQueryCrdSurplusStkReqInfo</span>
<span class="token punctuation">{</span>
    XTP_MARKET_TYPE market<span class="token punctuation">;</span>                 <span class="token comment">///&lt; è¯åˆ¸å¸‚åœº</span>
    <span class="token keyword">char</span>            ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">///&lt; è¯åˆ¸ä»£ç </span>
<span class="token punctuation">}</span>XTPClientQueryCrdSurplusStkReqInfo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ²ªå¸‚510500çš„ä½™åˆ¸ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdSurplusStkReqInfo query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkReqInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;510500&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryMulCreditExcessStock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ²ªå¸‚ä½™åˆ¸ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdSurplusStkReqInfo query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkReqInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryMulCreditExcessStock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å…¨å¸‚åœºä½™åˆ¸ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdSurplusStkReqInfo query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkReqInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryMulCreditExcessStock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryMulCreditExcessStock</span><span class="token punctuation">(</span>XTPClientQueryCrdSurplusStkRspInfo<span class="token operator">*</span> stock_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_58-creditextenddebtdate" tabindex="-1"><a class="header-anchor" href="#_58-creditextenddebtdate"><span>58. CreditExtendDebtDate</span></a></h3><p>èèµ„èåˆ¸ä¸šåŠ¡ä¸­è¯·æ±‚è´Ÿå€ºåˆçº¦å±•æœŸã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CreditExtendDebtDate</span><span class="token punctuation">(</span>XTPCreditDebtExtendReq <span class="token operator">*</span>debt_extend<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>debt_extendï¼šè´Ÿå€ºåˆçº¦å±•æœŸçš„è¯·æ±‚ä¿¡æ¯</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///ç”¨æˆ·å±•æœŸè¯·æ±‚</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPCreditDebtExtendReq</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span>	xtpid<span class="token punctuation">;</span>								<span class="token comment">///&lt;xtpid</span>
	<span class="token keyword">char</span>		debt_id<span class="token punctuation">[</span>XTP_CREDIT_DEBT_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">///&lt;è´Ÿå€ºåˆçº¦ç¼–å·</span>
	<span class="token keyword">uint32_t</span>	defer_days<span class="token punctuation">;</span>							<span class="token comment">///&lt;å±•æœŸå¤©æ•°</span>
	<span class="token keyword">char</span>        fund_account<span class="token punctuation">[</span>XTP_ACCOUNT_NAME_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">///&lt;èµ„é‡‘è´¦å·</span>
	<span class="token keyword">char</span>	    password<span class="token punctuation">[</span>XTP_ACCOUNT_PASSWORD_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">///&lt;èµ„é‡‘è´¦å·å¯†ç </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// ä¿¡ç”¨ä¸šåŠ¡åˆçº¦è´Ÿå€ºç¼–å·é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_CREDIT_DEBT_ID_LEN</span> 		<span class="token expression"><span class="token number">33</span></span></span>
<span class="token comment">/// ç”¨æˆ·èµ„é‡‘è´¦æˆ·çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_ACCOUNT_NAME_LEN</span> 		<span class="token expression"><span class="token number">16</span></span></span>
<span class="token comment">///ç”¨æˆ·èµ„é‡‘è´¦æˆ·çš„å¯†ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_ACCOUNT_PASSWORD_LEN</span> 	<span class="token expression"><span class="token number">64</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæ¶ˆæ¯å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸä¿¡ç”¨è´¦æˆ·è¯·æ±‚å¯¹202111111111110000001è¿™ä»½è´Ÿå€ºåˆçº¦å±•æœŸ</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPCreditDebtExtendReq debt_extend<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>debt_extend<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPCreditDebtExtendReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	debt_extend<span class="token punctuation">.</span>defer_days <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_debt_id <span class="token operator">=</span> <span class="token string">&quot;202111111111110000001&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_fund_account <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxxxxx&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_password <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>debt_extend<span class="token punctuation">.</span>debt_id<span class="token punctuation">,</span> stdstr_debt_id<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_CREDIT_DEBT_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>debt_extend<span class="token punctuation">.</span>fund_account<span class="token punctuation">,</span> stdstr_fund_account<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_ACCOUNT_NAME_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>debt_extend<span class="token punctuation">.</span>password<span class="token punctuation">,</span> stdstr_password<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_ACCOUNT_PASSWORD_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">CreditExtendDebtDate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>debt_extend<span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnCreditExtendDebtDate</span><span class="token punctuation">(</span>XTPCreditDebtExtendNotice <span class="token operator">*</span>debt_extend_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_59-querycreditextenddebtdateorders" tabindex="-1"><a class="header-anchor" href="#_59-querycreditextenddebtdateorders"><span>59. QueryCreditExtendDebtDateOrders</span></a></h3><p>èèµ„èåˆ¸ä¸šåŠ¡ä¸­è¯·æ±‚æŸ¥è¯¢è´Ÿå€ºåˆçº¦å±•æœŸã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditExtendDebtDateOrders</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span>
session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•ç­›é€‰æ¡ä»¶ï¼Œxtp_idå¯ä»¥ä¸º0ï¼Œåˆ™é»˜è®¤æ‰€æœ‰è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•ï¼Œå¦‚æœä¸ä¸º0ï¼Œåˆ™è¯·æ±‚ç‰¹å®šçš„è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ç¼–å·ä¸º1234567890123456789çš„è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditExtendDebtDateOrders</span><span class="token punctuation">(</span><span class="token number">1234567890123456789</span><span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ‰€æœ‰è´Ÿå€ºåˆçº¦å±•æœŸè®¢å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditExtendDebtDateOrders</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditExtendDebtDateOrders</span><span class="token punctuation">(</span>XTPCreditDebtExtendNotice <span class="token operator">*</span>debt_extend_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_60-querycreditfundextrainfo" tabindex="-1"><a class="header-anchor" href="#_60-querycreditfundextrainfo"><span>60. QueryCreditFundExtraInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­è´¦æˆ¶çš„é™„åŠ ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditFundExtraInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­è´¦æˆ¶çš„é™„åŠ ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditFundExtraInfo</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditFundExtraInfo</span><span class="token punctuation">(</span>XTPCrdFundExtraInfo <span class="token operator">*</span>fund_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_61-querycreditpositionextrainfo" tabindex="-1"><a class="header-anchor" href="#_61-querycreditpositionextrainfo"><span>61. QueryCreditPositionExtraInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­è´¦æˆ¶æŒ‡å®šè¯åˆ¸çš„é™„åŠ ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryCreditPositionExtraInfo</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStockReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŒ‡å®šçš„è¯åˆ¸ï¼Œç­›é€‰æ¡ä»¶ä¸­tickerå¯ä»¥å…¨å¡«0ï¼Œå¦‚æœä¸ä¸º0ï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///èåˆ¸å¤´å¯¸è¯åˆ¸æŸ¥è¯¢è¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPClientQueryCrdPositionStockReq</span>
<span class="token punctuation">{</span>
    XTP_MARKET_TYPE market<span class="token punctuation">;</span>                 <span class="token comment">///&lt; è¯åˆ¸å¸‚åœº</span>
    <span class="token keyword">char</span>            ticker<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">///&lt; è¯åˆ¸ä»£ç </span>
<span class="token punctuation">}</span>XTPClientQueryCrdPositionStockReq<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢èèµ„èåˆ¸ä¸šåŠ¡ä¸­æ‰€æœ‰è¯åˆ¸çš„é™„åŠ ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdPositionStockReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStockReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditPositionExtraInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢è¯åˆ¸510500çš„é™„åŠ ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPClientQueryCrdPositionStockReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPClientQueryCrdPositionStockReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;510500&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> res <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryCreditPositionExtraInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryCreditPositionExtraInfo</span><span class="token punctuation">(</span>XTPCrdPositionExtraInfo <span class="token operator">*</span>fund_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_62-insertoptioncombinedorder" tabindex="-1"><a class="header-anchor" href="#_62-insertoptioncombinedorder"><span>62. InsertOptionCombinedOrder</span></a></h3><p>æœŸæƒç»„åˆç­–ç•¥æŠ¥å•å½•å…¥è¯·æ±‚ã€‚</p><p>äº¤æ˜“æ‰€æ¥æ”¶è®¢å•åï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOptionCombinedOrderEvent()ä¸­è¿”å›æŠ¥å•æœªæˆäº¤çš„çŠ¶æ€ï¼Œä¹‹åæ‰€æœ‰çš„è®¢å•çŠ¶æ€æ”¹å˜ï¼ˆé™¤äº†éƒ¨æˆçŠ¶æ€ï¼‰éƒ½ä¼šé€šè¿‡æŠ¥å•å“åº”å‡½æ•°è¿”å›ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">InsertOptionCombinedOrder</span><span class="token punctuation">(</span>XTPOptCombOrderInsertInfo <span class="token operator">*</span>order<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>orderï¼šæŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOptionCombinedOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä»€ä¹ˆéƒ½ä¸å¡«ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚order.order_xtp_idå­—æ®µæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æœŸæƒç»„åˆç­–ç•¥æ–°è®¢å•è¯·æ±‚</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPOptCombOrderInsertInfo</span>
<span class="token punctuation">{</span>
    <span class="token comment">///XTPç³»ç»Ÿè®¢å•IDï¼Œæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œåœ¨XTPç³»ç»Ÿä¸­å”¯ä¸€</span>
    <span class="token keyword">uint64_t</span>                order_xtp_id<span class="token punctuation">;</span>
    <span class="token comment">///æŠ¥å•å¼•ç”¨ï¼Œç”±å®¢æˆ·è‡ªå®šä¹‰</span>
    <span class="token keyword">uint32_t</span>	            order_client_id<span class="token punctuation">;</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE         market<span class="token punctuation">;</span>
    <span class="token comment">///æ•°é‡(å•ä½ä¸ºä»½)</span>
    <span class="token keyword">int64_t</span>                 quantity<span class="token punctuation">;</span>

    <span class="token comment">///ç»„åˆæ–¹å‘</span>
    XTP_SIDE_TYPE           side<span class="token punctuation">;</span>

    <span class="token comment">///ä¸šåŠ¡ç±»å‹</span>
    XTP_BUSINESS_TYPE       business_type<span class="token punctuation">;</span>

    <span class="token comment">///æœŸæƒç»„åˆç­–ç•¥ä¿¡æ¯</span>
    XTPOptCombPlugin        opt_comb_info<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_MARKET_TYPEå¸‚åœºç±»å‹ï¼Œäº¤æ˜“é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_MARKET_TYPE</span>
<span class="token punctuation">{</span>
    XTP_MKT_INIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">///&lt;åˆå§‹åŒ–å€¼æˆ–è€…æœªçŸ¥</span>
    XTP_MKT_SZ_A <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">///&lt;æ·±åœ³Aè‚¡</span>
    XTP_MKT_SH_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;ä¸Šæµ·Aè‚¡</span>
    XTP_MKT_BJ_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;åŒ—äº¬Aè‚¡</span>
    XTP_MKT_HK<span class="token punctuation">,</span>      <span class="token comment">///&lt;æ¸¯è‚¡</span>
    XTP_MKT_UNKNOWN   <span class="token comment">///&lt;æœªçŸ¥äº¤æ˜“å¸‚åœºç±»å‹</span>
<span class="token punctuation">}</span>XTP_MARKET_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_SIDE_TYPEæ˜¯ä¹°å–æ–¹å‘ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">uint8_t</span> XTP_SIDE_TYPE<span class="token punctuation">;</span>

<span class="token comment">///ä¹°ï¼ˆæ–°è‚¡ç”³è´­ï¼ŒETFä¹°ï¼Œé…è‚¡ï¼Œä¿¡ç”¨äº¤æ˜“ä¸­æ‹…ä¿å“ä¹°ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_BUY</span>            <span class="token expression"><span class="token number">1</span></span></span>
<span class="token comment">///å–ï¼ˆé€†å›è´­ï¼ŒETFå–ï¼Œä¿¡ç”¨äº¤æ˜“ä¸­æ‹…ä¿å“å–ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SELL</span>           <span class="token expression"><span class="token number">2</span></span></span>
<span class="token comment">///ç”³è´­</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_PURCHASE</span>       <span class="token expression"><span class="token number">7</span></span></span>
<span class="token comment">///èµå›</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REDEMPTION</span>     <span class="token expression"><span class="token number">8</span></span></span>
<span class="token comment">///æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SPLIT</span>          <span class="token expression"><span class="token number">9</span></span></span>
<span class="token comment">///åˆå¹¶</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_MERGE</span>          <span class="token expression"><span class="token number">10</span></span></span>
<span class="token comment">///æ”¹ç‰ˆä¹‹åçš„sideçš„å¤‡å…‘ï¼Œæš‚ä¸æ”¯æŒ</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_COVER</span>          <span class="token expression"><span class="token number">11</span></span></span>
<span class="token comment">///æ”¹ç‰ˆä¹‹åçš„sideé”å®šï¼ˆå¯¹åº”å¼€å¹³æ ‡è¯†ä¸ºå¼€ï¼‰/è§£é”ï¼ˆå¯¹åº”å¼€å¹³æ ‡è¯†ä¸ºå¹³ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_FREEZE</span>         <span class="token expression"><span class="token number">12</span></span></span>
<span class="token comment">/// èèµ„ä¹°å…¥</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_MARGIN_TRADE</span>	<span class="token expression"><span class="token number">21</span></span></span>
<span class="token comment">/// èåˆ¸å–å‡º</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SHORT_SELL</span>		<span class="token expression"><span class="token number">22</span></span></span>
<span class="token comment">/// å–åˆ¸è¿˜æ¬¾</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REPAY_MARGIN</span>	<span class="token expression"><span class="token number">23</span></span></span>
<span class="token comment">/// ä¹°åˆ¸è¿˜åˆ¸</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REPAY_STOCK</span>	<span class="token expression"><span class="token number">24</span></span></span>
<span class="token comment">/// ç°é‡‘è¿˜æ¬¾ï¼ˆä¸æ”¾åœ¨æ™®é€šè®¢å•åè®®ï¼Œå¦åŠ è¯·æ±‚å’ŒæŸ¥è¯¢åè®®ï¼‰</span>
<span class="token comment">//#define XTP_SIDE_CASH_REPAY_MARGIN	25</span>
<span class="token comment">/// ç°åˆ¸è¿˜åˆ¸</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_STOCK_REPAY_STOCK</span>	<span class="token expression"><span class="token number">26</span></span></span>
<span class="token comment">/// ä½™åˆ¸åˆ’è½¬</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SURSTK_TRANS</span>       <span class="token expression"><span class="token number">27</span></span></span>
<span class="token comment">/// æ‹…ä¿å“è½¬å…¥</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_GRTSTK_TRANSIN</span>     <span class="token expression"><span class="token number">28</span></span></span>
<span class="token comment">/// æ‹…ä¿å“è½¬å‡º</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_GRTSTK_TRANSOUT</span>    <span class="token expression"><span class="token number">29</span></span></span>

<span class="token comment">///ç»„åˆç­–ç•¥çš„ç»„åˆ</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_COMBINE</span>        <span class="token expression"><span class="token number">31</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT</span>          <span class="token expression"><span class="token number">32</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„ç®¡ç†å‘˜å¼ºåˆ¶æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT_FORCE</span>    <span class="token expression"><span class="token number">33</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„äº¤æ˜“æ‰€å¼ºåˆ¶æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT_FORCE_EXCH</span>    <span class="token expression"><span class="token number">34</span></span></span>

<span class="token comment">///æœªçŸ¥æˆ–è€…æ— æ•ˆä¹°å–æ–¹å‘</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_UNKNOWN</span>        <span class="token expression"><span class="token number">50</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_BUSINESS_TYPEè¯åˆ¸ä¸šåŠ¡ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_BUSINESS_TYPE</span>
<span class="token punctuation">{</span>
	XTP_BUSINESS_TYPE_CASH <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token comment">///&lt;æ™®é€šè‚¡ç¥¨ä¸šåŠ¡ï¼ˆè‚¡ç¥¨ä¹°å–ï¼ŒETFä¹°å–ï¼Œæ²ªå¸‚äº¤æ˜“å‹è´§å¸åŸºé‡‘ç­‰ï¼‰</span>
	XTP_BUSINESS_TYPE_IPOS<span class="token punctuation">,</span>                <span class="token comment">///&lt;æ–°è‚¡ç”³è´­ä¸šåŠ¡ï¼ˆå¯¹åº”çš„price typeéœ€é€‰æ‹©é™ä»·ç±»å‹ï¼‰</span>
	XTP_BUSINESS_TYPE_REPO<span class="token punctuation">,</span>                <span class="token comment">///&lt;å›è´­ä¸šåŠ¡ï¼ˆå›½å€ºé€†å›è´­ä¸šåŠ¡å¯¹åº”çš„price typeå¡«ä¸ºé™ä»·ï¼Œsideå¡«ä¸ºå–ï¼‰</span>
	XTP_BUSINESS_TYPE_ETF<span class="token punctuation">,</span>                 <span class="token comment">///&lt;ETFç”³èµä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_MARGIN<span class="token punctuation">,</span>              <span class="token comment">///&lt;èèµ„èåˆ¸ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_DESIGNATION<span class="token punctuation">,</span>         <span class="token comment">///&lt;è½¬æ‰˜ç®¡ï¼ˆæœªæ”¯æŒï¼‰</span>
	XTP_BUSINESS_TYPE_ALLOTMENT<span class="token punctuation">,</span>		   <span class="token comment">///&lt;é…è‚¡ä¸šåŠ¡ï¼ˆå¯¹åº”çš„price typeéœ€é€‰æ‹©é™ä»·ç±»å‹,sideå¡«ä¸ºä¹°ï¼‰</span>
	XTP_BUSINESS_TYPE_STRUCTURED_FUND_PURCHASE_REDEMPTION<span class="token punctuation">,</span>	   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘ç”³èµä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_STRUCTURED_FUND_SPLIT_MERGE<span class="token punctuation">,</span>	   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘æ‹†åˆ†åˆå¹¶ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_MONEY_FUND<span class="token punctuation">,</span>		   <span class="token comment">///&lt;è´§å¸åŸºé‡‘ç”³èµä¸šåŠ¡ï¼ˆæš‚æœªæ”¯æŒï¼Œæ²ªå¸‚äº¤æ˜“å‹è´§å¸åŸºé‡‘çš„ä¹°å–è¯·ä½¿ç”¨æ™®é€šè‚¡ç¥¨ä¸šåŠ¡ï¼‰</span>
    XTP_BUSINESS_TYPE_OPTION<span class="token punctuation">,</span>              <span class="token comment">///&lt;æœŸæƒä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_EXECUTE<span class="token punctuation">,</span>             <span class="token comment">///&lt;è¡Œæƒ</span>
    XTP_BUSINESS_TYPE_FREEZE<span class="token punctuation">,</span>              <span class="token comment">///&lt;é”å®šè§£é”ï¼Œæš‚ä¸æ”¯æŒ</span>
    XTP_BUSINESS_TYPE_OPTION_COMBINE<span class="token punctuation">,</span>      <span class="token comment">///&lt;æœŸæƒç»„åˆç­–ç•¥ ç»„åˆå’Œæ‹†åˆ†ä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_EXECUTE_COMBINE<span class="token punctuation">,</span>     <span class="token comment">///&lt;æœŸæƒè¡Œæƒåˆå¹¶ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_BOND_SWAP_STOCK<span class="token punctuation">,</span>     <span class="token comment">///&lt;å€ºè½¬è‚¡ä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_UNKNOWN<span class="token punctuation">,</span>             <span class="token comment">///&lt;æœªçŸ¥ç±»å‹</span>
<span class="token punctuation">}</span> XTP_BUSINESS_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æœŸæƒç»„åˆç­–ç•¥æŠ¥å•é™„åŠ ä¿¡æ¯ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPOptCombPlugin</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span>                                strategy_id<span class="token punctuation">[</span>XTP_STRATEGY_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>               <span class="token comment">///&lt; ç»„åˆç­–ç•¥ä»£ç ï¼Œæ¯”å¦‚CNSJCè®¤è´­ç‰›å¸‚ä»·å·®ç­–ç•¥ç­‰ã€‚åˆå¹¶è¡Œæƒæ—¶ï¼Œæ­¤å­—æ®µå¯ä¸ºç©º</span>
    <span class="token keyword">char</span>                                comb_num<span class="token punctuation">[</span>XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>           <span class="token comment">///&lt; ç»„åˆç¼–ç ï¼Œç»„åˆç”³æŠ¥æ—¶ï¼Œè¯¥å­—æ®µä¸ºç©ºï¼›æ‹†åˆ†ç”³æŠ¥æ—¶ï¼Œå¡«å†™æ‹Ÿæ‹†åˆ†ç»„åˆçš„ç»„åˆç¼–ç ã€‚</span>
    <span class="token keyword">int32_t</span>                             num_legs<span class="token punctuation">;</span>                                       <span class="token comment">///&lt; æˆåˆ†åˆçº¦æ•°</span>
    XTPOptCombLegInfo                   leg_detail<span class="token punctuation">[</span>XTP_STRATEGE_LEG_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span>               <span class="token comment">///&lt; æˆåˆ†åˆçº¦æ•°ç»„ï¼Œæœ€å¤šå››æ¡è…¿ã€‚</span>
<span class="token punctuation">}</span>XTPOptCombPlugin<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// ç»„åˆç­–ç•¥è…¿åˆçº¦ä¿¡æ¯ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPOptCombLegInfo</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span>                            leg_security_id<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">///&lt; æˆåˆ†åˆçº¦ä»£ç </span>
    XTP_OPT_CALL_OR_PUT_TYPE        leg_cntr_type<span class="token punctuation">;</span>                   <span class="token comment">///&lt; åˆçº¦ç±»å‹ï¼Œè®¤æ²½æˆ–è®¤è´­ã€‚</span>
    XTP_POSITION_DIRECTION_TYPE     leg_side<span class="token punctuation">;</span>                        <span class="token comment">///&lt; æŒä»“æ–¹å‘ï¼Œæƒåˆ©æ–¹æˆ–ä¹‰åŠ¡æ–¹ã€‚</span>
    XTP_OPT_COVERED_OR_UNCOVERED    leg_covered<span class="token punctuation">;</span>                     <span class="token comment">///&lt; å¤‡å…‘æ ‡ç­¾</span>
    <span class="token keyword">int32_t</span>                         leg_qty<span class="token punctuation">;</span>                         <span class="token comment">///&lt; æˆåˆ†åˆçº¦æ•°é‡ï¼ˆå¼ ï¼‰</span>
<span class="token punctuation">}</span>XTPOptCombLegInfo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_OPT_CALL_OR_PUT_TYPEæ˜¯ä¸€ä¸ªè®¤æ²½æˆ–è®¤è´­ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_OPT_CALL_OR_PUT_TYPE</span> <span class="token punctuation">{</span>
	XTP_OPT_CALL <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>	    <span class="token comment">///&lt;è®¤è´­</span>
	XTP_OPT_PUT <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>		<span class="token comment">///&lt;è®¤æ²½</span>
<span class="token punctuation">}</span>XTP_OPT_CALL_OR_PUT_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_POSITION_DIRECTION_TYPEæ˜¯ä¸€ä¸ªæŒä»“æ–¹å‘ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_POSITION_DIRECTION_TYPE</span> <span class="token punctuation">{</span>
	XTP_POSITION_DIRECTION_NET <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>	    <span class="token comment">///&lt;å‡€</span>
	XTP_POSITION_DIRECTION_LONG<span class="token punctuation">,</span>		<span class="token comment">///&lt;å¤šï¼ˆæœŸæƒåˆ™ä¸ºæƒåˆ©æ–¹ï¼‰</span>
    XTP_POSITION_DIRECTION_SHORT<span class="token punctuation">,</span>       <span class="token comment">///&lt;ç©ºï¼ˆæœŸæƒåˆ™ä¸ºä¹‰åŠ¡æ–¹ï¼‰</span>
    XTP_POSITION_DIRECTION_COVERED<span class="token punctuation">,</span>     <span class="token comment">///&lt;å¤‡å…‘ï¼ˆæœŸæƒåˆ™ä¸ºå¤‡å…‘ä¹‰åŠ¡æ–¹ï¼‰</span>
<span class="token punctuation">}</span>XTP_POSITION_DIRECTION_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_OPT_COVERED_OR_UNCOVEREDæ˜¯å¦å¤‡å…‘çš„æ ‡ç­¾</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_OPT_COVERED_OR_UNCOVERED</span> <span class="token punctuation">{</span>
    XTP_POSITION_UNCOVERED <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>     <span class="token comment">///&lt;éå¤‡å…‘</span>
    XTP_POSITION_COVERED<span class="token punctuation">,</span>           <span class="token comment">///&lt;å¤‡å…‘</span>
<span class="token punctuation">}</span>XTP_OPT_COVERED_OR_UNCOVERED<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
<span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥æœ€å¤šè…¿æ•°</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_STRATEGE_LEG_NUM</span> <span class="token expression"><span class="token number">4</span></span></span>
<span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥ä»£ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_STRATEGY_ID_LEN</span> <span class="token expression"><span class="token number">10</span></span></span>
<span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥ç»„åˆç¼–ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SECONDARY_ORDER_ID_LEN</span> <span class="token expression"><span class="token number">18</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŠ¥å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæŠ¥å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæŠ¥å•å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„order_xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŒ‰CNSJCç­–ç•¥å¯¹æ·±å¸‚æŸç»„åˆä¸­çš„100ä»½è¿›è¡Œæ‹†åˆ†</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// æœŸæƒç»„åˆç­–ç•¥æŠ¥å•é™„åŠ ä¿¡æ¯ç»“æ„ä½“åˆå§‹åŒ–</span>
	XTPOptCombPlugin plugin_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPOptCombPlugin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string std_str_strategy_id <span class="token operator">=</span> <span class="token string">&quot;CNSJC&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>plugin_param<span class="token punctuation">.</span>strategy_id<span class="token punctuation">,</span> std_str_strategy_id<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_STRATEGY_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// éœ€è¦æ‹†åˆ†çš„ç»„åˆç¼–ç </span>
	std<span class="token double-colon punctuation">::</span>string std_str_comb_num <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>plugin_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> std_str_comb_num<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// æœŸæƒç»„åˆç­–ç•¥æŠ¥å•ç»“æ„ä½“åˆå§‹åŒ–</span>
	XTPOptCombOrderInsertInfo order<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPOptCombOrderInsertInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	order<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SZ_A<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>quantity <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>business_type <span class="token operator">=</span> XTP_BUSINESS_TYPE_OPTION_COMBINE<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>side <span class="token operator">=</span> XTP_SIDE_OPT_SPLIT<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>opt_comb_info <span class="token operator">=</span> plugin_param<span class="token punctuation">;</span>

	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">InsertOptionCombinedOrder</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span>session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŠ¥å•å®Œæˆå“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOptionCombinedOrderEvent</span><span class="token punctuation">(</span>XTPOptCombOrderInfo <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// æŠ¥å•æˆäº¤å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOptionCombinedTradeEvent</span><span class="token punctuation">(</span>XTPOptCombTradeReport <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_63-insertoptioncombinedorderextra" tabindex="-1"><a class="header-anchor" href="#_63-insertoptioncombinedorderextra"><span>63. InsertOptionCombinedOrderExtra</span></a></h3><p>å·²ç»æå‰è®¾ç½®order_xtp_idçš„æœŸæƒç»„åˆç­–ç•¥æŠ¥å•å½•å…¥è¯·æ±‚ï¼Œä¸GetANewOrderXTPID()é…åˆä½¿ç”¨ã€‚</p><p>ä½¿ç”¨è®¾ç½®å¥½çš„order_xtp_idï¼ˆé€šè¿‡GetANewOrderXTPID()è·å¾—ï¼‰è¿›è¡ŒæŠ¥å•ï¼Œæ³¨æ„æ­¤å¤„å¦‚æœorder_xtp_idè®¾ç½®ä¸å¯¹ï¼Œå°†å¯¼è‡´æŠ¥å•å¤±è´¥ã€‚äº¤æ˜“æ‰€æ¥æ”¶è®¢å•åï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOptionCombinedOrderEvent()ä¸­è¿”å›æŠ¥å•æœªæˆäº¤çš„çŠ¶æ€ï¼Œä¹‹åæ‰€æœ‰çš„è®¢å•çŠ¶æ€æ”¹å˜ï¼ˆé™¤äº†éƒ¨æˆçŠ¶æ€ï¼‰éƒ½ä¼šé€šè¿‡æŠ¥å•å“åº”å‡½æ•°è¿”å›ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">InsertOptionCombinedOrderExtra</span><span class="token punctuation">(</span>XTPOptCombOrderInsertInfo <span class="token operator">*</span>order<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>orderï¼šæŠ¥å•å½•å…¥ä¿¡æ¯ï¼Œå…¶ä¸­order.order_client_idå­—æ®µæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œç”¨æˆ·è¾“å…¥ä»€ä¹ˆå€¼ï¼Œè®¢å•å“åº”OnOptionCombinedOrderEvent()è¿”å›æ—¶å°±ä¼šå¸¦å›ä»€ä¹ˆå€¼ï¼Œç±»ä¼¼äºå¤‡æ³¨ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå·±å®šä½è®¢å•ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸å¡«ã€‚order.order_xtp_idå­—æ®µå¿…é¡»æ˜¯é€šè¿‡GetANewOrderXTPID()è·å¾—çš„å€¼ï¼Œorder.tickerå¿…é¡»ä¸å¸¦ç©ºæ ¼ï¼Œä»¥&#39;\0&#39;ç»“å°¾</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æœŸæƒç»„åˆç­–ç•¥æ–°è®¢å•è¯·æ±‚</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPOptCombOrderInsertInfo</span>
<span class="token punctuation">{</span>
    <span class="token comment">///XTPç³»ç»Ÿè®¢å•IDï¼Œæ— éœ€ç”¨æˆ·å¡«å†™ï¼Œåœ¨XTPç³»ç»Ÿä¸­å”¯ä¸€</span>
    <span class="token keyword">uint64_t</span>                order_xtp_id<span class="token punctuation">;</span>
    <span class="token comment">///æŠ¥å•å¼•ç”¨ï¼Œç”±å®¢æˆ·è‡ªå®šä¹‰</span>
    <span class="token keyword">uint32_t</span>	            order_client_id<span class="token punctuation">;</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE         market<span class="token punctuation">;</span>
    <span class="token comment">///æ•°é‡(å•ä½ä¸ºä»½)</span>
    <span class="token keyword">int64_t</span>                 quantity<span class="token punctuation">;</span>

    <span class="token comment">///ç»„åˆæ–¹å‘</span>
    XTP_SIDE_TYPE           side<span class="token punctuation">;</span>

    <span class="token comment">///ä¸šåŠ¡ç±»å‹</span>
    XTP_BUSINESS_TYPE       business_type<span class="token punctuation">;</span>

    <span class="token comment">///æœŸæƒç»„åˆç­–ç•¥ä¿¡æ¯</span>
    XTPOptCombPlugin        opt_comb_info<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_MARKET_TYPEå¸‚åœºç±»å‹ï¼Œäº¤æ˜“é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_MARKET_TYPE</span>
<span class="token punctuation">{</span>
    XTP_MKT_INIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">///&lt;åˆå§‹åŒ–å€¼æˆ–è€…æœªçŸ¥</span>
    XTP_MKT_SZ_A <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">///&lt;æ·±åœ³Aè‚¡</span>
    XTP_MKT_SH_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;ä¸Šæµ·Aè‚¡</span>
    XTP_MKT_BJ_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;åŒ—äº¬Aè‚¡</span>
    XTP_MKT_HK<span class="token punctuation">,</span>      <span class="token comment">///&lt;æ¸¯è‚¡</span>
    XTP_MKT_UNKNOWN   <span class="token comment">///&lt;æœªçŸ¥äº¤æ˜“å¸‚åœºç±»å‹</span>
<span class="token punctuation">}</span>XTP_MARKET_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_SIDE_TYPEæ˜¯ä¹°å–æ–¹å‘ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">uint8_t</span> XTP_SIDE_TYPE<span class="token punctuation">;</span>

<span class="token comment">///ä¹°ï¼ˆæ–°è‚¡ç”³è´­ï¼ŒETFä¹°ï¼Œé…è‚¡ï¼Œä¿¡ç”¨äº¤æ˜“ä¸­æ‹…ä¿å“ä¹°ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_BUY</span>            <span class="token expression"><span class="token number">1</span></span></span>
<span class="token comment">///å–ï¼ˆé€†å›è´­ï¼ŒETFå–ï¼Œä¿¡ç”¨äº¤æ˜“ä¸­æ‹…ä¿å“å–ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SELL</span>           <span class="token expression"><span class="token number">2</span></span></span>
<span class="token comment">///ç”³è´­</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_PURCHASE</span>       <span class="token expression"><span class="token number">7</span></span></span>
<span class="token comment">///èµå›</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REDEMPTION</span>     <span class="token expression"><span class="token number">8</span></span></span>
<span class="token comment">///æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SPLIT</span>          <span class="token expression"><span class="token number">9</span></span></span>
<span class="token comment">///åˆå¹¶</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_MERGE</span>          <span class="token expression"><span class="token number">10</span></span></span>
<span class="token comment">///æ”¹ç‰ˆä¹‹åçš„sideçš„å¤‡å…‘ï¼Œæš‚ä¸æ”¯æŒ</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_COVER</span>          <span class="token expression"><span class="token number">11</span></span></span>
<span class="token comment">///æ”¹ç‰ˆä¹‹åçš„sideé”å®šï¼ˆå¯¹åº”å¼€å¹³æ ‡è¯†ä¸ºå¼€ï¼‰/è§£é”ï¼ˆå¯¹åº”å¼€å¹³æ ‡è¯†ä¸ºå¹³ï¼‰</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_FREEZE</span>         <span class="token expression"><span class="token number">12</span></span></span>
<span class="token comment">/// èèµ„ä¹°å…¥</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_MARGIN_TRADE</span>	<span class="token expression"><span class="token number">21</span></span></span>
<span class="token comment">/// èåˆ¸å–å‡º</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SHORT_SELL</span>		<span class="token expression"><span class="token number">22</span></span></span>
<span class="token comment">/// å–åˆ¸è¿˜æ¬¾</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REPAY_MARGIN</span>	<span class="token expression"><span class="token number">23</span></span></span>
<span class="token comment">/// ä¹°åˆ¸è¿˜åˆ¸</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_REPAY_STOCK</span>	<span class="token expression"><span class="token number">24</span></span></span>
<span class="token comment">/// ç°é‡‘è¿˜æ¬¾ï¼ˆä¸æ”¾åœ¨æ™®é€šè®¢å•åè®®ï¼Œå¦åŠ è¯·æ±‚å’ŒæŸ¥è¯¢åè®®ï¼‰</span>
<span class="token comment">//#define XTP_SIDE_CASH_REPAY_MARGIN	25</span>
<span class="token comment">/// ç°åˆ¸è¿˜åˆ¸</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_STOCK_REPAY_STOCK</span>	<span class="token expression"><span class="token number">26</span></span></span>
<span class="token comment">/// ä½™åˆ¸åˆ’è½¬</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_SURSTK_TRANS</span>       <span class="token expression"><span class="token number">27</span></span></span>
<span class="token comment">/// æ‹…ä¿å“è½¬å…¥</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_GRTSTK_TRANSIN</span>     <span class="token expression"><span class="token number">28</span></span></span>
<span class="token comment">/// æ‹…ä¿å“è½¬å‡º</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_GRTSTK_TRANSOUT</span>    <span class="token expression"><span class="token number">29</span></span></span>

<span class="token comment">///ç»„åˆç­–ç•¥çš„ç»„åˆ</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_COMBINE</span>        <span class="token expression"><span class="token number">31</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT</span>          <span class="token expression"><span class="token number">32</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„ç®¡ç†å‘˜å¼ºåˆ¶æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT_FORCE</span>    <span class="token expression"><span class="token number">33</span> </span></span>
<span class="token comment">///ç»„åˆç­–ç•¥çš„äº¤æ˜“æ‰€å¼ºåˆ¶æ‹†åˆ†</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_OPT_SPLIT_FORCE_EXCH</span>    <span class="token expression"><span class="token number">34</span></span></span>

<span class="token comment">///æœªçŸ¥æˆ–è€…æ— æ•ˆä¹°å–æ–¹å‘</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SIDE_UNKNOWN</span>        <span class="token expression"><span class="token number">50</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_BUSINESS_TYPEè¯åˆ¸ä¸šåŠ¡ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_BUSINESS_TYPE</span>
<span class="token punctuation">{</span>
	XTP_BUSINESS_TYPE_CASH <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token comment">///&lt;æ™®é€šè‚¡ç¥¨ä¸šåŠ¡ï¼ˆè‚¡ç¥¨ä¹°å–ï¼ŒETFä¹°å–ï¼Œæ²ªå¸‚äº¤æ˜“å‹è´§å¸åŸºé‡‘ç­‰ï¼‰</span>
	XTP_BUSINESS_TYPE_IPOS<span class="token punctuation">,</span>                <span class="token comment">///&lt;æ–°è‚¡ç”³è´­ä¸šåŠ¡ï¼ˆå¯¹åº”çš„price typeéœ€é€‰æ‹©é™ä»·ç±»å‹ï¼‰</span>
	XTP_BUSINESS_TYPE_REPO<span class="token punctuation">,</span>                <span class="token comment">///&lt;å›è´­ä¸šåŠ¡ï¼ˆå›½å€ºé€†å›è´­ä¸šåŠ¡å¯¹åº”çš„price typeå¡«ä¸ºé™ä»·ï¼Œsideå¡«ä¸ºå–ï¼‰</span>
	XTP_BUSINESS_TYPE_ETF<span class="token punctuation">,</span>                 <span class="token comment">///&lt;ETFç”³èµä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_MARGIN<span class="token punctuation">,</span>              <span class="token comment">///&lt;èèµ„èåˆ¸ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_DESIGNATION<span class="token punctuation">,</span>         <span class="token comment">///&lt;è½¬æ‰˜ç®¡ï¼ˆæœªæ”¯æŒï¼‰</span>
	XTP_BUSINESS_TYPE_ALLOTMENT<span class="token punctuation">,</span>		   <span class="token comment">///&lt;é…è‚¡ä¸šåŠ¡ï¼ˆå¯¹åº”çš„price typeéœ€é€‰æ‹©é™ä»·ç±»å‹,sideå¡«ä¸ºä¹°ï¼‰</span>
	XTP_BUSINESS_TYPE_STRUCTURED_FUND_PURCHASE_REDEMPTION<span class="token punctuation">,</span>	   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘ç”³èµä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_STRUCTURED_FUND_SPLIT_MERGE<span class="token punctuation">,</span>	   <span class="token comment">///&lt;åˆ†çº§åŸºé‡‘æ‹†åˆ†åˆå¹¶ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_MONEY_FUND<span class="token punctuation">,</span>		   <span class="token comment">///&lt;è´§å¸åŸºé‡‘ç”³èµä¸šåŠ¡ï¼ˆæš‚æœªæ”¯æŒï¼Œæ²ªå¸‚äº¤æ˜“å‹è´§å¸åŸºé‡‘çš„ä¹°å–è¯·ä½¿ç”¨æ™®é€šè‚¡ç¥¨ä¸šåŠ¡ï¼‰</span>
    XTP_BUSINESS_TYPE_OPTION<span class="token punctuation">,</span>              <span class="token comment">///&lt;æœŸæƒä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_EXECUTE<span class="token punctuation">,</span>             <span class="token comment">///&lt;è¡Œæƒ</span>
    XTP_BUSINESS_TYPE_FREEZE<span class="token punctuation">,</span>              <span class="token comment">///&lt;é”å®šè§£é”ï¼Œæš‚ä¸æ”¯æŒ</span>
    XTP_BUSINESS_TYPE_OPTION_COMBINE<span class="token punctuation">,</span>      <span class="token comment">///&lt;æœŸæƒç»„åˆç­–ç•¥ ç»„åˆå’Œæ‹†åˆ†ä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_EXECUTE_COMBINE<span class="token punctuation">,</span>     <span class="token comment">///&lt;æœŸæƒè¡Œæƒåˆå¹¶ä¸šåŠ¡</span>
	XTP_BUSINESS_TYPE_BOND_SWAP_STOCK<span class="token punctuation">,</span>     <span class="token comment">///&lt;å€ºè½¬è‚¡ä¸šåŠ¡</span>
    XTP_BUSINESS_TYPE_UNKNOWN<span class="token punctuation">,</span>             <span class="token comment">///&lt;æœªçŸ¥ç±»å‹</span>
<span class="token punctuation">}</span> XTP_BUSINESS_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æœŸæƒç»„åˆç­–ç•¥æŠ¥å•é™„åŠ ä¿¡æ¯ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPOptCombPlugin</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span>                                strategy_id<span class="token punctuation">[</span>XTP_STRATEGY_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>               <span class="token comment">///&lt; ç»„åˆç­–ç•¥ä»£ç ï¼Œæ¯”å¦‚CNSJCè®¤è´­ç‰›å¸‚ä»·å·®ç­–ç•¥ç­‰ã€‚åˆå¹¶è¡Œæƒæ—¶ï¼Œæ­¤å­—æ®µå¯ä¸ºç©º</span>
    <span class="token keyword">char</span>                                comb_num<span class="token punctuation">[</span>XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>           <span class="token comment">///&lt; ç»„åˆç¼–ç ï¼Œç»„åˆç”³æŠ¥æ—¶ï¼Œè¯¥å­—æ®µä¸ºç©ºï¼›æ‹†åˆ†ç”³æŠ¥æ—¶ï¼Œå¡«å†™æ‹Ÿæ‹†åˆ†ç»„åˆçš„ç»„åˆç¼–ç ã€‚</span>
    <span class="token keyword">int32_t</span>                             num_legs<span class="token punctuation">;</span>                                       <span class="token comment">///&lt; æˆåˆ†åˆçº¦æ•°</span>
    XTPOptCombLegInfo                   leg_detail<span class="token punctuation">[</span>XTP_STRATEGE_LEG_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span>               <span class="token comment">///&lt; æˆåˆ†åˆçº¦æ•°ç»„ï¼Œæœ€å¤šå››æ¡è…¿ã€‚</span>
<span class="token punctuation">}</span>XTPOptCombPlugin<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// ç»„åˆç­–ç•¥è…¿åˆçº¦ä¿¡æ¯ç»“æ„ä½“</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">XTPOptCombLegInfo</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span>                            leg_security_id<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">///&lt; æˆåˆ†åˆçº¦ä»£ç </span>
    XTP_OPT_CALL_OR_PUT_TYPE        leg_cntr_type<span class="token punctuation">;</span>                   <span class="token comment">///&lt; åˆçº¦ç±»å‹ï¼Œè®¤æ²½æˆ–è®¤è´­ã€‚</span>
    XTP_POSITION_DIRECTION_TYPE     leg_side<span class="token punctuation">;</span>                        <span class="token comment">///&lt; æŒä»“æ–¹å‘ï¼Œæƒåˆ©æ–¹æˆ–ä¹‰åŠ¡æ–¹ã€‚</span>
    XTP_OPT_COVERED_OR_UNCOVERED    leg_covered<span class="token punctuation">;</span>                     <span class="token comment">///&lt; å¤‡å…‘æ ‡ç­¾</span>
    <span class="token keyword">int32_t</span>                         leg_qty<span class="token punctuation">;</span>                         <span class="token comment">///&lt; æˆåˆ†åˆçº¦æ•°é‡ï¼ˆå¼ ï¼‰</span>
<span class="token punctuation">}</span>XTPOptCombLegInfo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_OPT_CALL_OR_PUT_TYPEæ˜¯ä¸€ä¸ªè®¤æ²½æˆ–è®¤è´­ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_OPT_CALL_OR_PUT_TYPE</span> <span class="token punctuation">{</span>
	XTP_OPT_CALL <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>	    <span class="token comment">///&lt;è®¤è´­</span>
	XTP_OPT_PUT <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>		<span class="token comment">///&lt;è®¤æ²½</span>
<span class="token punctuation">}</span>XTP_OPT_CALL_OR_PUT_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_POSITION_DIRECTION_TYPEæ˜¯ä¸€ä¸ªæŒä»“æ–¹å‘ç±»å‹</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_POSITION_DIRECTION_TYPE</span> <span class="token punctuation">{</span>
	XTP_POSITION_DIRECTION_NET <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>	    <span class="token comment">///&lt;å‡€</span>
	XTP_POSITION_DIRECTION_LONG<span class="token punctuation">,</span>		<span class="token comment">///&lt;å¤šï¼ˆæœŸæƒåˆ™ä¸ºæƒåˆ©æ–¹ï¼‰</span>
    XTP_POSITION_DIRECTION_SHORT<span class="token punctuation">,</span>       <span class="token comment">///&lt;ç©ºï¼ˆæœŸæƒåˆ™ä¸ºä¹‰åŠ¡æ–¹ï¼‰</span>
    XTP_POSITION_DIRECTION_COVERED<span class="token punctuation">,</span>     <span class="token comment">///&lt;å¤‡å…‘ï¼ˆæœŸæƒåˆ™ä¸ºå¤‡å…‘ä¹‰åŠ¡æ–¹ï¼‰</span>
<span class="token punctuation">}</span>XTP_POSITION_DIRECTION_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_OPT_COVERED_OR_UNCOVEREDæ˜¯å¦å¤‡å…‘çš„æ ‡ç­¾</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_OPT_COVERED_OR_UNCOVERED</span> <span class="token punctuation">{</span>
    XTP_POSITION_UNCOVERED <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>     <span class="token comment">///&lt;éå¤‡å…‘</span>
    XTP_POSITION_COVERED<span class="token punctuation">,</span>           <span class="token comment">///&lt;å¤‡å…‘</span>
<span class="token punctuation">}</span>XTP_OPT_COVERED_OR_UNCOVERED<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
<span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥æœ€å¤šè…¿æ•°</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_STRATEGE_LEG_NUM</span> <span class="token expression"><span class="token number">4</span></span></span>
<span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥ä»£ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_STRATEGY_ID_LEN</span> <span class="token expression"><span class="token number">10</span></span></span>
<span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥ç»„åˆç¼–ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SECONDARY_ORDER_ID_LEN</span> <span class="token expression"><span class="token number">18</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŠ¥å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæŠ¥å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæŠ¥å•å‘é€æˆåŠŸï¼Œæ­¤æ—¶ç­‰åŒä¸ä¼ å…¥çš„order_xtp_idã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŒ‰CNSJCç­–ç•¥å¯¹æ·±å¸‚æŸç»„åˆä¸­çš„100ä»½è¿›è¡Œæ‹†åˆ†</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span> new_xtp_id <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetANewOrderXTPID</span><span class="token punctuation">(</span>session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// æœŸæƒç»„åˆç­–ç•¥æŠ¥å•é™„åŠ ä¿¡æ¯ç»“æ„ä½“åˆå§‹åŒ–</span>
	XTPOptCombPlugin plugin_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPOptCombPlugin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string std_str_strategy_id <span class="token operator">=</span> <span class="token string">&quot;CNSJC&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>plugin_param<span class="token punctuation">.</span>strategy_id<span class="token punctuation">,</span> std_str_strategy_id<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_STRATEGY_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// éœ€è¦æ‹†åˆ†çš„ç»„åˆç¼–ç </span>
	std<span class="token double-colon punctuation">::</span>string std_str_comb_num <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>plugin_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> std_str_comb_num<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// æœŸæƒç»„åˆç­–ç•¥æŠ¥å•ç»“æ„ä½“åˆå§‹åŒ–</span>
	XTPOptCombOrderInsertInfo order<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPOptCombOrderInsertInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	order<span class="token punctuation">.</span>order_xtp_id <span class="token operator">=</span> new_xtp_id<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SZ_A<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>quantity <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>business_type <span class="token operator">=</span> XTP_BUSINESS_TYPE_OPTION_COMBINE<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>side <span class="token operator">=</span> XTP_SIDE_OPT_SPLIT<span class="token punctuation">;</span>
	order<span class="token punctuation">.</span>opt_comb_info <span class="token operator">=</span> plugin_param<span class="token punctuation">;</span>

	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">InsertOptionCombinedOrderExtra</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>order<span class="token punctuation">,</span>session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> new_xtp_id<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// ç»„åˆç­–ç•¥æŠ¥å•å‘é€æˆåŠŸ</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŠ¥å•å®Œæˆå“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOptionCombinedOrderEvent</span><span class="token punctuation">(</span>XTPOptCombOrderInfo <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// æŠ¥å•æˆäº¤å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOptionCombinedTradeEvent</span><span class="token punctuation">(</span>XTPOptCombTradeReport <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_64-canceloptioncombinedorder" tabindex="-1"><a class="header-anchor" href="#_64-canceloptioncombinedorder"><span>64. CancelOptionCombinedOrder</span></a></h3><p>æœŸæƒç»„åˆç­–ç•¥æŠ¥å•æ’¤å•è¯·æ±‚ã€‚</p><p>å¦‚æœæ’¤å•æˆåŠŸï¼Œä¼šåœ¨æŠ¥å•å“åº”å‡½æ•°OnOptionCombinedOrderEvent()é‡Œè¿”å›åŸå•éƒ¨æ’¤æˆ–è€…å…¨æ’¤çš„æ¶ˆæ¯ï¼Œå¦‚æœä¸æˆåŠŸï¼Œä¼šåœ¨OnCancelOrderError()å“åº”å‡½æ•°ä¸­è¿”å›é”™è¯¯åŸå› ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">CancelOptionCombinedOrder</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æ’¤é”€çš„æœŸæƒç»„åˆç­–ç•¥å§”æ‰˜å•åœ¨XTPç³»ç»Ÿä¸­çš„ID</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>æ’¤å•åœ¨XTPç³»ç»Ÿä¸­çš„ID,å¦‚æœä¸ºâ€˜0â€™è¡¨ç¤ºæ’¤å•å‘é€å¤±è´¥ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œé&quot;0&quot;è¡¨ç¤ºæ’¤å•å‘é€æˆåŠŸï¼Œç”¨æˆ·éœ€è¦è®°å½•ä¸‹è¿”å›çš„order_cancel_xtp_idï¼Œå®ƒä¿è¯ä¸€ä¸ªäº¤æ˜“æ—¥å†…å”¯ä¸€ï¼Œä¸åŒçš„äº¤æ˜“æ—¥ä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æœŸæƒç»„åˆç­–ç•¥æŠ¥å•æ’¤å•è¯·æ±‚</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">CancelOptionCombinedOrder</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ’¤å•å®Œæˆå“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnOptionCombinedOrderEvent</span><span class="token punctuation">(</span>XTPOptCombOrderInfo <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// æ’¤å•å¤±è´¥å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnCancelOptionCombinedOrderError</span><span class="token punctuation">(</span>XTPOptCombOrderCancelInfo <span class="token operator">*</span>cancel_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_65-queryoptioncombinedunfinishedorders" tabindex="-1"><a class="header-anchor" href="#_65-queryoptioncombinedunfinishedorders"><span>65. QueryOptionCombinedUnfinishedOrders</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æœªå®Œç»“æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedUnfinishedOrders</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æœªå®Œç»“æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedUnfinishedOrders</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span>request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedOrders</span><span class="token punctuation">(</span>XTPQueryOptCombOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_66-queryoptioncombinedorderbyxtpid" tabindex="-1"><a class="header-anchor" href="#_66-queryoptioncombinedorderbyxtpid"><span>66. QueryOptionCombinedOrderByXTPID</span></a></h3><p>æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrderByXTPID</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrderByXTPID</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedOrders</span><span class="token punctuation">(</span>XTPQueryOptCombOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_67-queryoptioncombinedorders" tabindex="-1"><a class="header-anchor" href="#_67-queryoptioncombinedorders"><span>67. QueryOptionCombinedOrders</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æŠ¥å•ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æŠ¥å•ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrders</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombOrderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„è®¢å•ç›¸å…³ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æœŸæƒç»„åˆç­–ç•¥æŠ¥å•æŸ¥è¯¢è¯·æ±‚-æ¡ä»¶æŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptCombOrderReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///ç»„åˆç¼–ç ï¼ˆæµæ°´å·ï¼‰ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥</span>
    <span class="token keyword">char</span>      comb_num<span class="token punctuation">[</span>XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹</span>
    <span class="token keyword">int64_t</span>   begin_time<span class="token punctuation">;</span>
    <span class="token comment">///æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
    <span class="token keyword">int64_t</span>   end_time<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥ç»„åˆç¼–ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SECONDARY_ORDER_ID_LEN</span> <span class="token expression"><span class="token number">18</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„æ‰€æœ‰æœŸæƒç»„åˆç­–ç•¥æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrders</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æŸæœŸæƒç»„åˆç­–ç•¥åœ¨å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„å…¨éƒ¨æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string <span class="token function">comNumStr</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> comNumStr<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrders</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æŸæœŸæƒç»„åˆç­–ç•¥åœ¨21å¹´8æœˆ1æ—¥0æ—¶è‡³15æ—¶çš„å…¨éƒ¨æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string <span class="token function">comNumStr</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> comNumStr<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>begin_time <span class="token operator">=</span> <span class="token number">20210801000000000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>end_time <span class="token operator">=</span> <span class="token number">20210801150000000</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrders</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedOrders</span><span class="token punctuation">(</span>XTPQueryOptCombOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_68-queryoptioncombinedordersbypage" tabindex="-1"><a class="header-anchor" href="#_68-queryoptioncombinedordersbypage"><span>68. QueryOptionCombinedOrdersByPage</span></a></h3><p>åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ—§ç‰ˆæœ¬æ¥å£ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrdersByPage</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombOrderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆquery_param.referenceå¡«0</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥è®¢å•è¯·æ±‚-åˆ†é¡µæŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptCombOrderByPageReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///éœ€è¦æŸ¥è¯¢çš„è®¢å•æ¡æ•°</span>
    <span class="token keyword">int64_t</span>         req_count<span class="token punctuation">;</span>
    <span class="token comment">///ä¸Šä¸€æ¬¡æ”¶åˆ°çš„æŸ¥è¯¢è®¢å•ç»“æœä¸­å¸¦å›æ¥çš„ç´¢å¼•ï¼Œå¦‚æœæ˜¯ä»å¤´æŸ¥è¯¢ï¼Œè¯·ç½®0</span>
    <span class="token keyword">int64_t</span>         reference<span class="token punctuation">;</span>
    <span class="token comment">///ä¿ç•™å­—æ®µ</span>
    <span class="token keyword">int64_t</span>         reserved<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ä»ç´¢å¼•åˆå§‹å¼€å§‹åˆ†é¡µæŸ¥è¯¢50æ¡æœŸæƒç»„åˆç­–ç•¥æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombOrderByPageReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombOrderByPageReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	query_param<span class="token punctuation">.</span>req_count <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>reference <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrdersByPage</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedOrdersByPage</span><span class="token punctuation">(</span>XTPQueryOptCombOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> req_count<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> order_sequence<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> query_reference<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_69-queryoptioncombinedunfinishedordersex" tabindex="-1"><a class="header-anchor" href="#_69-queryoptioncombinedunfinishedordersex"><span>69. QueryOptionCombinedUnfinishedOrdersEx</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æœªå®Œç»“æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedUnfinishedOrdersEx</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æœªå®Œç»“æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedUnfinishedOrders</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span>request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedOrdersEx</span><span class="token punctuation">(</span>XTPQueryOptCombOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_70-queryoptioncombinedorderbyxtpidex" tabindex="-1"><a class="header-anchor" href="#_70-queryoptioncombinedorderbyxtpidex"><span>70. QueryOptionCombinedOrderByXTPIDEx</span></a></h3><p>æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrderByXTPIDEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„æŠ¥å•åœ¨xtpç³»ç»Ÿä¸­çš„IDï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrderByXTPIDEx</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedOrdersEx</span><span class="token punctuation">(</span>XTPQueryOptCombOrderRsp <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_71-queryoptioncombinedordersex" tabindex="-1"><a class="header-anchor" href="#_71-queryoptioncombinedordersex"><span>71. QueryOptionCombinedOrdersEx</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æŠ¥å•ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æŠ¥å•ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrdersEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombOrderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„è®¢å•ç›¸å…³ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æœŸæƒç»„åˆç­–ç•¥æŠ¥å•æŸ¥è¯¢è¯·æ±‚-æ¡ä»¶æŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptCombOrderReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///ç»„åˆç¼–ç ï¼ˆæµæ°´å·ï¼‰ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥</span>
    <span class="token keyword">char</span>      comb_num<span class="token punctuation">[</span>XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹</span>
    <span class="token keyword">int64_t</span>   begin_time<span class="token punctuation">;</span>
    <span class="token comment">///æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
    <span class="token keyword">int64_t</span>   end_time<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥ç»„åˆç¼–ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SECONDARY_ORDER_ID_LEN</span> <span class="token expression"><span class="token number">18</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„æ‰€æœ‰æœŸæƒç»„åˆç­–ç•¥æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrdersEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æŸæœŸæƒç»„åˆç­–ç•¥åœ¨å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„å…¨éƒ¨æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string <span class="token function">comNumStr</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> comNumStr<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrdersEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æŸæœŸæƒç»„åˆç­–ç•¥åœ¨21å¹´8æœˆ1æ—¥0æ—¶è‡³15æ—¶çš„å…¨éƒ¨æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOrderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOrderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string <span class="token function">comNumStr</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> comNumStr<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>begin_time <span class="token operator">=</span> <span class="token number">20210801000000000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>end_time <span class="token operator">=</span> <span class="token number">20210801150000000</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrdersEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedOrdersEx</span><span class="token punctuation">(</span>XTPOptCombOrderInfoEx <span class="token operator">*</span>order_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_72-queryoptioncombinedordersbypageex" tabindex="-1"><a class="header-anchor" href="#_72-queryoptioncombinedordersbypageex"><span>72. QueryOptionCombinedOrdersByPageEx</span></a></h3><p>åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŠ¥å•-æ–°ç‰ˆæœ¬æ¥å£ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedOrdersByPageEx</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombOrderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆquery_param.referenceå¡«0</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥è®¢å•è¯·æ±‚-åˆ†é¡µæŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptCombOrderByPageReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///éœ€è¦æŸ¥è¯¢çš„è®¢å•æ¡æ•°</span>
    <span class="token keyword">int64_t</span>         req_count<span class="token punctuation">;</span>
    <span class="token comment">///ä¸Šä¸€æ¬¡æ”¶åˆ°çš„æŸ¥è¯¢è®¢å•ç»“æœä¸­å¸¦å›æ¥çš„ç´¢å¼•ï¼Œå¦‚æœæ˜¯ä»å¤´æŸ¥è¯¢ï¼Œè¯·ç½®0</span>
    <span class="token keyword">int64_t</span>         reference<span class="token punctuation">;</span>
    <span class="token comment">///ä¿ç•™å­—æ®µ</span>
    <span class="token keyword">int64_t</span>         reserved<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ä»ç´¢å¼•åˆå§‹å¼€å§‹åˆ†é¡µæŸ¥è¯¢50æ¡æœŸæƒç»„åˆç­–ç•¥æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombOrderByPageReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombOrderByPageReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	query_param<span class="token punctuation">.</span>req_count <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>reference <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedOrdersByPageEx</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedOrdersByPageEx</span><span class="token punctuation">(</span>XTPOptCombOrderInfoEx <span class="token operator">*</span>order_info<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> req_count<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> order_sequence<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> query_reference<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_73-queryoptioncombinedtradesbyxtpid" tabindex="-1"><a class="header-anchor" href="#_73-queryoptioncombinedtradesbyxtpid"><span>73. QueryOptionCombinedTradesByXTPID</span></a></h3><p>æ ¹æ®æœŸæƒç»„åˆç­–ç•¥å§”æ‰˜ç¼–å·è¯·æ±‚æŸ¥è¯¢ç›¸å…³æˆäº¤ã€‚æ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedTradesByXTPID</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šéœ€è¦æŸ¥è¯¢çš„å§”æ‰˜ç¼–å·ï¼Œå³InsertOrder()æˆåŠŸæ—¶è¿”å›çš„order_xtp_id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ ¹æ®æœŸæƒç»„åˆç­–ç•¥å§”æ‰˜ç¼–å·è¯·æ±‚æŸ¥è¯¢ç›¸å…³æˆäº¤</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedTradesByXTPID</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedTrades</span><span class="token punctuation">(</span>XTPQueryOptCombTradeRsp <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_74-queryoptioncombinedtrades" tabindex="-1"><a class="header-anchor" href="#_74-queryoptioncombinedtrades"><span>74. QueryOptionCombinedTrades</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥çš„æˆäº¤å›æŠ¥ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†æ—¶æ®µæŸ¥è¯¢ï¼Œå¦‚æœè‚¡ç¥¨ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥ï¼Œå¦åˆ™æŸ¥è¯¢æ—¶é—´æ®µå†…æ‰€æœ‰è·Ÿè‚¡ç¥¨ä»£ç ç›¸å…³çš„æˆäº¤å›æŠ¥ï¼Œæ­¤å‡½æ•°æŸ¥è¯¢å‡ºçš„ç»“æœå¯èƒ½å¯¹åº”å¤šä¸ªæŸ¥è¯¢ç»“æœå“åº”ã€‚æ­¤å‡½æ•°ä¸å»ºè®®è½®è¯¢ä½¿ç”¨ï¼Œå½“æŠ¥å•é‡è¿‡å¤šæ—¶ï¼Œå®¹æ˜“é€ æˆç”¨æˆ·çº¿è·¯æ‹¥å µï¼Œå¯¼è‡´apiæ–­çº¿ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedTrades</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombTraderReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„æˆäº¤å›æŠ¥ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºï¼Œåˆ™é»˜è®¤æ‰€æœ‰å­˜åœ¨çš„åˆçº¦ä»£ç ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œå…¶ä¸­èµ·å§‹æ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹ï¼Œç»“æŸæ—¶é—´æ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æˆäº¤å›æŠ¥è¯·æ±‚-æŸ¥è¯¢æ¡ä»¶</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptCombTraderReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///ç»„åˆç¼–ç ï¼ˆæµæ°´å·ï¼‰ï¼Œå¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰æˆäº¤å›æŠ¥</span>
    <span class="token keyword">char</span>      comb_num<span class="token punctuation">[</span>XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///å¼€å§‹æ—¶é—´ï¼Œæ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰äº¤æ˜“æ—¥0ç‚¹</span>
    <span class="token keyword">int64_t</span>   begin_time<span class="token punctuation">;</span>
    <span class="token comment">///ç»“æŸæ—¶é—´ï¼Œæ ¼å¼ä¸ºYYYYMMDDHHMMSSsssï¼Œä¸º0åˆ™é»˜è®¤å½“å‰æ—¶é—´</span>
    <span class="token keyword">int64_t</span>   end_time<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„æ‰€æœ‰æˆäº¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombTraderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombTraderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedTrades</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æŸæœŸæƒç»„åˆç­–ç•¥åœ¨å½“å‰äº¤æ˜“æ—¥0ç‚¹è‡³å½“å‰æ—¶é—´ç‚¹çš„å…¨éƒ¨æˆäº¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombTraderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombTraderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string <span class="token function">comNumStr</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> comNumStr<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedTrades</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æŸæœŸæƒç»„åˆç­–ç•¥åœ¨21å¹´8æœˆ1æ—¥0æ—¶è‡³15æ—¶çš„å…¨éƒ¨æˆäº¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombTraderReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombTraderReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token double-colon punctuation">::</span>string <span class="token function">comNumStr</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> comNumStr<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>begin_time <span class="token operator">=</span> <span class="token number">20210801000000000</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>end_time <span class="token operator">=</span> <span class="token number">20210801150000000</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedTrades</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedTrades</span><span class="token punctuation">(</span>XTPQueryOptCombTradeRsp <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_75-queryoptioncombinedtradesbypage" tabindex="-1"><a class="header-anchor" href="#_75-queryoptioncombinedtradesbypage"><span>75. QueryOptionCombinedTradesByPage</span></a></h3><p>åˆ†é¡µè¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æˆäº¤å›æŠ¥ã€‚</p><p>è¯¥æ–¹æ³•æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæ³¨æ„ç”¨æˆ·éœ€è¦è®°å½•ä¸‹æœ€åä¸€ç¬”æŸ¥è¯¢ç»“æœçš„referenceä»¥ä¾¿ç”¨æˆ·ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedTradesByPage</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombTraderByPageReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦åˆ†é¡µæŸ¥è¯¢è®¢å•çš„æ¡ä»¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆreferenceå¡«0</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æˆäº¤å›æŠ¥è¯·æ±‚-åˆ†é¡µæŸ¥è¯¢</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptCombTraderByPageReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///éœ€è¦æŸ¥è¯¢çš„æˆäº¤å›æŠ¥æ¡æ•°</span>
    <span class="token keyword">int64_t</span>         req_count<span class="token punctuation">;</span>
    <span class="token comment">///ä¸Šä¸€æ¬¡æ”¶åˆ°çš„æŸ¥è¯¢æˆäº¤å›æŠ¥ç»“æœä¸­å¸¦å›æ¥çš„ç´¢å¼•ï¼Œå¦‚æœæ˜¯ä»å¤´æŸ¥è¯¢ï¼Œè¯·ç½®0</span>
    <span class="token keyword">int64_t</span>         reference<span class="token punctuation">;</span>
    <span class="token comment">///ä¿ç•™å­—æ®µ</span>
    <span class="token keyword">int64_t</span>         reserved<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ä»ç´¢å¼•åˆå§‹å¼€å§‹åˆ†é¡µæŸ¥è¯¢50æ¡æœŸæƒç»„åˆç­–ç•¥æˆäº¤å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombTraderByPageReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombTraderByPageReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	query_param<span class="token punctuation">.</span>req_count <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
	query_param<span class="token punctuation">.</span>reference <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedTradesByPage</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span>session_id<span class="token punctuation">,</span>request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedTradesByPage</span><span class="token punctuation">(</span>XTPQueryOptCombTradeRsp <span class="token operator">*</span>trade_info<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> req_count<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> trade_sequence<span class="token punctuation">,</span> <span class="token keyword">int64_t</span> query_reference<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_76-queryoptioncombinedposition" tabindex="-1"><a class="header-anchor" href="#_76-queryoptioncombinedposition"><span>76. QueryOptionCombinedPosition</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æŠ•èµ„è€…æœŸæƒç»„åˆç­–ç•¥æŒä»“ã€‚</p><p>è¯¥æ–¹æ³•å¦‚æœç”¨æˆ·æä¾›äº†åˆçº¦ä»£ç ï¼Œåˆ™ä¼šæŸ¥è¯¢æ­¤åˆçº¦çš„æŒä»“ä¿¡æ¯ï¼ˆæ³¨æ„è¯·æŒ‡å®šmarketï¼Œå¦‚æœmarketä¸º0ï¼Œå¯èƒ½ä¼šæŸ¥è¯¢åˆ°2ä¸ªå¸‚åœºçš„æŒä»“ï¼Œå¦‚æœmarketä¸ºå…¶ä»–éæœ‰æ•ˆå€¼ï¼Œåˆ™æŸ¥è¯¢ç»“æœä¼šè¿”å›æ‰¾ä¸åˆ°æŒä»“ï¼‰ï¼Œå¦‚æœåˆçº¦ä»£ç ä¸ºç©ºï¼Œåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰æŒä»“ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedPosition</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombPositionReq<span class="token operator">*</span> query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢æŒä»“çš„ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­ç»„åˆç­–ç•¥ä»£ç å¯ä»¥åˆå§‹åŒ–ä¸ºç©ºï¼Œè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œæ³¨æ„éœ€ä¸marketåŒ¹é…ï¼Œä¸åŒ¹é…çš„è¯ï¼Œå¯èƒ½å¯¼è‡´æŸ¥è¯¢ä¸åˆ°æ‰€éœ€çš„æŒä»“</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥æŒä»“æƒ…å†µè¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptCombPositionReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///ç»„åˆç¼–ç </span>
    <span class="token keyword">char</span> comb_num<span class="token punctuation">[</span>XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///äº¤æ˜“å¸‚åœº</span>
    XTP_MARKET_TYPE     market<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///XTP_MARKET_TYPEå¸‚åœºç±»å‹ï¼Œäº¤æ˜“é‡Œä½¿ç”¨</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_MARKET_TYPE</span>
<span class="token punctuation">{</span>
    XTP_MKT_INIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">///&lt;åˆå§‹åŒ–å€¼æˆ–è€…æœªçŸ¥</span>
    XTP_MKT_SZ_A <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">///&lt;æ·±åœ³Aè‚¡</span>
    XTP_MKT_SH_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;ä¸Šæµ·Aè‚¡</span>
    XTP_MKT_BJ_A<span class="token punctuation">,</span>    <span class="token comment">///&lt;åŒ—äº¬Aè‚¡</span>
    XTP_MKT_HK<span class="token punctuation">,</span>      <span class="token comment">///&lt;æ¸¯è‚¡</span>
    XTP_MKT_UNKNOWN   <span class="token comment">///&lt;æœªçŸ¥äº¤æ˜“å¸‚åœºç±»å‹</span>
<span class="token punctuation">}</span>XTP_MARKET_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// æœŸæƒç»„åˆç­–ç•¥ç»„åˆç¼–ç å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_SECONDARY_ORDER_ID_LEN</span>  <span class="token expression"><span class="token number">18</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ·±å¸‚æŸæœŸæƒç»„åˆç­–ç•¥çš„æŒä»“ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombPositionReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombPositionReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SZ_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string <span class="token function">combNumStr</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>comb_num<span class="token punctuation">,</span> combNumStr<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_SECONDARY_ORDER_ID_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedPosition</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å…¨å¸‚åœºæ‰€æœ‰çš„æœŸæƒç»„åˆç­–ç•¥æŒä»“ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombPositionReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombPositionReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedPosition</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedPosition</span><span class="token punctuation">(</span>XTPQueryOptCombPositionRsp <span class="token operator">*</span>position_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_77-queryoptioncombinedstrategyinfo" tabindex="-1"><a class="header-anchor" href="#_77-queryoptioncombinedstrategyinfo"><span>77. QueryOptionCombinedStrategyInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥ä¿¡æ¯ã€‚è¯¥æ–¹æ³•ä»…æ”¯æŒç²¾ç¡®æŸ¥è¯¢ï¼Œä¸æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedStrategyInfo</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æœŸæƒç»„åˆç­–ç•¥ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedStrategyInfo</span><span class="token punctuation">(</span>session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedStrategyInfo</span><span class="token punctuation">(</span>XTPQueryCombineStrategyInfoRsp <span class="token operator">*</span>strategy_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_78-queryoptioncombinedexecposition" tabindex="-1"><a class="header-anchor" href="#_78-queryoptioncombinedexecposition"><span>78. QueryOptionCombinedExecPosition</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢æœŸæƒè¡Œæƒåˆå¹¶å¤´å¯¸ã€‚è¯¥æ–¹æ³•å¯èƒ½å¯¹åº”å¤šæ¡å“åº”æ¶ˆæ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryOptionCombinedExecPosition</span><span class="token punctuation">(</span><span class="token keyword">const</span> XTPQueryOptCombExecPosReq<span class="token operator">*</span> query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„è¡Œæƒåˆå¹¶çš„ç­›é€‰æ¡ä»¶ï¼Œå…¶ä¸­marketä¸º0ä¼šé»˜è®¤æŸ¥è¯¢å…¨å¸‚åœºï¼Œæˆåˆ†åˆçº¦ä»£ç å¯ä»¥åˆå§‹åŒ–ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œæ³¨æ„æ‰€æœ‰å¡«å†™çš„æ¡ä»¶éƒ½ä¼šè¿›è¡ŒåŒ¹é…</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///æŸ¥è¯¢æœŸæƒè¡Œæƒåˆå¹¶å¤´å¯¸è¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">struct</span> <span class="token class-name">XTPQueryOptCombExecPosReq</span>
<span class="token punctuation">{</span>
    <span class="token comment">///å¸‚åœº</span>
    XTP_MARKET_TYPE market<span class="token punctuation">;</span>
    <span class="token comment">///æˆåˆ†åˆçº¦1ä»£ç </span>
    <span class="token keyword">char</span> cntrt_code_1<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">///æˆåˆ†åˆçº¦2ä»£ç </span>
    <span class="token keyword">char</span> cntrt_code_2<span class="token punctuation">[</span>XTP_TICKER_LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">/// å­˜æ”¾è¯åˆ¸ä»£ç çš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">XTP_TICKER_LEN</span> <span class="token expression"><span class="token number">16</span></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æŸæœŸæƒè¡Œæƒåˆå¹¶å¤´å¯¸</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombExecPosReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombExecPosReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_INIT<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string ticker1 <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxx&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string ticker2 <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>cntrt_code_1<span class="token punctuation">,</span> ticker1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>cntrt_code_1<span class="token punctuation">,</span> ticker2<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedExecPosition</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢å…¨å¸‚åœºæœŸæƒè¡Œæƒåˆå¹¶å¤´å¯¸</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryOptCombExecPosReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryOptCombExecPosReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryOptionCombinedExecPosition</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryOptionCombinedExecPosition</span><span class="token punctuation">(</span>XTPQueryOptCombExecPosRsp <span class="token operator">*</span>position_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_79-loginalgo" tabindex="-1"><a class="header-anchor" href="#_79-loginalgo"><span>79. LoginALGO</span></a></h3><p>ç”¨æˆ·ç™»å½•algoæœåŠ¡å™¨è¯·æ±‚ã€‚æ­¤å‡½æ•°ä¸ºåŒæ­¥é˜»å¡å¼ï¼Œä¸éœ€è¦å¼‚æ­¥ç­‰å¾…ç™»å½•æˆåŠŸï¼Œå½“å‡½æ•°è¿”å›å³å¯è¿›è¡Œåç»­æ“ä½œï¼Œæ­¤apiåªéœ€è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰€æœ‰ç”¨æˆ·å…±ç”¨å³å¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">LoginALGO</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> ip<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> user<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> password<span class="token punctuation">,</span> XTP_PROTOCOL_TYPE sock_type<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> local_ip <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>ipï¼šalgoæœåŠ¡å™¨åœ°å€ï¼Œç±»ä¼¼&quot;127.0.0.1&quot;</p><p>portï¼šalgoæœåŠ¡å™¨ç«¯å£å·</p><p>userï¼šç™»å½•ç”¨æˆ·å</p><p>passwordï¼šç™»å½•å¯†ç </p><p>sock_typeï¼š&quot;1&quot;ä»£è¡¨TCPï¼Œ&quot;2&quot;ä»£è¡¨UDPï¼Œç›®å‰æš‚æ—¶åªæ”¯æŒTCP</p><p>local_ipï¼šæœ¬åœ°ç½‘å¡åœ°å€ï¼Œç±»ä¼¼&quot;127.0.0.1&quot;</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// XTP_PROTOCOL_TYPEæ˜¯é€šè®¯ä¼ è¾“åè®®æ–¹å¼</span>
<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token class-name">XTP_PROTOCOL_TYPE</span>
<span class="token punctuation">{</span>
	XTP_PROTOCOL_TCP <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>	<span class="token comment">///&lt;é‡‡ç”¨TCPæ–¹å¼ä¼ è¾“</span>
	XTP_PROTOCOL_UDP		<span class="token comment">///&lt;é‡‡ç”¨UDPæ–¹å¼ä¼ è¾“(ä»…è¡Œæƒ…æ¥å£æ”¯æŒ)</span>
<span class="token punctuation">}</span>XTP_PROTOCOL_TYPE<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.è¿”å›</p><p>è¡¨æ˜æ­¤èµ„é‡‘è´¦å·ç™»å½•æ˜¯å¦æˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºç™»å½•å¤±è´¥ï¼Œå¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œâ€œ0â€è¡¨ç¤ºç™»å½•æˆåŠŸã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ç™»å½•algoæœåŠ¡å™¨è¯·æ±‚ï¼Œå‚æ•°ç½‘å€ç«¯å£è´¦æˆ·å¯†ç æ¨¡å¼ç­‰å’Œé»˜è®¤å‚æ•°æœ¬æœºåœ°å€éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	std<span class="token double-colon punctuation">::</span>string server_ip_algo <span class="token operator">=</span> <span class="token string">&quot;xxx.xxx.xxx.xxx&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> server_port_algo <span class="token operator">=</span> xxxx<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string account_name_algo <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxx&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string account_pw_algo <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string local_ip <span class="token operator">=</span> <span class="token string">&quot;xxx.xxx.xxx.xxx&quot;</span><span class="token punctuation">;</span><span class="token comment">//æ ¹æ®æœ¬åœ°ç½‘å¡å¯¹åº”çš„ipè®¾å®š</span>
	
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">LoginALGO</span><span class="token punctuation">(</span>server_ip_algo<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> server_port_algo<span class="token punctuation">,</span> account_name_algo<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> account_pw_algo<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_PROTOCOL_TCP<span class="token punctuation">,</span> local_ip<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>login_ret <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// ç™»å½•algoæœåŠ¡å™¨æˆåŠŸ</span>
    <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> account_name_algo <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; login to AlgoBus success.&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
		<span class="token comment">// ç™»å½•algoæœåŠ¡å™¨å¤±è´¥</span>
		XTPRI<span class="token operator">*</span> error_info <span class="token operator">=</span> user_trader_api_<span class="token operator">-&gt;</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> account_name_algo <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; login to AlgoBus error, &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_id <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_msg <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_80-querystrategy" tabindex="-1"><a class="header-anchor" href="#_80-querystrategy"><span>80. QueryStrategy</span></a></h3><p>algoä¸šåŠ¡ä¸­æŸ¥è¯¢ç”¨æˆ·ç­–ç•¥è¯·æ±‚ã€‚xtp_strategy_idæ¡ä»¶çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œåªæœ‰å½“xtp_strategy_idä¸º0æ—¶ï¼Œå…¶ä»–æ¡ä»¶æ‰ç”Ÿæ•ˆï¼Œæ­¤æ¡è¯·æ±‚å¯èƒ½å¯¹åº”å¤šæ¡å›åº”æ¶ˆæ¯.</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryStrategy</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span> strategy_type<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> client_strategy_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> xtp_strategy_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int32_t</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>strategy_typeï¼šéœ€è¦æŸ¥è¯¢çš„ç­–ç•¥ç±»å‹ï¼Œå¯å¡«0</p><p>client_strategy_idï¼šéœ€è¦æŸ¥è¯¢çš„ç­–ç•¥ç”¨æˆ·è‡ªå®šä¹‰idï¼Œå¯å¡«0</p><p>xtp_strategy_idï¼šéœ€è¦æŸ¥è¯¢çš„ç­–ç•¥åœ¨xtpç³»ç»Ÿä¸­çš„idï¼Œå¦‚æœæŒ‡å®šï¼Œå°±ä¸€å®šæŒ‰æŒ‡å®šæŸ¥è¯¢ï¼Œå¦‚æœå¡«0ï¼Œåˆ™æŒ‰å…¶ä»–ç­›é€‰æ¡ä»¶æŸ¥è¯¢</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢algoä¸šåŠ¡ä¸­æŸ¥è¯¢ç”¨æˆ·ç­–ç•¥ï¼Œå‚æ•°éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryStrategy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// algoä¸šåŠ¡ä¸­æŸ¥è¯¢ç­–ç•¥åˆ—è¡¨çš„å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryStrategy</span><span class="token punctuation">(</span>XTPStrategyInfoStruct<span class="token operator">*</span> strategy_info<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> strategy_param<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int32_t</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_81-algouserestablishchannel" tabindex="-1"><a class="header-anchor" href="#_81-algouserestablishchannel"><span>81. ALGOUserEstablishChannel</span></a></h3><p>ç”¨æˆ·è¯·æ±‚ä½¿ç”¨algoæœåŠ¡å™¨å»ºç«‹ç®—æ³•é€šé“ã€‚æ­¤å‡½æ•°ä¸ºå¼‚æ­¥æ–¹å¼ï¼Œä¸€ä¸ªç”¨æˆ·åªèƒ½æ‹¥æœ‰ä¸€ä¸ªç®—æ³•é€šé“ï¼Œå¦‚æœä¹‹å‰å·²ç»å»ºç«‹ï¼Œåˆ™æ— éœ€é‡å¤å»ºç«‹ï¼Œåœ¨ä½¿ç”¨ç®—æ³•å‰ï¼Œè¯·å…ˆå»ºç«‹ç®—æ³•é€šé“ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">ALGOUserEstablishChannel</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> oms_ip<span class="token punctuation">,</span> <span class="token keyword">int</span> oms_port<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> user<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> password<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>oms_ipï¼šomsæœåŠ¡å™¨åœ°å€ï¼Œç±»ä¼¼&quot;127.0.0.1&quot;ï¼ŒéalgoæœåŠ¡å™¨åœ°å€</p><p>oms_portï¼šomsæœåŠ¡å™¨ç«¯å£å·</p><p>userï¼šç™»å½•ç”¨æˆ·å</p><p>passwordï¼šç™»å½•å¯†ç </p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>è¡¨æ˜æ­¤èµ„é‡‘è´¦å·å»ºç«‹ç®—æ³•é€šé“è¯·æ±‚æ¶ˆæ¯å‘é€æ˜¯å¦æˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‘é€å¤±è´¥ï¼Œå¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ï¼Œâ€œ0â€è¡¨ç¤ºå‘é€æˆåŠŸ</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è¯·æ±‚ä½¿ç”¨algoæœåŠ¡å™¨å»ºç«‹ç®—æ³•é€šé“ï¼Œå‚æ•°æœåŠ¡å™¨åœ°å€ç«¯å£ç”¨æˆ·åå¯†ç ç­‰éœ€ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">///åœ¨ç”¨æˆ·æˆåŠŸç™»å½•äº¤æ˜“æœåŠ¡å™¨åï¼Œç®—æ³•ç”¨æˆ·å»ºç«‹ç®—æ³•é€šé“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>session_id_ <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>string oms_server_ip <span class="token operator">=</span> <span class="token string">&quot;xxx.xxx.xxx.xxx&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> oms_server_port <span class="token operator">=</span> xxxx<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>string account_name_oms <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxx&quot;</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>string account_pw_oms <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
        
        <span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">ALGOUserEstablishChannel</span><span class="token punctuation">(</span>oms_server_ip<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> oms_server_port<span class="token punctuation">,</span> account_name_oms<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> account_pw_oms<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> session_id_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// å»ºç«‹ç®—æ³•é€šé“è¯·æ±‚æ¶ˆæ¯ï¼Œå‘é€æˆåŠŸ</span>
		<span class="token punctuation">{</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> account_name_oms <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; establish channel send success.&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{</span>
			<span class="token comment">// å»ºç«‹ç®—æ³•é€šé“è¯·æ±‚æ¶ˆæ¯ï¼Œå‘é€å¤±è´¥</span>
			XTPRI<span class="token operator">*</span> error_info <span class="token operator">=</span> user_trader_api_<span class="token operator">-&gt;</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> account_name_algo <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; establish channel send error, &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_id <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_msg <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// algoä¸šåŠ¡ä¸­ç”¨æˆ·å»ºç«‹ç®—æ³•é€šé“çš„æ¶ˆæ¯å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnALGOUserEstablishChannel</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> user<span class="token punctuation">,</span> XTPRI<span class="token operator">*</span> error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_82-insertalgoorder" tabindex="-1"><a class="header-anchor" href="#_82-insertalgoorder"><span>82. InsertAlgoOrder</span></a></h3><p>algoä¸šåŠ¡ä¸­ç”¨æˆ·æŠ¥ç®—æ³•å•è¯·æ±‚ã€‚</p><p>ä»…èƒ½åœ¨ç”¨æˆ·å»ºç«‹ç®—æ³•é€šé“åä½¿ç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">InsertAlgoOrder</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span> strategy_type<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> client_strategy_id<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> strategy_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>strategy_typeï¼šéœ€è¦åˆ›å»ºçš„ç­–ç•¥ç±»å‹</p><p>client_strategy_idï¼šç”¨æˆ·è‡ªå®šä¹‰idï¼Œå¸®åŠ©ç”¨æˆ·å®šä½</p><p>strategy_paramï¼šç­–ç•¥å‚æ•°</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>ç®—æ³•æŠ¥å•è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŠ¥å•ï¼Œå‚æ•°éœ€è¦ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint32_t</span> strategy_type <span class="token operator">=</span> xxx<span class="token punctuation">;</span>
	<span class="token keyword">uint64_t</span> client_strategy_id <span class="token operator">=</span> xxx<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string strategy_param <span class="token operator">=</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">InsertAlgoOrder</span><span class="token punctuation">(</span>strategy_type<span class="token punctuation">,</span> client_strategy_id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>strategy_param<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">// å‘é€ç®—æ³•å•æˆåŠŸ</span>
	<span class="token punctuation">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span><span class="token string">&quot;Insert algo order send success.&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// å‘é€ç®—æ³•å•å¤±è´¥ï¼Œè·å–ä¸‹å•å‘é€å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è¾“å‡ºæ‰“å°</span>
		XTPRI <span class="token operator">*</span>error_info <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Failed to insert algo order, &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_id <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_msg <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// algoä¸šåŠ¡ä¸­æŠ¥é€ç­–ç•¥å•çš„å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnInsertAlgoOrder</span><span class="token punctuation">(</span>XTPStrategyInfoStruct<span class="token operator">*</span> strategy_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_83-cancelalgoorder" tabindex="-1"><a class="header-anchor" href="#_83-cancelalgoorder"><span>83. CancelAlgoOrder</span></a></h3><p>algoä¸šåŠ¡ä¸­ç”¨æˆ·æ’¤é”€ç®—æ³•å•è¯·æ±‚ã€‚</p><p>ä»…èƒ½åœ¨ç”¨æˆ·å»ºç«‹ç®—æ³•é€šé“åè°ƒç”¨ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">CancelAlgoOrder</span><span class="token punctuation">(</span><span class="token keyword">bool</span> cancel_flag<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> xtp_strategy_id<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>cancel_flagï¼šæ˜¯å¦éœ€è¦æ’¤é”€çš„ç®—æ³•å•å·²ä¸‹çš„è®¢å•ï¼Œtrue-æ’¤å•ï¼Œfalse-ä¸æ’¤å•</p><p>xtp_strategy_idï¼šéœ€è¦æ’¤é”€çš„ç®—æ³•å•åœ¨xtp algobusç³»ç»Ÿä¸­çš„id</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ’¤å•ï¼Œå‚æ•°ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">CancelAlgoOrder</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> xtp_strategy_id<span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// algoä¸šåŠ¡ä¸­æ’¤é”€ç­–ç•¥å•çš„å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnCancelAlgoOrder</span><span class="token punctuation">(</span>XTPStrategyInfoStruct<span class="token operator">*</span> strategy_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_84-getalgorithmidbyorder" tabindex="-1"><a class="header-anchor" href="#_84-getalgorithmidbyorder"><span>84. GetAlgorithmIDByOrder</span></a></h3><p>è·å–ç®—æ³•å•çš„æ¯å•IDã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">uint64_t</span> <span class="token function">GetAlgorithmIDByOrder</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> order_xtp_id<span class="token punctuation">,</span> <span class="token keyword">uint32_t</span> order_client_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>order_xtp_idï¼šç®—æ³•å•å¯¹åº”çš„xtp id</p><p>order_client_idï¼šç®—æ³•å•å¯¹åº”çš„è‡ªå®šä¹‰IDï¼Œä¸å¯éšæ„å¡«å†™</p><p>3.è¿”å›</p><p>è¿”å›ç®—æ³•å•çš„æ¯å•IDï¼Œå¦‚æœè¿”å›ä¸º0è¡¨ç¤ºä¸æ˜¯ç®—æ³•å•</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æ ¹æ®æŠ¥å•IDè¯·æ±‚æŸ¥è¯¢æŠ¥å•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">uint32_t</span> order_client_id <span class="token operator">=</span> xxx<span class="token punctuation">;</span>

	<span class="token keyword">uint64_t</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetAlgorithmIDByOrder</span><span class="token punctuation">(</span>order_xtp_id<span class="token punctuation">,</span> order_client_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// retä¸ä¸º0å³ä¸ºç®—æ³•æ¯å•ID</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_85-strategyrecommendation" tabindex="-1"><a class="header-anchor" href="#_85-strategyrecommendation"><span>85. StrategyRecommendation</span></a></h3><p>algoä¸šåŠ¡ä¸­è¯·æ±‚æ¨èç®—æ³•ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">StrategyRecommendation</span><span class="token punctuation">(</span><span class="token keyword">bool</span> basket_flag<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> basket_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int32_t</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>basket_flagï¼šæ˜¯å¦å°†æ»¡è¶³æ¡ä»¶çš„æ¨èç»“æœæ‰“åŒ…æˆæ¯å•ç¯®çš„æ ‡å¿—ï¼Œtrue-æ‰“åŒ…</p><p>basket_paramï¼šéœ€è¦ç®—æ³•æ¨èçš„è¯åˆ¸åˆ—è¡¨ï¼Œä¸ºjsonå­—ä¸²ï¼Œå…·ä½“æ ¼å¼å‚è€ƒè¯´æ˜æ–‡æ¡£æˆ–å’¨è¯¢è¿è¥äººå‘˜</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç </p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// è¯·æ±‚æ¨èç®—æ³•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">bool</span> basket_flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//éœ€è¦æ‰“åŒ…æˆæ¯å•ç¯®</span>
	std<span class="token double-colon punctuation">::</span>string basket_param <span class="token operator">=</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">;</span><span class="token comment">//éœ€è¦ç®—æ³•æ¨èçš„è¯åˆ¸åˆ—è¡¨ï¼Œä¸ºjsonå­—ä¸²</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">StrategyRecommendation</span><span class="token punctuation">(</span>basket_flag<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>basket_param<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">// è¯·æ±‚å‘é€æˆåŠŸ</span>
	<span class="token punctuation">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span><span class="token string">&quot;Strategy recommendation send success.&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// å‘é€è¯·æ±‚æ¨èç®—æ³•å¤±è´¥ï¼Œè·å–å‘é€å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è¾“å‡ºæ‰“å°</span>
		XTPRI <span class="token operator">*</span>error_info <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Failed to strategy recommendation, &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_id <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_msg <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">///algoä¸šåŠ¡ä¸­ç®—æ³•æ¨èçš„å“åº”</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnStrategyRecommendation</span><span class="token punctuation">(</span><span class="token keyword">bool</span> basket_flag<span class="token punctuation">,</span> XTPStrategyRecommendationInfo<span class="token operator">*</span> recommendation_info<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> strategy_param<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int32_t</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_86-querybondswapstockinfo" tabindex="-1"><a class="header-anchor" href="#_86-querybondswapstockinfo"><span>86. QueryBondSwapStockInfo</span></a></h3><p>è¯·æ±‚æŸ¥è¯¢ç”¨æˆ·å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">QueryBondSwapStockInfo</span><span class="token punctuation">(</span>XTPQueryBondSwapStockReq <span class="token operator">*</span>query_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>query_paramï¼šéœ€è¦æŸ¥è¯¢çš„å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯çš„ç­›é€‰æ¡ä»¶ï¼Œå¯ä»¥ä¸ºNULLï¼ˆä¸ºNULLè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰çš„å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯ï¼‰ï¼Œæ­¤å‚æ•°ä¸­åˆçº¦ä»£ç å¯ä»¥ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¦‚æœä¸ºç©ºå­—ç¬¦ä¸²ï¼Œåˆ™æŸ¥è¯¢æ‰€æœ‰å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯ï¼Œå¦‚æœä¸ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè¯·ä¸å¸¦ç©ºæ ¼ï¼Œå¹¶ä»¥&#39;\0&#39;ç»“å°¾ï¼Œä¸”å¿…é¡»ä¸marketåŒ¹é…</p><p>session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>request_idï¼šç”¨äºç”¨æˆ·å®šä½æŸ¥è¯¢å“åº”çš„IDï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰</p><p>3.è¿”å›</p><p>æŸ¥è¯¢è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œ&quot;0&quot;è¡¨ç¤ºæˆåŠŸï¼Œé&quot;0&quot;è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢ç”¨æˆ·å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯</span>
<span class="token comment">// å¯ä»¥æŒ‡å®štickerï¼ŒæŸ¥è¯¢å•ä¸ªå¯è½¬å€ºè½¬è‚¡</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryBondSwapStockReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryBondSwapStockReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	query_param<span class="token punctuation">.</span>market <span class="token operator">=</span> XTP_MKT_SH_A<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string stdstr_ticker <span class="token operator">=</span> <span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">;</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>query_param<span class="token punctuation">.</span>ticker<span class="token punctuation">,</span> stdstr_ticker<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> XTP_TICKER_LEN<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryBondSwapStockInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// æŸ¥è¯¢æ‰€æœ‰çš„å¯è½¬å€ºè½¬è‚¡ä¿¡æ¯</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	XTPQueryBondSwapStockReq query_param<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>XTPQueryBondSwapStockReq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">QueryBondSwapStockInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>query_param<span class="token punctuation">,</span> session_id<span class="token punctuation">,</span> request_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryBondSwapStockInfo</span><span class="token punctuation">(</span>XTPQueryBondSwapStockRsp <span class="token operator">*</span>swap_stock_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">int</span> request_id<span class="token punctuation">,</span> <span class="token keyword">bool</span> is_last<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h3 id="_87-modifyalgoorder" tabindex="-1"><a class="header-anchor" href="#_87-modifyalgoorder"><span>87. ModifyAlgoOrder</span></a></h3><p>algoä¸šåŠ¡ä¸­ä¿®æ”¹å·²æœ‰çš„ç®—æ³•å•ã€‚</p><p>1.å‡½æ•°åŸå‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">int</span> <span class="token function">ModifyAlgoOrder</span><span class="token punctuation">(</span><span class="token keyword">uint64_t</span> xtp_strategy_id<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> strategy_param<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.å‚æ•°</p><p>xtp_strategy_idï¼šxtpç®—æ³•å•ç­–ç•¥ID strategy_paramï¼šä¿®æ”¹åçš„ç­–ç•¥å‚æ•° session_idï¼šèµ„é‡‘è´¦æˆ·å¯¹åº”çš„session_id,ç™»å½•æ—¶å¾—åˆ°</p><p>3.è¿”å›</p><p>ç®—æ³•å•ä¿®æ”¹è¯·æ±‚å‘é€æ˜¯å¦æˆåŠŸï¼Œâ€œ0â€è¡¨ç¤ºæˆåŠŸï¼Œéâ€œ0â€è¡¨ç¤ºå‡ºé”™ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥è°ƒç”¨GetApiLastError()æ¥è·å–é”™è¯¯ä»£ç ã€‚</p><p>4.è°ƒç”¨ç¤ºä¾‹</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token comment">// ä¿®æ”¹å·²æœ‰çš„ç®—æ³•å•ï¼Œå‚æ•°éœ€è¦ç”¨æˆ·è‡ªå®šä¹‰</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>user_trade_api_<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">uint64_t</span> xtp_strategy_id <span class="token operator">=</span> xxx<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string strategy_param <span class="token operator">=</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> ret <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">ModifyAlgoOrder</span><span class="token punctuation">(</span>xtp_strategy_id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>strategy_param<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> session_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">// å‘é€ç®—æ³•å•ä¿®æ”¹è¯·æ±‚æˆåŠŸ</span>
	<span class="token punctuation">{</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span><span class="token string">&quot;Modify algo order send success.&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// å‘é€ç®—æ³•å•ä¿®æ”¹è¯·æ±‚å¤±è´¥ï¼Œè·å–å‘é€å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è¾“å‡ºæ‰“å°</span>
		XTPRI <span class="token operator">*</span>error_info <span class="token operator">=</span> user_trade_api_<span class="token operator">-&gt;</span><span class="token function">GetApiLastError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Failed to modify algo order, &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_id <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">&lt;&lt;</span> error_info<span class="token operator">-&gt;</span>error_msg <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.å“åº”å‡½æ•°</p><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnModifyAlgoOrder</span><span class="token punctuation">(</span>XTPStrategyInfoStruct<span class="token operator">*</span> strategy_info<span class="token punctuation">,</span> XTPRI <span class="token operator">*</span>error_info<span class="token punctuation">,</span> <span class="token keyword">uint64_t</span> session_id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><br></div><!--[--><!----><!--]--><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="vp-link vp-meta-label" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/docs/API_DOC_XTP_APIæ¥å£è¯´æ˜ä¸ç¤ºä¾‹ä»£ç  - XAlgo/TraderApi.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1247776138@qq.com">linxiaolx-lx</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link vp-link prev" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteSpi.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteSpi.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/QuoteSpi.html</div></a><a class="route-link vp-link next" href="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderSpi.html" aria-label="/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderSpi.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">/docs/API_DOC_XTP_API%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%E4%B8%8E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%20-%20XAlgo/TraderSpi.html<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">é»˜è®¤é¡µè„š</div><div class="vp-copyright">Copyright Â© 2024 xtp_master </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-C9BeCxEA.js" defer></script>
  </body>
</html>
