import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as t,c as a,e as n}from"./app-C9BeCxEA.js";const s="/assets/1-DCuqwoBP.png",r="/assets/2-3-uWklIQnz.png",i={},o=n('<h2 id="xtp支持上海level2逐笔合并说明" tabindex="-1"><a class="header-anchor" href="#xtp支持上海level2逐笔合并说明"><span>XTP支持上海Level2逐笔合并说明</span></a></h2><h3 id="一、-逐笔合并后逐笔结构体及字段说明" tabindex="-1"><a class="header-anchor" href="#一、-逐笔合并后逐笔结构体及字段说明"><span>一、 逐笔合并后逐笔结构体及字段说明</span></a></h3><h4 id="_1-逐笔合并后新增逐笔状态消息" tabindex="-1"><a class="header-anchor" href="#_1-逐笔合并后新增逐笔状态消息"><span>1.逐笔合并后新增逐笔状态消息</span></a></h4><figure><img src="'+s+'" alt="avatar" tabindex="0" loading="lazy"><figcaption>avatar</figcaption></figure><p>上交所逐笔合并行情中，逐笔消息类型有三种：逐笔成交、逐笔委托以及新增的逐笔状态消息，QuoteAPI中的<strong>逐笔状态类型XTPTickByTickStatus结构体</strong>就是用于表示逐笔状态消息。</p><p>XTPTickByTickStatus由三个字段组成：1、<strong>channel_no</strong>表示频道代码，对应上交所逐笔合并数据中的Channel字段；2、<strong>seq</strong>表示逐笔序号，对应上交所逐笔合并数据中的BizIndex字段；3、<strong>flag</strong>表示状态信息，当逐笔消息为逐笔状态类型时，对应与TickBSFlag字段，可以表示为START–启动、OCALL–开市集合竞价、TRADE–连续自动撮合、SUSP–停牌、CCALL–收盘集合竞价、CLOSE–闭市、ENDTR–交易结束。</p><h4 id="_2-逐笔合并后的逐笔序号说明" tabindex="-1"><a class="header-anchor" href="#_2-逐笔合并后的逐笔序号说明"><span>2.逐笔合并后的逐笔序号说明</span></a></h4><p>逐笔合并后，逐笔委托消息、逐笔成交消息以及逐笔状态消息均属于逐笔合并消息，同一个channel下，<strong>逐笔序号是统一的</strong>：<strong>XTPTBT.seq == XTPTickByTickEntrust.seq/XTPTickByTickTrade.seq/XTPTickByTickStatus.seq</strong>，逐笔消息中seq字段均对应于上交所逐笔合并数据中的BizIndex字段，在同一个Channel中连续，从1开始。因此逐笔合并后，逐笔委托，逐笔成交以及逐笔状态消息是有序的，用户无需再排序。</p><h3 id="二、逐笔合并后使用注意事项" tabindex="-1"><a class="header-anchor" href="#二、逐笔合并后使用注意事项"><span>二、逐笔合并后使用注意事项</span></a></h3><h4 id="_1-确认api版本" tabindex="-1"><a class="header-anchor" href="#_1-确认api版本"><span>1.确认api版本</span></a></h4><p>若使用上交所逐笔合并行情，请将api更新至<strong>2.2.32.2以上版本</strong>。</p><p>若使用上交所逐笔合并行情时，api为2.2.32.2之前的版本，则仅推送逐笔委托和逐笔成交消息，<strong>无法解析和推送逐笔状态消息</strong>，因此逐笔序号会不连续，无法通过逐笔序号判断接收到的逐笔委托和逐笔成交消息是否发生丢包。</p><h4 id="_2-去除原有的排序逻辑" tabindex="-1"><a class="header-anchor" href="#_2-去除原有的排序逻辑"><span>2.去除原有的排序逻辑</span></a></h4><p>上交所逐笔合并行情为有序行情，用户需要修改原程序中对逐笔消息先排序后使用的逻辑，去除排序逻辑。</p><h4 id="_3-增加逐笔状态处理逻辑" tabindex="-1"><a class="header-anchor" href="#_3-增加逐笔状态处理逻辑"><span>3.增加逐笔状态处理逻辑</span></a></h4><p>逐笔合并后，上交所推送的逐笔消息中新增了逐笔状态消息，在处理通过QuoteSPI的回调函数OnTickByTick()推送的逐笔数据时，可以先根据XTPTBT.type字段判断消息类型，然后<strong>增加处理逐笔状态消息的代码</strong>，比如新增红框case处理语句处理逐笔状态消息。 <img src="'+r+'" alt="avatar" loading="lazy"></p><h4 id="_4-修改判断丢包逻辑" tabindex="-1"><a class="header-anchor" href="#_4-修改判断丢包逻辑"><span>4.修改判断丢包逻辑</span></a></h4><p>逐笔合并后，逐笔委托、逐笔成交以及逐笔状态消息的逐笔序号是统一的，用户需要修改原程序中判断逐笔消息丢包的逻辑，通过XTPTBT.seq字段判断逐笔消息是否丢包。</p>',18),c=[o];function l(p,h){return t(),a("div",null,c)}const E=e(i,[["render",l],["__file","XTP支持上海Level2逐笔合并说明.html.vue"]]),_=JSON.parse('{"path":"/docs/XTP%E6%94%AF%E6%8C%81%E4%B8%8A%E6%B5%B7Level2%E9%80%90%E7%AC%94%E5%90%88%E5%B9%B6%E8%AF%B4%E6%98%8E/XTP%E6%94%AF%E6%8C%81%E4%B8%8A%E6%B5%B7Level2%E9%80%90%E7%AC%94%E5%90%88%E5%B9%B6%E8%AF%B4%E6%98%8E.html","title":"","lang":"zh-CN","frontmatter":{"description":"XTP支持上海Level2逐笔合并说明 一、 逐笔合并后逐笔结构体及字段说明 1.逐笔合并后新增逐笔状态消息 avataravatar 上交所逐笔合并行情中，逐笔消息类型有三种：逐笔成交、逐笔委托以及新增的逐笔状态消息，QuoteAPI中的逐笔状态类型XTPTickByTickStatus结构体就是用于表示逐笔状态消息。 XTPTickByTickSt...","head":[["meta",{"property":"og:url","content":"https://10000l.github.io/docs/XTP%E6%94%AF%E6%8C%81%E4%B8%8A%E6%B5%B7Level2%E9%80%90%E7%AC%94%E5%90%88%E5%B9%B6%E8%AF%B4%E6%98%8E/XTP%E6%94%AF%E6%8C%81%E4%B8%8A%E6%B5%B7Level2%E9%80%90%E7%AC%94%E5%90%88%E5%B9%B6%E8%AF%B4%E6%98%8E.html"}],["meta",{"property":"og:site_name","content":"Docs Demo"}],["meta",{"property":"og:description","content":"XTP支持上海Level2逐笔合并说明 一、 逐笔合并后逐笔结构体及字段说明 1.逐笔合并后新增逐笔状态消息 avataravatar 上交所逐笔合并行情中，逐笔消息类型有三种：逐笔成交、逐笔委托以及新增的逐笔状态消息，QuoteAPI中的逐笔状态类型XTPTickByTickStatus结构体就是用于表示逐笔状态消息。 XTPTickByTickSt..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-03T15:52:56.000Z"}],["meta",{"property":"article:author","content":"xtp_master"}],["meta",{"property":"article:modified_time","content":"2024-06-03T15:52:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-03T15:52:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xtp_master\\",\\"url\\":\\"https://xtp.zts.com.cn\\"}]}"]]},"headers":[{"level":2,"title":"XTP支持上海Level2逐笔合并说明","slug":"xtp支持上海level2逐笔合并说明","link":"#xtp支持上海level2逐笔合并说明","children":[{"level":3,"title":"一、 逐笔合并后逐笔结构体及字段说明","slug":"一、-逐笔合并后逐笔结构体及字段说明","link":"#一、-逐笔合并后逐笔结构体及字段说明","children":[]},{"level":3,"title":"二、逐笔合并后使用注意事项","slug":"二、逐笔合并后使用注意事项","link":"#二、逐笔合并后使用注意事项","children":[]}]}],"git":{"createdTime":1717429976000,"updatedTime":1717429976000,"contributors":[{"name":"linxiaolx-lx","email":"1247776138@qq.com","commits":1}]},"readingTime":{"minutes":2.44,"words":731},"filePathRelative":"docs/XTP支持上海Level2逐笔合并说明/XTP支持上海Level2逐笔合并说明.md","localizedDate":"2024年6月3日","autoDesc":true}');export{E as comp,_ as data};
