import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as e,c as a,e as s}from"./app-C9BeCxEA.js";const n="/assets/1-CkF2NRo3.jpg",l="/assets/2-F8xwh9W6.jpg",r="/assets/3-PYPWCRX1.jpg",p="/assets/4-DPAI4faN.jpg",i="/assets/5-DYhWTInL.jpg",d="/assets/6-CGy3J5hC.jpg",_={},h=s('<h1 id="xtp-上交所新债券-level2-行情说明" tabindex="-1"><a class="header-anchor" href="#xtp-上交所新债券-level2-行情说明"><span>XTP 上交所新债券 Level2 行情说明</span></a></h1><p>针对沪深交易所近期推出的新债券行情，XTP API 做了适当调整，具体变化如下：</p><h2 id="_1-快照行情变化" tabindex="-1"><a class="header-anchor" href="#_1-快照行情变化"><span>1. 快照行情变化</span></a></h2><h3 id="_1-1-快照结构体" tabindex="-1"><a class="header-anchor" href="#_1-1-快照结构体"><span>1.1 快照结构体</span></a></h3><figure><img src="'+n+'" alt="avatar" tabindex="0" loading="lazy"><figcaption>avatar</figcaption></figure><h4 id="_1-新增快照数据类型-xtp-marketdata-type-v2" tabindex="-1"><a class="header-anchor" href="#_1-新增快照数据类型-xtp-marketdata-type-v2"><span>（1）新增快照数据类型 XTP_MARKETDATA_TYPE_V2</span></a></h4><figure><img src="'+l+'" alt="avatar" tabindex="0" loading="lazy"><figcaption>avatar</figcaption></figure><p>此字段在原有的快照数据类型基础上做了更详细的划分，以便于客户使用。</p><p>XTPMD.data_type_v2 = XTP_MARKETDATA_V2_INDEX 时，XTPMD 的联合体无效；</p><p>XTPMD.data_type_v2 = XTP_MARKETDATA_V2_OPTION 时，XTPMD.opt 有效；</p><p>XTPMD.data_type_v2 = XTP_MARKETDATA_V2_ACTUAL 时，XTPMD.stk 有效；</p><p>XTPMD.data_type_v2 = XTP_MARKETDATA_V2_BOND 时，XTPMD.bond 有效；</p><h4 id="_2-新增债券专用结构体-xtpmarketdatabondexdata" tabindex="-1"><a class="header-anchor" href="#_2-新增债券专用结构体-xtpmarketdatabondexdata"><span>（2）新增债券专用结构体 XTPMarketDataBondExData</span></a></h4><p>此结构体仅保留了债券快照的字段。</p><p>仅在 XTPMD.data_type_v2 = XTP_MARKETDATA_V2_BOND 时生效。</p><figure><img src="'+r+'" alt="avatar" tabindex="0" loading="lazy"><figcaption>avatar</figcaption></figure><h3 id="_1-2-xtpmd-ticker-status-含义变化" tabindex="-1"><a class="header-anchor" href="#_1-2-xtpmd-ticker-status-含义变化"><span>1.2 XTPMD.ticker_status 含义变化</span></a></h3><p>上交所新债券 Level2 行情系统上线后，对于沪市新债券 Level2 快照行情， XTPMD.ticker_status 不再有意义，请使用 XTPMD.bond.instrument_status 替代判断（参阅 1.3 章节说明）。</p><p>上交所新债券 Level2 行情快照中，有个独有字段 instrument_status，标识当前债券所处的交易状态，此字段对应含义如下：</p><table><thead><tr><th>字段</th><th>含义</th><th>时间段</th></tr></thead><tbody><tr><td>ADD</td><td>产品未上市</td><td></td></tr><tr><td>START</td><td>启动</td><td>8:45~9:15</td></tr><tr><td>OCALL</td><td>开市集合竞价</td><td>9:15~9:25</td></tr><tr><td>TRADE</td><td>连续自动撮合</td><td>债券现券：9:25<sub>15:00，债券回购：9:25</sub>15:30</td></tr><tr><td>SUSP</td><td>停牌</td><td></td></tr><tr><td>CLOSE</td><td>闭市，自动计算闭市价格</td><td>债券现券：15:00 先到，债券回购：15:30 先到</td></tr><tr><td>ENDTR</td><td>交易结束</td><td>债券现券：15:00 后到，债券回购：15:30 后到</td></tr></tbody></table><p>交易状态说明如下：</p><h4 id="_1-对于债券现券产品" tabindex="-1"><a class="header-anchor" href="#_1-对于债券现券产品"><span>（1）对于债券现券产品：</span></a></h4><p>8:45~9:15 发 START 标志；</p><p>9:15~9:25 是开盘集合竞价就阶段，发 OCALL 标志；</p><p>9:25~15:00 是连续竞价阶段，发 TRADE 标志；</p><p>15:00 后，首先发 CLOSE 标志，随后发 ENDTR 标志。</p><h4 id="_2-对于债券回购产品" tabindex="-1"><a class="header-anchor" href="#_2-对于债券回购产品"><span>（2）对于债券回购产品：</span></a></h4><p>8:45~9:15 发 START 标志；</p><p>9:15~9:25 是开盘集合竞价就阶段，发 OCALL 标志；</p><p>9:25~15:30 是连续竞价阶段，发 TRADE 标志；</p><p>15:30 后，首先发 CLOSE 标志，随后发 ENDTR 标志。</p><h4 id="_3-level2-没有全市场收盘标志-只有每只证券的收盘标志。" tabindex="-1"><a class="header-anchor" href="#_3-level2-没有全市场收盘标志-只有每只证券的收盘标志。"><span>（3）Level2 没有全市场收盘标志，只有每只证券的收盘标志。</span></a></h4><p>如果某证券当天停牌，则在当天先后收到 SUSP、CLOSE 及 ENDTR 标志；如果某证券连续停牌，则可以收到该证券快照及 SUSP 标志，且始终保持 SUSP 标志。</p><h2 id="_2-逐笔行情变化" tabindex="-1"><a class="header-anchor" href="#_2-逐笔行情变化"><span>2.逐笔行情变化</span></a></h2><p>上交所的新债券逐笔行情使用 801 通道，同时增加了状态订单，债券的逐笔成交、逐笔委托、逐笔状态行情三者进行了统一编号。用户可以通过 channel_no=801 过滤出债券逐笔行情，进行单独处理。</p><h3 id="_2-1-逐笔结构体" tabindex="-1"><a class="header-anchor" href="#_2-1-逐笔结构体"><span>2.1 逐笔结构体</span></a></h3><figure><img src="'+p+'" alt="avatar" tabindex="0" loading="lazy"><figcaption>avatar</figcaption></figure><figure><img src="'+i+'" alt="avatar" tabindex="0" loading="lazy"><figcaption>avatar</figcaption></figure><p>逐笔行情结构体 XTPTBT 中新增了逐笔状态订单 XTPTBT.state</p><h3 id="_2-2-逐笔数据枚举类型" tabindex="-1"><a class="header-anchor" href="#_2-2-逐笔数据枚举类型"><span>2.2 逐笔数据枚举类型</span></a></h3><figure><img src="'+d+'" alt="avatar" tabindex="0" loading="lazy"><figcaption>avatar</figcaption></figure><p>XTP_TBT_TYPE 新增了逐笔状态订单类型</p><h3 id="_2-3-xtptbt-state-flag-字段含义" tabindex="-1"><a class="header-anchor" href="#_2-3-xtptbt-state-flag-字段含义"><span>2.3 XTPTBT.state.flag 字段含义</span></a></h3><p>同本文 1.2 章节的 instrument_status 含义</p><h3 id="_2-4-xtptbt-trade-seq-和-xtptbt-entrust-seq-字段含义变化" tabindex="-1"><a class="header-anchor" href="#_2-4-xtptbt-trade-seq-和-xtptbt-entrust-seq-字段含义变化"><span>2.4 XTPTBT.trade.seq 和 XTPTBT.entrust.seq 字段含义变化</span></a></h3><p>对于上海的新债券行情来说，XTPTBT.trade.seq 和 XTPTBT.entrust.seq 这 2 个字段不再各自排序，而是与 XTPTBT.state.seq 三者一起在同一个 channel_no（801）内统一连续排序。</p><p>深圳的逐笔行情不变，仅 channel_no 有变化。</p><h3 id="_2-5-逐笔委托含义变化" tabindex="-1"><a class="header-anchor" href="#_2-5-逐笔委托含义变化"><span>2.5 逐笔委托含义变化</span></a></h3><p>之前上海债券的逐笔委托数据是经过一次撮合后的剩余数据，在新债券行情上线后：</p><p>（1）逐笔委托数据变为原始订单数据。</p><p>（2）集合竞价及停牌期间不发送逐笔委托数据，到集合竞价或停牌结束时统一发送期间的逐笔委托数据。</p><p>（3）涉及交易状态改变产生的集中撮合成交数据在产品状态订单之前发布。</p><h2 id="_3-哪些用户需要修改程序" tabindex="-1"><a class="header-anchor" href="#_3-哪些用户需要修改程序"><span>3.哪些用户需要修改程序</span></a></h2><p>当交易所上线新债券行情后，用户需要针对不同情况做调整，具体如下：</p><h3 id="_3-1-level1-用户" tabindex="-1"><a class="header-anchor" href="#_3-1-level1-用户"><span>3.1 Level1 用户</span></a></h3><p>无影响，可以不做升级。</p><h3 id="_3-2-使用-2-2-32-以前版本的-level2-用户" tabindex="-1"><a class="header-anchor" href="#_3-2-使用-2-2-32-以前版本的-level2-用户"><span>3.2 使用 2.2.32 以前版本的 Level2 用户</span></a></h3><p>按照客户交易偏好，有如下情形：</p><h4 id="_1-不做债券交易-可转债、国债逆回购-或仅做深交所债券交易" tabindex="-1"><a class="header-anchor" href="#_1-不做债券交易-可转债、国债逆回购-或仅做深交所债券交易"><span>（1）不做债券交易（可转债、国债逆回购）或仅做深交所债券交易</span></a></h4><p>可自行判断影响，选择升级与否。</p><p>上交所新债券 Level2 行情系统上线后，旧版的 api 将无法识别新增的上交所新债券行情，需用户自行判断当收到的逐笔数据 XTPTBT.type &gt; XTP_TBT_TRADE时，是否会影响已有的程序逻辑，如果有影响，可以按照 channel_no==801 过滤掉上交所新债券逐笔行情。如果无影响，可不修改。</p><p>快照的 XTPMD.ticker_status 字段在沪市债券快照中不再有意义，需用户自行判断是会否会有影响。如果有影响，且在不升级 API 的情况下，可以按照(XTPMD.r4== 3) &amp;&amp;(XTPMD.exchange_id == XTP_EXCHANGE_SH)将沪市新债券快照行情过滤掉。</p><h4 id="_2-有上交所债券交易" tabindex="-1"><a class="header-anchor" href="#_2-有上交所债券交易"><span>（2）有上交所债券交易</span></a></h4><p>必须升级至 2.2.32 以上版本，并修改程序适配新的行情。</p><p>上交所此次行情升级不是兼容性升级，旧版的行情数据在新系统上线后不再提供，如果不升级 API，将会导致收不到正确的上交所新债券 Level2 行情数据。</p><h3 id="_3-3-从旧版升级至-2-2-32-以上版本的-level2-用户" tabindex="-1"><a class="header-anchor" href="#_3-3-从旧版升级至-2-2-32-以上版本的-level2-用户"><span>3.3 从旧版升级至 2.2.32 以上版本的 Level2 用户</span></a></h3><p>按照行情不同数据类型，有如下改动：</p><h4 id="_1-深市债券行情" tabindex="-1"><a class="header-anchor" href="#_1-深市债券行情"><span>（1）深市债券行情</span></a></h4><p>基本上没有变化，仅 channel_no 做了改变，对于深圳债券的程序处理逻辑可以不用变化，也可以根据 XTPMD.data_type_v2 以及 XTPMD.bond 来修改程序处理逻辑。</p><h4 id="_2-沪市新债券level2-行情" tabindex="-1"><a class="header-anchor" href="#_2-沪市新债券level2-行情"><span>（2）沪市新债券Level2 行情</span></a></h4><p>变化很大，需要根据新的行情数据来修改程序处理逻辑。</p><ul><li>逐笔行情：按照 channel_no=801 过滤出上交所的新债券逐笔行情，单独处理。注意：上交所新债券的逐笔委托、逐笔成交、逐笔状态三者有统一连续编号，不再各自编号。</li><li>快照行情：XTPMD.ticker_status 字段在沪市新债券 Level2 快照中不再有意义，请使用 XTPMD.bond.instrument_status 替代判断（参阅 1.3 章节说明）。</li></ul>',72),c=[h];function o(T,v){return e(),a("div",null,c)}const E=t(_,[["render",o],["__file","XTP上交所新债券 Level2 行情说明.html.vue"]]),A=JSON.parse('{"path":"/docs/XTP%E4%B8%8A%E4%BA%A4%E6%89%80%E6%96%B0%E5%80%BA%E5%88%B8%20Level2%20%E8%A1%8C%E6%83%85%E8%AF%B4%E6%98%8E/XTP%E4%B8%8A%E4%BA%A4%E6%89%80%E6%96%B0%E5%80%BA%E5%88%B8%20Level2%20%E8%A1%8C%E6%83%85%E8%AF%B4%E6%98%8E.html","title":"XTP 上交所新债券 Level2 行情说明","lang":"zh-CN","frontmatter":{"description":"XTP 上交所新债券 Level2 行情说明 针对沪深交易所近期推出的新债券行情，XTP API 做了适当调整，具体变化如下： 1. 快照行情变化 1.1 快照结构体 avataravatar （1）新增快照数据类型 XTP_MARKETDATA_TYPE_V2 avataravatar 此字段在原有的快照数据类型基础上做了更详细的划分，以便于客户使用...","head":[["meta",{"property":"og:url","content":"https://10000l.github.io/docs/XTP%E4%B8%8A%E4%BA%A4%E6%89%80%E6%96%B0%E5%80%BA%E5%88%B8%20Level2%20%E8%A1%8C%E6%83%85%E8%AF%B4%E6%98%8E/XTP%E4%B8%8A%E4%BA%A4%E6%89%80%E6%96%B0%E5%80%BA%E5%88%B8%20Level2%20%E8%A1%8C%E6%83%85%E8%AF%B4%E6%98%8E.html"}],["meta",{"property":"og:site_name","content":"Docs Demo"}],["meta",{"property":"og:title","content":"XTP 上交所新债券 Level2 行情说明"}],["meta",{"property":"og:description","content":"XTP 上交所新债券 Level2 行情说明 针对沪深交易所近期推出的新债券行情，XTP API 做了适当调整，具体变化如下： 1. 快照行情变化 1.1 快照结构体 avataravatar （1）新增快照数据类型 XTP_MARKETDATA_TYPE_V2 avataravatar 此字段在原有的快照数据类型基础上做了更详细的划分，以便于客户使用..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-03T15:52:56.000Z"}],["meta",{"property":"article:author","content":"xtp_master"}],["meta",{"property":"article:modified_time","content":"2024-06-03T15:52:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"XTP 上交所新债券 Level2 行情说明\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-03T15:52:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xtp_master\\",\\"url\\":\\"https://xtp.zts.com.cn\\"}]}"]]},"headers":[{"level":2,"title":"1. 快照行情变化","slug":"_1-快照行情变化","link":"#_1-快照行情变化","children":[{"level":3,"title":"1.1 快照结构体","slug":"_1-1-快照结构体","link":"#_1-1-快照结构体","children":[]},{"level":3,"title":"1.2 XTPMD.ticker_status 含义变化","slug":"_1-2-xtpmd-ticker-status-含义变化","link":"#_1-2-xtpmd-ticker-status-含义变化","children":[]}]},{"level":2,"title":"2.逐笔行情变化","slug":"_2-逐笔行情变化","link":"#_2-逐笔行情变化","children":[{"level":3,"title":"2.1 逐笔结构体","slug":"_2-1-逐笔结构体","link":"#_2-1-逐笔结构体","children":[]},{"level":3,"title":"2.2 逐笔数据枚举类型","slug":"_2-2-逐笔数据枚举类型","link":"#_2-2-逐笔数据枚举类型","children":[]},{"level":3,"title":"2.3 XTPTBT.state.flag 字段含义","slug":"_2-3-xtptbt-state-flag-字段含义","link":"#_2-3-xtptbt-state-flag-字段含义","children":[]},{"level":3,"title":"2.4 XTPTBT.trade.seq 和 XTPTBT.entrust.seq 字段含义变化","slug":"_2-4-xtptbt-trade-seq-和-xtptbt-entrust-seq-字段含义变化","link":"#_2-4-xtptbt-trade-seq-和-xtptbt-entrust-seq-字段含义变化","children":[]},{"level":3,"title":"2.5 逐笔委托含义变化","slug":"_2-5-逐笔委托含义变化","link":"#_2-5-逐笔委托含义变化","children":[]}]},{"level":2,"title":"3.哪些用户需要修改程序","slug":"_3-哪些用户需要修改程序","link":"#_3-哪些用户需要修改程序","children":[{"level":3,"title":"3.1 Level1 用户","slug":"_3-1-level1-用户","link":"#_3-1-level1-用户","children":[]},{"level":3,"title":"3.2 使用 2.2.32 以前版本的 Level2 用户","slug":"_3-2-使用-2-2-32-以前版本的-level2-用户","link":"#_3-2-使用-2-2-32-以前版本的-level2-用户","children":[]},{"level":3,"title":"3.3 从旧版升级至 2.2.32 以上版本的 Level2 用户","slug":"_3-3-从旧版升级至-2-2-32-以上版本的-level2-用户","link":"#_3-3-从旧版升级至-2-2-32-以上版本的-level2-用户","children":[]}]}],"git":{"createdTime":1717429976000,"updatedTime":1717429976000,"contributors":[{"name":"linxiaolx-lx","email":"1247776138@qq.com","commits":1}]},"readingTime":{"minutes":5.07,"words":1522},"filePathRelative":"docs/XTP上交所新债券 Level2 行情说明/XTP上交所新债券 Level2 行情说明.md","localizedDate":"2024年6月3日","autoDesc":true}');export{E as comp,A as data};
